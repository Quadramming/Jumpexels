<!DOCTYPE HTML>
<html>
	<head>
		<title>Sprite test</title>
		<meta charset='utf-8'/>
		
		<script type='text/javascript' src='../../ImgManager/ImgManager.js'></script>
		<script type='text/javascript' src='../../Time/Time.js'></script>
		<script type='text/javascript' src='../../Canvas/Canvas.js'></script>
		<script type='text/javascript' src='../Sprite.js'></script>
		<script type='text/javascript'>

			//================================================================
			// Fake console
			//================================================================
			function docWrite(text) {
				var myBody = document.getElementsByTagName('body')[0];
				myBody.innerHTML = myBody.innerHTML + text;
			}

			function fakeConsole() {
				this.log = function(text) {
					docWrite('<i class="console">Console: '+text+'</i><br/>');
				};
			}
	
			var console = new fakeConsole;
			//================================================================
			
			var sprite;
			var manager;
			var canvas;
			var time;
			
			function main() {
				time    = new QQ.Time;
				manager = new QQ.ImgManager;
				canvas  = new QQ.Canvas('myCanvas', 800, 600);
				canvas.drawBorder();
				QQ.Sprite.setContext(canvas.getContext());
				
				sprite  = new QQ.Sprite( manager.get('test.jpg') );
				walk    = new QQ.Sprite( manager.get('walk.jpg') );
				walk.setAnimation(96, 96, 10, time);
				
				startAnimation();
			}
			
			function startAnimation() {
				time.update();
				sprite.draw(100, 50);
				walk.draw(100, 100);
				sprite.draw(QQ.Sprite.pivot.LEFTTOP);
				walk.draw(QQ.Sprite.pivot.CENTERBOTTOM);
				walk.draw(QQ.Sprite.pivot.CENTERTOP);
				window.document.title = 'Sprite ready is : ' + sprite.isReady();
				
				requestAnimationFrame(startAnimation);
			}

		</script>
	</head>
	<body onload='main()'>
	</body>
</html>
