var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,a,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[a]=d.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var a=0;return $jscomp.iteratorPrototype(function(){return a<f.length?{done:!1,value:f[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();var a=f[Symbol.iterator];return a?a.call(f):$jscomp.arrayIterator(f)};
$jscomp.inherits=function(f,a){function d(){}d.prototype=a.prototype;f.prototype=new d;f.prototype.constructor=f;for(var m in a)if(Object.defineProperties){var b=Object.getOwnPropertyDescriptor(a,m);b&&Object.defineProperty(f,m,b)}else f[m]=a[m]};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(f,a){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var d=0,m={next:function(){if(d<f.length){var b=d++;return{value:a(b,f[b]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(f,a,d,m){if(a){d=$jscomp.global;f=f.split(".");for(m=0;m<f.length-1;m++){var b=f[m];b in d||(d[b]={});d=d[b]}f=f[f.length-1];m=d[f];a=a(m);a!=m&&null!=a&&$jscomp.defineProperty(d,f,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f,d){return d})}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(f,d,m){var b=this.length||0;0>d&&(d=Math.max(0,b+d));if(null==m||m>b)m=b;m=Number(m);0>m&&(m=Math.max(0,b+m));for(d=Number(d||0);d<m;d++)this[d]=f;return this}},"es6-impl","es3");
$jscomp.checkStringArgs=function(f,a,d){if(null==f)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(f,d){return-1!==$jscomp.checkStringArgs(this,f,"includes").indexOf(f,d||0)}},"es6-impl","es3");window.QQ=window.QQ||{};window.QQ.Debug={log:function(f){console.log(f)}};
window.c=function(f){window.QQ.Debug.log(f)};c("Using QQ.Debug:");c("function c(str) - Quick log");
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Matter=f()})(function(){return function a(d,m,b){function l(k,h){if(!m[k]){if(!d[k]){var q="function"==typeof require&&require;if(!h&&q)return q(k,!0);if(e)return e(k,!0);q=Error("Cannot find module '"+k+"'");throw q.code="MODULE_NOT_FOUND",q;}q=m[k]={exports:{}};
d[k][0].call(q.exports,function(b){var p=d[k][1][b];return l(p?p:b)},q,q.exports,a,d,m,b)}return m[k].exports}for(var e="function"==typeof require&&require,h=0;h<b.length;h++)l(b[h]);return l}({1:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=a("../geometry/Vector"),h=a("../core/Sleeping");a("../render/Render");var k=a("../core/Common"),t=a("../geometry/Bounds"),q=a("../geometry/Axes");(function(){b._inertiaScale=4;b._nextCollidingGroupId=1;b._nextNonCollidingGroupId=-1;b._nextCategory=
1;b.create=function(p){var a={id:k.nextId(),type:"body",label:"Body",parts:[],angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,
group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:1.5}},a=k.extend(a,p);p=p||{};b.set(a,{bounds:a.bounds||t.create(a.vertices),positionPrev:a.positionPrev||e.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a});l.rotate(a.vertices,a.angle,a.position);q.rotate(a.axes,a.angle);t.update(a.bounds,a.vertices,a.velocity);b.set(a,{axes:p.axes||
a.axes,area:p.area||a.area,mass:p.mass||a.mass,inertia:p.inertia||a.inertia});p=a.isStatic?"#eeeeee":k.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]);var g=k.shadeColor(p,-20);a.render.fillStyle=a.render.fillStyle||p;a.render.strokeStyle=a.render.strokeStyle||g;a.render.sprite.xOffset+=-(a.bounds.min.x-a.position.x)/(a.bounds.max.x-a.bounds.min.x);a.render.sprite.yOffset+=-(a.bounds.min.y-a.position.y)/(a.bounds.max.y-a.bounds.min.y);return a};b.nextGroup=function(a){return a?b._nextNonCollidingGroupId--:
b._nextCollidingGroupId++};b.nextCategory=function(){b._nextCategory<<=1;return b._nextCategory};b.set=function(a,e,g){var p;"string"===typeof e&&(p=e,e={},e[p]=g);for(p in e)if(g=e[p],e.hasOwnProperty(p))switch(p){case "isStatic":b.setStatic(a,g);break;case "isSleeping":h.set(a,g);break;case "mass":b.setMass(a,g);break;case "density":b.setDensity(a,g);break;case "inertia":b.setInertia(a,g);break;case "vertices":b.setVertices(a,g);break;case "position":b.setPosition(a,g);break;case "angle":b.setAngle(a,
g);break;case "velocity":b.setVelocity(a,g);break;case "angularVelocity":b.setAngularVelocity(a,g);break;case "parts":b.setParts(a,g);break;default:a[p]=g}};b.setStatic=function(a,b){for(var g=0;g<a.parts.length;g++){var p=a.parts[g];if(p.isStatic=b)p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=Infinity,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0}};b.setMass=function(a,
b){a.mass=b;a.inverseMass=1/a.mass;a.density=a.mass/a.area};b.setDensity=function(a,e){b.setMass(a,e*a.area);a.density=e};b.setInertia=function(a,b){a.inertia=b;a.inverseInertia=1/a.inertia};b.setVertices=function(a,e){a.vertices=e[0].body===a?e:l.create(e,a);a.axes=q.fromVertices(a.vertices);a.area=l.area(a.vertices);b.setMass(a,a.density*a.area);var g=l.centre(a.vertices);l.translate(a.vertices,g,-1);b.setInertia(a,b._inertiaScale*l.inertia(a.vertices,a.mass));l.translate(a.vertices,a.position);
t.update(a.bounds,a.vertices,a.velocity)};b.setParts=function(e,k,g){var p;k=k.slice(0);e.parts.length=0;e.parts.push(e);e.parent=e;for(p=0;p<k.length;p++){var n=k[p];n!==e&&(n.parent=e,e.parts.push(n))}if(1!==e.parts.length){if("undefined"!==typeof g?g:1){g=[];for(p=0;p<k.length;p++)g=g.concat(k[p].vertices);l.clockwiseSort(g);k=l.hull(g);p=l.centre(k);b.setVertices(e,k);l.translate(e.vertices,p)}k=a(e);e.area=k.area;e.parent=e;e.position.x=k.centre.x;e.position.y=k.centre.y;e.positionPrev.x=k.centre.x;
e.positionPrev.y=k.centre.y;b.setMass(e,k.mass);b.setInertia(e,k.inertia);b.setPosition(e,k.centre)}};b.setPosition=function(a,b){var g=e.sub(b,a.position);a.positionPrev.x+=g.x;a.positionPrev.y+=g.y;for(var k=0;k<a.parts.length;k++){var p=a.parts[k];p.position.x+=g.x;p.position.y+=g.y;l.translate(p.vertices,g);t.update(p.bounds,p.vertices,a.velocity)}};b.setAngle=function(a,b){var g=b-a.angle;a.anglePrev+=g;for(var k=0;k<a.parts.length;k++){var p=a.parts[k];p.angle+=g;l.rotate(p.vertices,g,a.position);
q.rotate(p.axes,g);t.update(p.bounds,p.vertices,a.velocity);0<k&&e.rotateAbout(p.position,g,a.position,p.position)}};b.setVelocity=function(a,b){a.positionPrev.x=a.position.x-b.x;a.positionPrev.y=a.position.y-b.y;a.velocity.x=b.x;a.velocity.y=b.y;a.speed=e.magnitude(a.velocity)};b.setAngularVelocity=function(a,b){a.anglePrev=a.angle-b;a.angularVelocity=b;a.angularSpeed=Math.abs(a.angularVelocity)};b.translate=function(a,k){b.setPosition(a,e.add(a.position,k))};b.rotate=function(a,e){b.setAngle(a,
a.angle+e)};b.scale=function(e,k,g,n){for(n=0;n<e.parts.length;n++){var p=e.parts[n];l.scale(p.vertices,k,g,e.position);p.axes=q.fromVertices(p.vertices);e.isStatic||(p.area=l.area(p.vertices),b.setMass(p,e.density*p.area),l.translate(p.vertices,{x:-p.position.x,y:-p.position.y}),b.setInertia(p,l.inertia(p.vertices,p.mass)),l.translate(p.vertices,{x:p.position.x,y:p.position.y}));t.update(p.bounds,p.vertices,e.velocity)}e.circleRadius&&(e.circleRadius=k===g?e.circleRadius*k:null);e.isStatic||(k=a(e),
e.area=k.area,b.setMass(e,k.mass),b.setInertia(e,k.inertia))};b.update=function(a,b,g,k){b=Math.pow(b*g*a.timeScale,2);g=1-a.frictionAir*g*a.timeScale;var n=a.position.y-a.positionPrev.y;a.velocity.x=(a.position.x-a.positionPrev.x)*g*k+a.force.x/a.mass*b;a.velocity.y=n*g*k+a.force.y/a.mass*b;a.positionPrev.x=a.position.x;a.positionPrev.y=a.position.y;a.position.x+=a.velocity.x;a.position.y+=a.velocity.y;a.angularVelocity=(a.angle-a.anglePrev)*g*k+a.torque/a.inertia*b;a.anglePrev=a.angle;a.angle+=
a.angularVelocity;a.speed=e.magnitude(a.velocity);a.angularSpeed=Math.abs(a.angularVelocity);for(k=0;k<a.parts.length;k++)b=a.parts[k],l.translate(b.vertices,a.velocity),0<k&&(b.position.x+=a.velocity.x,b.position.y+=a.velocity.y),0!==a.angularVelocity&&(l.rotate(b.vertices,a.angularVelocity,a.position),q.rotate(b.axes,a.angularVelocity),0<k&&e.rotateAbout(b.position,a.angularVelocity,a.position,b.position)),t.update(b.bounds,b.vertices,a.velocity)};b.applyForce=function(a,b,g){a.force.x+=g.x;a.force.y+=
g.y;a.torque+=(b.x-a.position.x)*g.y-(b.y-a.position.y)*g.x};var a=function(a){for(var b={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=1===a.parts.length?0:1;g<a.parts.length;g++){var k=a.parts[g];b.mass+=k.mass;b.area+=k.area;b.inertia+=k.inertia;b.centre=e.add(b.centre,e.mult(k.position,Infinity!==k.mass?k.mass:1))}b.centre=e.div(b.centre,Infinity!==b.mass?b.mass:a.parts.length);return b}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,
"../geometry/Vertices":29,"../render/Render":31}],2:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Events"),e=a("../core/Common"),h=a("./Body");(function(){b.create=function(a){return e.extend({id:e.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite"},a)};b.setModified=function(a,e,h,n){a.isModified=e;h&&a.parent&&b.setModified(a.parent,e,h,n);if(n)for(var k=0;k<a.composites.length;k++)b.setModified(a.composites[k],e,h,n)};b.add=function(a,
h){var k=[].concat(h);l.trigger(a,"beforeAdd",{object:h});for(var n=0;n<k.length;n++){var p=k[n];switch(p.type){case "body":if(p.parent!==p){e.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}b.addBody(a,p);break;case "constraint":b.addConstraint(a,p);break;case "composite":b.addComposite(a,p);break;case "mouseConstraint":b.addConstraint(a,p.constraint)}}l.trigger(a,"afterAdd",{object:h});return a};b.remove=function(a,e,h){var k=[].concat(e);l.trigger(a,
"beforeRemove",{object:e});for(var p=0;p<k.length;p++){var q=k[p];switch(q.type){case "body":b.removeBody(a,q,h);break;case "constraint":b.removeConstraint(a,q,h);break;case "composite":b.removeComposite(a,q,h);break;case "mouseConstraint":b.removeConstraint(a,q.constraint)}}l.trigger(a,"afterRemove",{object:e});return a};b.addComposite=function(a,e){a.composites.push(e);e.parent=a;b.setModified(a,!0,!0,!1);return a};b.removeComposite=function(a,h,q){var k=e.indexOf(a.composites,h);-1!==k&&(b.removeCompositeAt(a,
k),b.setModified(a,!0,!0,!1));if(q)for(q=0;q<a.composites.length;q++)b.removeComposite(a.composites[q],h,!0);return a};b.removeCompositeAt=function(a,e){a.composites.splice(e,1);b.setModified(a,!0,!0,!1);return a};b.addBody=function(a,e){a.bodies.push(e);b.setModified(a,!0,!0,!1);return a};b.removeBody=function(a,h,q){var k=e.indexOf(a.bodies,h);-1!==k&&(b.removeBodyAt(a,k),b.setModified(a,!0,!0,!1));if(q)for(q=0;q<a.composites.length;q++)b.removeBody(a.composites[q],h,!0);return a};b.removeBodyAt=
function(a,e){a.bodies.splice(e,1);b.setModified(a,!0,!0,!1);return a};b.addConstraint=function(a,e){a.constraints.push(e);b.setModified(a,!0,!0,!1);return a};b.removeConstraint=function(a,h,q){var k=e.indexOf(a.constraints,h);-1!==k&&b.removeConstraintAt(a,k);if(q)for(q=0;q<a.composites.length;q++)b.removeConstraint(a.composites[q],h,!0);return a};b.removeConstraintAt=function(a,e){a.constraints.splice(e,1);b.setModified(a,!0,!0,!1);return a};b.clear=function(a,e,h){if(h)for(h=0;h<a.composites.length;h++)b.clear(a.composites[h],
e,!0);e?a.bodies=a.bodies.filter(function(a){return a.isStatic}):a.bodies.length=0;a.constraints.length=0;a.composites.length=0;b.setModified(a,!0,!0,!1);return a};b.allBodies=function(a){for(var e=[].concat(a.bodies),k=0;k<a.composites.length;k++)e=e.concat(b.allBodies(a.composites[k]));return e};b.allConstraints=function(a){for(var e=[].concat(a.constraints),k=0;k<a.composites.length;k++)e=e.concat(b.allConstraints(a.composites[k]));return e};b.allComposites=function(a){for(var e=[].concat(a.composites),
k=0;k<a.composites.length;k++)e=e.concat(b.allComposites(a.composites[k]));return e};b.get=function(a,e,h){var k;switch(h){case "body":k=b.allBodies(a);break;case "constraint":k=b.allConstraints(a);break;case "composite":k=b.allComposites(a).concat(a)}if(!k)return null;a=k.filter(function(a){return a.id.toString()===e.toString()});return 0===a.length?null:a[0]};b.move=function(a,e,h){b.remove(a,e);b.add(h,e);return a};b.rebase=function(a){for(var k=b.allBodies(a).concat(b.allConstraints(a)).concat(b.allComposites(a)),
h=0;h<k.length;h++)k[h].id=e.nextId();b.setModified(a,!0,!0,!1);return a};b.translate=function(a,e,d){d=d?b.allBodies(a):a.bodies;for(var k=0;k<d.length;k++)h.translate(d[k],e);b.setModified(a,!0,!0,!1);return a};b.rotate=function(a,e,d,n){var k=Math.cos(e),q=Math.sin(e);n=n?b.allBodies(a):a.bodies;for(var g=0;g<n.length;g++){var l=n[g],v=l.position.x-d.x,u=l.position.y-d.y;h.setPosition(l,{x:d.x+(v*k-u*q),y:d.y+(v*q+u*k)});h.rotate(l,e)}b.setModified(a,!0,!0,!1);return a};b.scale=function(a,e,d,
n,p){p=p?b.allBodies(a):a.bodies;for(var k=0;k<p.length;k++){var g=p[k];h.setPosition(g,{x:n.x+(g.position.x-n.x)*e,y:n.y+(g.position.y-n.y)*d});h.scale(g,e,d)}b.setModified(a,!0,!0,!1);return a}})()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(a,d,m){var b={};d.exports=b;var l=a("./Composite");a("../constraint/Constraint");var e=a("../core/Common");(function(){b.create=function(a){var b=l.create();return e.extend(b,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,
y:-Infinity},max:{x:Infinity,y:Infinity}}},a)}})()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a){return{id:b.id(a),vertex:a,normalImpulse:0,tangentImpulse:0}};b.id=function(a){return a.body.id+"_"+a.index}})()},{}],5:[function(a,d,m){var b={};d.exports=b;var l=a("./SAT"),e=a("./Pair"),h=a("../geometry/Bounds");(function(){b.collisions=function(a,d){for(var k=[],n=d.pairs.table,p=0;p<a.length;p++){var w=
a[p][0],g=a[p][1];if((!w.isStatic&&!w.isSleeping||!g.isStatic&&!g.isSleeping)&&b.canCollide(w.collisionFilter,g.collisionFilter)&&h.overlaps(w.bounds,g.bounds))for(var y=1<w.parts.length?1:0;y<w.parts.length;y++)for(var v=w.parts[y],u=1<g.parts.length?1:0;u<g.parts.length;u++){var r=g.parts[u];if(v===w&&r===g||h.overlaps(v.bounds,r.bounds)){var t=e.id(v,r),t=n[t],r=l.collides(v,r,t&&t.isActive?t.collision:null);r.collided&&k.push(r)}}}return k};b.canCollide=function(a,b){return a.group===b.group&&
0!==a.group?0<a.group:0!==(a.mask&b.category)&&0!==(b.mask&a.category)}})()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(a,d,m){var b={};d.exports=b;var l=a("./Pair"),e=a("./Detector"),h=a("../core/Common");(function(){b.create=function(a){return h.extend({controller:b,detector:e.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},a)};b.update=function(b,e,k,p){var n,g,d=k.world,v=b.buckets,u,q;n=!1;for(k=0;k<e.length;k++){var t=e[k];if(!(t.isSleeping&&!p||
t.bounds.max.x<d.bounds.min.x||t.bounds.min.x>d.bounds.max.x||t.bounds.max.y<d.bounds.min.y||t.bounds.min.y>d.bounds.max.y)){var m;m=t.bounds;m=a(Math.floor(m.min.x/b.bucketWidth),Math.floor(m.max.x/b.bucketWidth),Math.floor(m.min.y/b.bucketHeight),Math.floor(m.max.y/b.bucketHeight));if(!t.region||m.id!==t.region.id||p){if(!t.region||p)t.region=m;var z;n=t.region;z=a(Math.min(m.startCol,n.startCol),Math.max(m.endCol,n.endCol),Math.min(m.startRow,n.startRow),Math.max(m.endRow,n.endRow));for(n=z.startCol;n<=
z.endCol;n++)for(g=z.startRow;g<=z.endRow;g++){q=n+","+g;u=v[q];var x=n>=m.startCol&&n<=m.endCol&&g>=m.startRow&&g<=m.endRow,D=n>=t.region.startCol&&n<=t.region.endCol&&g>=t.region.startRow&&g<=t.region.endRow;if(!x&&D&&D&&u){var E=b,F=u,A=t;F.splice(h.indexOf(F,A),1);for(var B=0;B<F.length;B++){var C=l.id(A,F[B]);(C=E.pairs[C])&&--C[2]}}if(t.region===m||x&&!D||p){u||(u=v[q]=[]);q=b;x=t;for(D=0;D<u.length;D++)E=u[D],x.id===E.id||x.isStatic&&E.isStatic||(F=l.id(x,E),(A=q.pairs[F])?A[2]+=1:q.pairs[F]=
[x,E,1]);u.push(x)}}t.region=m;n=!0}}}if(n){k=[];e=h.keys(b.pairs);for(d=0;d<e.length;d++)p=b.pairs[e[d]],0<p[2]?k.push(p):delete b.pairs[e[d]];b.pairsList=k}};b.clear=function(a){a.buckets={};a.pairs={};a.pairsList=[]};var a=function(a,b,e,k){return{id:a+","+b+","+e+","+k,startCol:a,endCol:b,startRow:e,endRow:k}}})()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(a,d,m){var b={};d.exports=b;var l=a("./Contact");(function(){b.create=function(a,h){var e=a.bodyA,d=a.bodyB,q=a.parentA,
n=a.parentB,e={id:b.id(e,d),bodyA:e,bodyB:d,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:e.isSensor||d.isSensor,timeCreated:h,timeUpdated:h,inverseMass:q.inverseMass+n.inverseMass,friction:Math.min(q.friction,n.friction),frictionStatic:Math.max(q.frictionStatic,n.frictionStatic),restitution:Math.max(q.restitution,n.restitution),slop:Math.max(q.slop,n.slop)};b.update(e,a,h);return e};b.update=function(a,h,k){var e=a.contacts,d=h.supports,n=a.activeContacts,p=h.parentA,w=h.parentB;
a.collision=h;a.inverseMass=p.inverseMass+w.inverseMass;a.friction=Math.min(p.friction,w.friction);a.frictionStatic=Math.max(p.frictionStatic,w.frictionStatic);a.restitution=Math.max(p.restitution,w.restitution);a.slop=Math.max(p.slop,w.slop);n.length=0;if(h.collided){for(p=0;p<d.length;p++){var w=d[p],g=l.id(w),y=e[g];y?n.push(y):n.push(e[g]=l.create(w))}a.separation=h.depth;b.setActive(a,!0,k)}else!0===a.isActive&&b.setActive(a,!1,k)};b.setActive=function(a,b,k){b?(a.isActive=!0,a.timeUpdated=k):
(a.isActive=!1,a.activeContacts.length=0)};b.id=function(a,b){return a.id<b.id?a.id+"_"+b.id:b.id+"_"+a.id}})()},{"./Contact":4}],8:[function(a,d,m){var b={};d.exports=b;var l=a("./Pair"),e=a("../core/Common");(function(){b.create=function(a){return e.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)};b.update=function(a,b,d){var k=a.list,n=a.table,h=a.collisionStart,w=a.collisionEnd;a=a.collisionActive;var g=[],y,v,u,r;h.length=0;w.length=0;for(r=a.length=0;r<b.length;r++)y=
b[r],y.collided&&(v=l.id(y.bodyA,y.bodyB),g.push(v),(u=n[v])?(u.isActive?a.push(u):h.push(u),l.update(u,y,d)):(u=l.create(y,d),n[v]=u,h.push(u),k.push(u)));for(r=0;r<k.length;r++)u=k[r],u.isActive&&-1===e.indexOf(g,u.id)&&(l.setActive(u,!1,d),w.push(u))};b.removeOld=function(a,b){var e=a.list,k=a.table,n=[],h,d,g;for(g=0;g<e.length;g++)h=e[g],d=h.collision,d.bodyA.isSleeping||d.bodyB.isSleeping?h.timeUpdated=b:1E3<b-h.timeUpdated&&n.push(g);for(g=0;g<n.length;g++)d=n[g]-g,h=e[d],delete k[h.id],e.splice(d,
1)};b.clear=function(a){a.table={};a.list.length=0;a.collisionStart.length=0;a.collisionActive.length=0;a.collisionEnd.length=0;return a}})()},{"../core/Common":14,"./Pair":7}],9:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),e=a("./SAT"),h=a("../geometry/Bounds"),k=a("../factory/Bodies"),t=a("../geometry/Vertices");(function(){b.ray=function(a,b,d,w){w=w||1E-100;var g=l.angle(b,d),n=l.magnitude(l.sub(b,d));b=k.rectangle(.5*(d.x+b.x),.5*(d.y+b.y),n,w,{angle:g});d=[];for(w=0;w<
a.length;w++)if(g=a[w],h.overlaps(g.bounds,b.bounds))for(n=1===g.parts.length?0:1;n<g.parts.length;n++){var v=g.parts[n];if(h.overlaps(v.bounds,b.bounds)&&(v=e.collides(v,b),v.collided)){v.body=v.bodyA=v.bodyB=g;d.push(v);break}}return d};b.region=function(a,b,e){for(var k=[],g=0;g<a.length;g++){var n=a[g],d=h.overlaps(n.bounds,b);(d&&!e||!d&&e)&&k.push(n)}return k};b.point=function(a,b){for(var e=[],k=0;k<a.length;k++){var g=a[k];if(h.contains(g.bounds,b))for(var n=1===g.parts.length?0:1;n<g.parts.length;n++){var d=
g.parts[n];if(h.contains(d.bounds,b)&&t.contains(d.vertices,b)){e.push(g);break}}}return e}})()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=a("../geometry/Vector"),h=a("../core/Common"),k=a("../geometry/Bounds");(function(){b._restingThresh=4;b._restingThreshTangent=6;b._positionDampen=.9;b._positionWarming=.8;b._frictionNormalMultiplier=5;b.preSolvePosition=
function(a){var b,e,k;for(b=0;b<a.length;b++)e=a[b],e.isActive&&(k=e.activeContacts.length,e.collision.parentA.totalContacts+=k,e.collision.parentB.totalContacts+=k)};b.solvePosition=function(a,k){var n,d,h,g,l,v,u;u=e._temp[0];var q=e._temp[1],t=e._temp[2],m=e._temp[3];for(n=0;n<a.length;n++)d=a[n],d.isActive&&!d.isSensor&&(h=d.collision,g=h.parentA,l=h.parentB,v=h.normal,g=e.sub(e.add(l.positionImpulse,l.position,u),e.add(g.positionImpulse,e.sub(l.position,h.penetration,q),t),m),d.separation=e.dot(v,
g));for(n=0;n<a.length;n++)if(d=a[n],!(!d.isActive||d.isSensor||0>d.separation)){h=d.collision;g=h.parentA;l=h.parentB;v=h.normal;u=(d.separation-d.slop)*k;if(g.isStatic||l.isStatic)u*=2;g.isStatic||g.isSleeping||(d=b._positionDampen/g.totalContacts,g.positionImpulse.x+=v.x*u*d,g.positionImpulse.y+=v.y*u*d);l.isStatic||l.isSleeping||(d=b._positionDampen/l.totalContacts,l.positionImpulse.x-=v.x*u*d,l.positionImpulse.y-=v.y*u*d)}};b.postSolvePosition=function(a){for(var d=0;d<a.length;d++){var n=a[d];
n.totalContacts=0;if(0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var h=0;h<n.parts.length;h++){var w=n.parts[h];l.translate(w.vertices,n.positionImpulse);k.update(w.bounds,w.vertices,n.velocity);w.position.x+=n.positionImpulse.x;w.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x;n.positionPrev.y+=n.positionImpulse.y;0>e.dot(n.positionImpulse,n.velocity)?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=b._positionWarming,n.positionImpulse.y*=b._positionWarming)}}};
b.preSolveVelocity=function(a){var b,k,d,h,g,l,v,u,r,t,m=e._temp[0],z=e._temp[1];for(b=0;b<a.length;b++)if(d=a[b],d.isActive&&!d.isSensor)for(h=d.activeContacts,k=d.collision,d=k.parentA,g=k.parentB,l=k.normal,v=k.tangent,k=0;k<h.length;k++)if(u=h[k],r=u.vertex,t=u.normalImpulse,u=u.tangentImpulse,0!==t||0!==u)m.x=l.x*t+v.x*u,m.y=l.y*t+v.y*u,d.isStatic||d.isSleeping||(t=e.sub(r,d.position,z),d.positionPrev.x+=m.x*d.inverseMass,d.positionPrev.y+=m.y*d.inverseMass,d.anglePrev+=e.cross(t,m)*d.inverseInertia),
g.isStatic||g.isSleeping||(t=e.sub(r,g.position,z),g.positionPrev.x-=m.x*g.inverseMass,g.positionPrev.y-=m.y*g.inverseMass,g.anglePrev-=e.cross(t,m)*g.inverseInertia)};b.solveVelocity=function(a,k){for(var d=k*k,l=e._temp[0],q=e._temp[1],g=e._temp[2],y=e._temp[3],v=e._temp[4],u=e._temp[5],r=0;r<a.length;r++){var t=a[r];if(t.isActive&&!t.isSensor){var m=t.collision,z=m.parentA,x=m.parentB,D=m.normal,m=m.tangent,E=t.activeContacts,F=1/E.length;z.velocity.x=z.position.x-z.positionPrev.x;z.velocity.y=
z.position.y-z.positionPrev.y;x.velocity.x=x.position.x-x.positionPrev.x;x.velocity.y=x.position.y-x.positionPrev.y;z.angularVelocity=z.angle-z.anglePrev;x.angularVelocity=x.angle-x.anglePrev;for(var A=0;A<E.length;A++){var B=E[A],C=B.vertex,L=e.sub(C,z.position,q),C=e.sub(C,x.position,g),H=e.add(z.velocity,e.mult(e.perp(L),z.angularVelocity),y),J=e.add(x.velocity,e.mult(e.perp(C),x.angularVelocity),v),H=e.sub(H,J,u),I=e.dot(D,H),M=e.dot(m,H),K=Math.abs(M),O=h.sign(M),H=(1+t.restitution)*I,Q=h.clamp(t.separation+
I,0,1)*b._frictionNormalMultiplier,J=M,N=Infinity;K>t.friction*t.frictionStatic*Q*d&&(N=K,J=h.clamp(t.friction*O*d,-N,N));K=e.cross(L,D);O=e.cross(C,D);K=F/(z.inverseMass+x.inverseMass+z.inverseInertia*K*K+x.inverseInertia*O*O);H*=K;J*=K;0>I&&I*I>b._restingThresh*d?B.normalImpulse=0:(I=B.normalImpulse,B.normalImpulse=Math.min(B.normalImpulse+H,0),H=B.normalImpulse-I);M*M>b._restingThreshTangent*d?B.tangentImpulse=0:(I=B.tangentImpulse,B.tangentImpulse=h.clamp(B.tangentImpulse+J,-N,N),J=B.tangentImpulse-
I);l.x=D.x*H+m.x*J;l.y=D.y*H+m.y*J;z.isStatic||z.isSleeping||(z.positionPrev.x+=l.x*z.inverseMass,z.positionPrev.y+=l.y*z.inverseMass,z.anglePrev+=e.cross(L,l)*z.inverseInertia);x.isStatic||x.isSleeping||(x.positionPrev.x-=l.x*x.inverseMass,x.positionPrev.y-=l.y*x.inverseMass,x.anglePrev-=e.cross(C,l)*x.inverseInertia)}}}}})()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=
a("../geometry/Vector");(function(){b.collides=function(b,k,h){var n,g;n=!1;h?(g=b.parent,n=k.parent,g=g.speed*g.speed+g.angularSpeed*g.angularSpeed+n.speed*n.speed+n.angularSpeed*n.angularSpeed,n=h&&h.collided&&.2>g,g=h):g={collided:!1,bodyA:b,bodyB:k};if(h&&n){if(n=g.axisBody,h=a(n.vertices,(n===b?k:b).vertices,[n.axes[h.axisNumber]]),g.reused=!0,0>=h.overlap)return g.collided=!1,g}else{h=a(b.vertices,k.vertices,b.axes);if(0>=h.overlap)return g.collided=!1,g;n=a(k.vertices,b.vertices,k.axes);if(0>=
n.overlap)return g.collided=!1,g;h.overlap<n.overlap?g.axisBody=b:(h=n,g.axisBody=k);g.axisNumber=h.axisNumber}g.bodyA=b.id<k.id?b:k;g.bodyB=b.id<k.id?k:b;g.collided=!0;g.normal=h.axis;g.depth=h.overlap;g.parentA=g.bodyA.parent;g.parentB=g.bodyB.parent;b=g.bodyA;k=g.bodyB;0<e.dot(g.normal,e.sub(k.position,b.position))&&(g.normal=e.neg(g.normal));g.tangent=e.perp(g.normal);g.penetration={x:g.normal.x*g.depth,y:g.normal.y*g.depth};h=d(b,k,g.normal);n=g.supports||[];n.length=0;l.contains(b.vertices,
h[0])&&n.push(h[0]);l.contains(b.vertices,h[1])&&n.push(h[1]);2>n.length&&(b=d(k,b,e.neg(g.normal)),l.contains(k.vertices,b[0])&&n.push(b[0]),2>n.length&&l.contains(k.vertices,b[1])&&n.push(b[1]));1>n.length&&(n=[h[0]]);g.supports=n;return g};var a=function(a,b,d){for(var h=e._temp[0],g=e._temp[1],n={overlap:Number.MAX_VALUE},v,l,r=0;r<d.length;r++){l=d[r];k(h,a,l);k(g,b,l);v=Math.min(h.max-g.min,g.max-h.min);if(0>=v){n.overlap=v;break}v<n.overlap&&(n.overlap=v,n.axis=l,n.axisNumber=r)}return n},
k=function(a,b,k){for(var d=e.dot(b[0],k),g=d,h=1;h<b.length;h+=1){var n=e.dot(b[h],k);n>g?g=n:n<d&&(d=n)}a.min=d;a.max=g},d=function(a,b,k){var d=Number.MAX_VALUE,g=e._temp[0];b=b.vertices;a=a.position;var h,n,l,r;for(r=0;r<b.length;r++)n=b[r],g.x=n.x-a.x,g.y=n.y-a.y,h=-e.dot(k,g),h<d&&(d=h,l=n);n=b[0<=l.index-1?l.index-1:b.length-1];g.x=n.x-a.x;g.y=n.y-a.y;d=-e.dot(k,g);r=n;n=b[(l.index+1)%b.length];g.x=n.x-a.x;g.y=n.y-a.y;h=-e.dot(k,g);h<d&&(r=n);return[l,r]}})()},{"../geometry/Vector":28,"../geometry/Vertices":29}],
12:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=a("../geometry/Vector"),h=a("../core/Sleeping"),k=a("../geometry/Bounds"),t=a("../geometry/Axes"),q=a("../core/Common");(function(){b.create=function(a){a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0});a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var b=a.bodyA?e.add(a.bodyA.position,a.pointA):a.pointA,k=a.bodyB?e.add(a.bodyB.position,a.pointB):a.pointB,b=e.magnitude(e.sub(b,k));a.length=a.length||b||1E-6;a.render=q.extend({visible:!0,
lineWidth:2,strokeStyle:"#666"},a.render);a.id=a.id||q.nextId();a.label=a.label||"Constraint";a.type="constraint";a.stiffness=a.stiffness||1;a.angularStiffness=a.angularStiffness||0;a.angleA=a.bodyA?a.bodyA.angle:a.angleA;a.angleB=a.bodyB?a.bodyB.angle:a.angleB;return a};b.solveAll=function(a,e){for(var k=0;k<a.length;k++)b.solve(a[k],e)};b.solve=function(a,b){var k=a.bodyA,g=a.bodyB,d=a.pointA,h=a.pointB;k&&!k.isStatic&&(a.pointA=e.rotate(d,k.angle-a.angleA),a.angleA=k.angle);g&&!g.isStatic&&(a.pointB=
e.rotate(h,g.angle-a.angleB),a.angleB=g.angle);var n=d,l=h;k&&(n=e.add(k.position,d));g&&(l=e.add(g.position,h));if(n&&l){var h=e.sub(n,l),q=e.magnitude(h);0===q&&(q=1E-6);var t=(q-a.length)/q,d=e.div(h,q),h=e.mult(h,.5*t*a.stiffness*b*b);if(!(Math.abs(1-q/a.length)<.001*b)){var p,m;k&&!k.isStatic?(p={x:n.x-k.position.x+h.x,y:n.y-k.position.y+h.y},k.velocity.x=k.position.x-k.positionPrev.x,k.velocity.y=k.position.y-k.positionPrev.y,k.angularVelocity=k.angle-k.anglePrev,n=e.add(k.velocity,e.mult(e.perp(p),
k.angularVelocity)),q=e.dot(p,d),q=k.inverseMass+k.inverseInertia*q*q):(n={x:0,y:0},q=k?k.inverseMass:0);g&&!g.isStatic?(m={x:l.x-g.position.x-h.x,y:l.y-g.position.y-h.y},g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,l=e.add(g.velocity,e.mult(e.perp(m),g.angularVelocity)),t=e.dot(m,d),t=g.inverseMass+g.inverseInertia*t*t):(l={x:0,y:0},t=g?g.inverseMass:0);l=e.sub(l,n);l=e.dot(d,l)/(q+t);0<l&&(l=0);d={x:d.x*l,y:d.y*l};k&&
!k.isStatic&&(p=e.cross(p,d)*k.inverseInertia*(1-a.angularStiffness),k.constraintImpulse.x-=h.x,k.constraintImpulse.y-=h.y,k.constraintImpulse.angle+=p,k.position.x-=h.x,k.position.y-=h.y,k.angle+=p);g&&!g.isStatic&&(p=e.cross(m,d)*g.inverseInertia*(1-a.angularStiffness),g.constraintImpulse.x+=h.x,g.constraintImpulse.y+=h.y,g.constraintImpulse.angle-=p,g.position.x+=h.x,g.position.y+=h.y,g.angle-=p)}}};b.postSolveAll=function(a){for(var b=0;b<a.length;b++){var d=a[b],g=d.constraintImpulse;if(0!==
g.x||0!==g.y||0!==g.angle){h.set(d,!1);for(var n=0;n<d.parts.length;n++){var v=d.parts[n];l.translate(v.vertices,g);0<n&&(v.position.x+=g.x,v.position.y+=g.y);0!==g.angle&&(l.rotate(v.vertices,g.angle,d.position),t.rotate(v.axes,g.angle),0<n&&e.rotateAbout(v.position,g.angle,d.position,v.position));k.update(v.bounds,v.vertices,d.velocity)}g.angle=0;g.x=0;g.y=0}}}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],
13:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=a("../core/Sleeping"),h=a("../core/Mouse"),k=a("../core/Events"),t=a("../collision/Detector"),q=a("./Constraint"),n=a("../body/Composite"),p=a("../core/Common"),w=a("../geometry/Bounds");(function(){b.create=function(a,e){var g=(a?a.mouse:null)||(e?e.mouse:null);g||(a&&a.render&&a.render.canvas?g=h.create(a.render.canvas):e&&e.element?g=h.create(e.element):(g=h.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));
var d=q.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),l=p.extend({type:"mouseConstraint",mouse:g,element:null,body:null,constraint:d,collisionFilter:{category:1,mask:4294967295,group:0}},e);k.on(a,"tick",function(){var e=n.allBodies(a.world);b.update(l,e);var e=l.mouse,g=e.sourceEvents;g.mousemove&&k.trigger(l,"mousemove",{mouse:e});g.mousedown&&k.trigger(l,"mousedown",{mouse:e});g.mouseup&&
k.trigger(l,"mouseup",{mouse:e});h.clearSourceEvents(e)});return l};b.update=function(a,b){var g=a.mouse,d=a.constraint,h=a.body;if(0===g.button)if(d.bodyB)e.set(d.bodyB,!1),d.pointA=g.position;else for(var n=0;n<b.length;n++){if(h=b[n],w.contains(h.bounds,g.position)&&t.canCollide(h.collisionFilter,a.collisionFilter))for(var q=1<h.parts.length?1:0;q<h.parts.length;q++)if(l.contains(h.parts[q].vertices,g.position)){d.pointA=g.position;d.bodyB=a.body=h;d.pointB={x:g.position.x-h.position.x,y:g.position.y-
h.position.y};d.angleB=h.angle;e.set(h,!1);k.trigger(a,"startdrag",{mouse:g,body:h});break}}else d.bodyB=a.body=null,d.pointB=null,h&&k.trigger(a,"enddrag",{mouse:g,body:h})}})()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(a,d,m){var b={};d.exports=b;(function(){b._nextId=0;b._seed=0;b.extend=function(a,d){var e,h;"boolean"===typeof d?
(e=2,h=d):(e=1,h=!0);e=Array.prototype.slice.call(arguments,e);for(var l=0;l<e.length;l++){var n=e[l];if(n)for(var p in n)h&&n[p]&&n[p].constructor===Object?a[p]&&a[p].constructor!==Object?a[p]=n[p]:(a[p]=a[p]||{},b.extend(a[p],h,n[p])):a[p]=n[p]}return a};b.clone=function(a,d){return b.extend({},d,a)};b.keys=function(a){if(Object.keys)return Object.keys(a);var b=[],e;for(e in a)b.push(e);return b};b.values=function(a){var b=[];if(Object.keys){for(var e=Object.keys(a),d=0;d<e.length;d++)b.push(a[e[d]]);
return b}for(e in a)b.push(a[e]);return b};b.get=function(a,b,k,d){b=b.split(".").slice(k,d);for(k=0;k<b.length;k+=1)a=a[b[k]];return a};b.set=function(a,d,k,l,q){l=d.split(".").slice(l,q);return b.get(a,d,0,-1)[l[l.length-1]]=k};b.shadeColor=function(a,b){var e=parseInt(a.slice(1),16),d=Math.round(2.55*b),h=(e>>16)+d,n=(e>>8&255)+d,e=(e&255)+d;return"#"+(16777216+65536*(255>h?1>h?0:h:255)+256*(255>n?1>n?0:n:255)+(255>e?1>e?0:e:255)).toString(16).slice(1)};b.shuffle=function(a){for(var e=a.length-
1;0<e;e--){var k=Math.floor(b.random()*(e+1)),d=a[e];a[e]=a[k];a[k]=d}return a};b.choose=function(a){return a[Math.floor(b.random()*a.length)]};b.isElement=function(a){try{return a instanceof HTMLElement}catch(h){return"object"===typeof a&&1===a.nodeType&&"object"===typeof a.style&&"object"===typeof a.ownerDocument}};b.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.isFunction=function(a){return"function"===typeof a};b.isPlainObject=function(a){return"object"===typeof a&&
a.constructor===Object};b.isString=function(a){return"[object String]"===toString.call(a)};b.clamp=function(a,b,k){return a<b?b:a>k?k:a};b.sign=function(a){return 0>a?-1:1};b.now=function(){var a=window.performance||{};a.now=function(){return a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow||function(){return+new Date}}();return a.now()};b.random=function(a,d){a="undefined"!==typeof a?a:0;b._seed=(9301*b._seed+49297)%233280;return a+b._seed/233280*(("undefined"!==typeof d?d:1)-a)};b.colorToNumber=function(a){a=
a.replace("#","");3==a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2));return parseInt(a,16)};b.logLevel=1;b.log=function(){console&&0<b.logLevel&&3>=b.logLevel&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.info=function(){console&&0<b.logLevel&&2>=b.logLevel&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.warn=function(){console&&0<b.logLevel&&3>=b.logLevel&&console.warn.apply(console,
["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.nextId=function(){return b._nextId++};b.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var e=0;e<a.length;e++)if(a[e]===b)return e;return-1};b.map=function(a,b){if(a.map)return a.map(b);for(var e=[],d=0;d<a.length;d+=1)e.push(b(a[d]));return e};b.topologicalSort=function(b){var e=[],d=[],l=[],q;for(q in b)d[q]||l[q]||a(q,d,l,b,e);return e};var a=function(b,d,k,l,q){var e=l[b]||[];k[b]=!0;for(var h=0;h<e.length;h+=1){var t=
e[h];k[t]||d[t]||a(t,d,k,l,q)}k[b]=!1;d[b]=!0;q.push(b)};b.chain=function(){for(var a=Array.prototype.slice.call(arguments),b=[],d=0;d<a.length;d+=1){var l=a[d];l._chained?b.push.apply(b,l._chained):b.push(l)}a=function(){for(var a,e=0;e<b.length;e+=1){var d=b[e].apply(a,arguments);"undefined"!==typeof d&&(a=d)}return a};a._chained=b;return a};b.chainPathBefore=function(a,d,k){return b.set(a,d,b.chain(k,b.get(a,d)))};b.chainPathAfter=function(a,d,k){return b.set(a,d,b.chain(b.get(a,d),k))}})()},{}],
15:[function(a,d,m){var b={};d.exports=b;var l=a("../body/World"),e=a("./Sleeping"),h=a("../collision/Resolver"),k=a("../render/Render"),t=a("../collision/Pairs");a("./Metrics");var q=a("../collision/Grid"),n=a("./Events"),p=a("../body/Composite"),w=a("../constraint/Constraint"),g=a("./Common"),y=a("../body/Body");(function(){b.create=function(a,b){b=g.isElement(a)?b:a;a=g.isElement(a)?a:null;b=b||{};(a||b.render)&&g.warn("Engine.create: engine.render is deprecated (see docs)");var d=g.extend({positionIterations:6,
velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],timing:{timestamp:0,timeScale:1},broadphase:{controller:q}},b);if(a||d.render)d.render=g.extend({element:a,controller:k},d.render);d.render&&d.render.controller&&(d.render=d.render.controller.create(d.render));d.render&&(d.render.engine=d);d.world=b.world||l.create(d.world);d.pairs=t.create();d.broadphase=d.broadphase.controller.create(d.broadphase);d.metrics=d.metrics||{extended:!1};return d};b.update=function(a,b,d){b=b||1E3/
60;d=d||1;var g=a.world,k=a.timing,l=a.broadphase,u;k.timestamp+=b*k.timeScale;var v={timestamp:k.timestamp};n.trigger(a,"beforeUpdate",v);var q=p.allBodies(g);u=p.allConstraints(g);a.enableSleeping&&e.update(q,k.timeScale);var r=g.gravity,m="undefined"!==typeof r.scale?r.scale:.001;if((0!==r.x||0!==r.y)&&0!==m)for(var B=0;B<q.length;B++){var C=q[B];C.isStatic||C.isSleeping||(C.force.y+=C.mass*r.y*m,C.force.x+=C.mass*r.x*m)}r=k.timeScale;for(m=0;m<q.length;m++)B=q[m],B.isStatic||B.isSleeping||y.update(B,
b,r,d);for(d=0;d<a.constraintIterations;d++)w.solveAll(u,k.timeScale);w.postSolveAll(q);l.controller?(g.isModified&&l.controller.clear(l),l.controller.update(l,q,a,g.isModified),u=l.pairsList):u=q;g.isModified&&p.setModified(g,!1,!1,!0);l=l.detector(u,a);g=a.pairs;u=k.timestamp;t.update(g,l,u);t.removeOld(g,u);a.enableSleeping&&e.afterCollisions(g.list,k.timeScale);0<g.collisionStart.length&&n.trigger(a,"collisionStart",{pairs:g.collisionStart});h.preSolvePosition(g.list);for(d=0;d<a.positionIterations;d++)h.solvePosition(g.list,
k.timeScale);h.postSolvePosition(q);h.preSolveVelocity(g.list);for(d=0;d<a.velocityIterations;d++)h.solveVelocity(g.list,k.timeScale);0<g.collisionActive.length&&n.trigger(a,"collisionActive",{pairs:g.collisionActive});0<g.collisionEnd.length&&n.trigger(a,"collisionEnd",{pairs:g.collisionEnd});for(k=0;k<q.length;k++)g=q[k],g.force.x=0,g.force.y=0,g.torque=0;n.trigger(a,"afterUpdate",v);return a};b.merge=function(a,d){g.extend(a,d);if(d.world){a.world=d.world;b.clear(a);for(var k=p.allBodies(a.world),
h=0;h<k.length;h++){var l=k[h];e.set(l,!1);l.id=g.nextId()}}};b.clear=function(a){var b=a.world;t.clear(a.pairs);var d=a.broadphase;d.controller&&(b=p.allBodies(b),d.controller.clear(d),d.controller.update(d,b,a,!0))}})()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(a,d,m){var b={};d.exports=
b;var l=a("./Common");(function(){b.on=function(a,b,d){b=b.split(" ");for(var e,k=0;k<b.length;k++)e=b[k],a.events=a.events||{},a.events[e]=a.events[e]||[],a.events[e].push(d);return d};b.off=function(a,b,d){if(b){"function"===typeof b&&(d=b,b=l.keys(a.events).join(" "));b=b.split(" ");for(var e=0;e<b.length;e++){var k=a.events[b[e]],h=[];if(d&&k)for(var p=0;p<k.length;p++)k[p]!==d&&h.push(k[p]);a.events[b[e]]=h}}else a.events={}};b.trigger=function(a,b,d){var e,k,h;if(a.events){d||(d={});b=b.split(" ");
for(var p=0;p<b.length;p++)if(e=b[p],k=a.events[e])for(h=l.clone(d,!1),h.name=e,h.source=a,e=0;e<k.length;e++)k[e].apply(a,[h])}}})()},{"./Common":14}],17:[function(a,d,m){var b={};d.exports=b;var l=a("./Plugin"),e=a("./Common");(function(){b.name="matter-js";b.version="0.11.0";b.uses=[];b.used=[];b.use=function(){l.use(b,Array.prototype.slice.call(arguments))};b.before=function(a,d){a=a.replace(/^Matter./,"");return e.chainPathBefore(b,a,d)};b.after=function(a,d){a=a.replace(/^Matter./,"");return e.chainPathAfter(b,
a,d)}})()},{"./Common":14,"./Plugin":20}],18:[function(a,d,m){},{"../body/Composite":2,"./Common":14}],19:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Common");(function(){b.create=function(d){var e={};d||l.log("Mouse.create: element was undefined, defaulting to document.body","warn");e.element=d||document.body;e.absolute={x:0,y:0};e.position={x:0,y:0};e.mousedownPosition={x:0,y:0};e.mouseupPosition={x:0,y:0};e.offset={x:0,y:0};e.scale={x:1,y:1};e.wheelDelta=0;e.button=-1;e.pixelRatio=e.element.getAttribute("data-pixel-ratio")||
1;e.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null};e.mousemove=function(b){var d=a(b,e.element,e.pixelRatio);b.changedTouches&&(e.button=0,b.preventDefault());e.absolute.x=d.x;e.absolute.y=d.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.sourceEvents.mousemove=b};e.mousedown=function(b){var d=a(b,e.element,e.pixelRatio);b.changedTouches?(e.button=0,b.preventDefault()):e.button=b.button;e.absolute.x=d.x;e.absolute.y=d.y;
e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.mousedownPosition.x=e.position.x;e.mousedownPosition.y=e.position.y;e.sourceEvents.mousedown=b};e.mouseup=function(b){var d=a(b,e.element,e.pixelRatio);b.changedTouches&&b.preventDefault();e.button=-1;e.absolute.x=d.x;e.absolute.y=d.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.mouseupPosition.x=e.position.x;e.mouseupPosition.y=e.position.y;e.sourceEvents.mouseup=
b};e.mousewheel=function(a){e.wheelDelta=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));a.preventDefault()};b.setElement(e,e.element);return e};b.setElement=function(a,b){a.element=b;b.addEventListener("mousemove",a.mousemove);b.addEventListener("mousedown",a.mousedown);b.addEventListener("mouseup",a.mouseup);b.addEventListener("mousewheel",a.mousewheel);b.addEventListener("DOMMouseScroll",a.mousewheel);b.addEventListener("touchmove",a.mousemove);b.addEventListener("touchstart",a.mousedown);b.addEventListener("touchend",
a.mouseup)};b.clearSourceEvents=function(a){a.sourceEvents.mousemove=null;a.sourceEvents.mousedown=null;a.sourceEvents.mouseup=null;a.sourceEvents.mousewheel=null;a.wheelDelta=0};b.setOffset=function(a,b){a.offset.x=b.x;a.offset.y=b.y;a.position.x=a.absolute.x*a.scale.x+a.offset.x;a.position.y=a.absolute.y*a.scale.y+a.offset.y};b.setScale=function(a,b){a.scale.x=b.x;a.scale.y=b.y;a.position.x=a.absolute.x*a.scale.x+a.offset.x;a.position.y=a.absolute.y*a.scale.y+a.offset.y};var a=function(a,b,d){var e=
b.getBoundingClientRect(),k=document.documentElement||document.body.parentNode||document.body,l=void 0!==window.pageXOffset?window.pageXOffset:k.scrollLeft,k=void 0!==window.pageYOffset?window.pageYOffset:k.scrollTop,h=a.changedTouches;h?(l=h[0].pageX-e.left-l,a=h[0].pageY-e.top-k):(l=a.pageX-e.left-l,a=a.pageY-e.top-k);return{x:l/(b.clientWidth/(b.width||b.clientWidth)*d),y:a/(b.clientHeight/(b.height||b.clientHeight)*d)}}})()},{"../core/Common":14}],20:[function(a,d,m){var b={};d.exports=b;var l=
a("./Common");(function(){b._registry={};b.register=function(a){b.isPlugin(a)||l.warn("Plugin.register:",b.toString(a),"does not implement all required fields.");if(a.name in b._registry){var d=b._registry[a.name],e=b.versionParse(a.version).number,m=b.versionParse(d.version).number;e>m?(l.warn("Plugin.register:",b.toString(d),"was upgraded to",b.toString(a)),b._registry[a.name]=a):e<m?l.warn("Plugin.register:",b.toString(d),"can not be downgraded to",b.toString(a)):a!==d&&l.warn("Plugin.register:",
b.toString(a),"is already registered to different plugin object")}else b._registry[a.name]=a;return a};b.resolve=function(a){return b._registry[b.dependencyParse(a).name]};b.toString=function(a){return"string"===typeof a?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")};b.isPlugin=function(a){return a&&a.name&&a.version&&a.install};b.isUsed=function(a,b){return-1<a.used.indexOf(b)};b.isFor=function(a,d){var e=a["for"]&&b.dependencyParse(a["for"]);return!a["for"]||d.name===e.name&&b.versionSatisfies(d.version,
e.range)};b.use=function(a,d){a.uses=(a.uses||[]).concat(d||[]);if(0===a.uses.length)l.warn("Plugin.use:",b.toString(a),"does not specify any dependencies to install.");else{for(var e=b.dependencies(a),e=l.topologicalSort(e),h=[],q=0;q<e.length;q+=1)if(e[q]!==a.name){var n=b.resolve(e[q]);n?b.isUsed(a,n.name)||(b.isFor(n,a)||(l.warn("Plugin.use:",b.toString(n),"is for",n["for"],"but installed on",b.toString(a)+"."),n._warned=!0),n.install?n.install(a):(l.warn("Plugin.use:",b.toString(n),"does not specify an install function."),
n._warned=!0),n._warned?(h.push("\ud83d\udd36 "+b.toString(n)),delete n._warned):h.push("\u2705 "+b.toString(n)),a.used.push(n.name)):h.push("\u274c "+e[q])}0<h.length&&l.info(h.join("  "))}};b.dependencies=function(a,d){var e=b.dependencyParse(a),h=e.name;d=d||{};if(!(h in d)){a=b.resolve(a)||a;d[h]=l.map(a.uses||[],function(d){b.isPlugin(d)&&b.register(d);var k=b.dependencyParse(d),h=b.resolve(d);h&&!b.versionSatisfies(h.version,k.range)?(l.warn("Plugin.dependencies:",b.toString(h),"does not satisfy",
b.toString(k),"used by",b.toString(e)+"."),h._warned=!0,a._warned=!0):h||(l.warn("Plugin.dependencies:",b.toString(d),"used by",b.toString(e),"could not be resolved."),a._warned=!0);return k.name});for(var q=0;q<d[h].length;q+=1)b.dependencies(d[h][q],d);return d}};b.dependencyParse=function(a){return l.isString(a)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}):
{name:a.name,range:a.range||a.version}};b.versionParse=function(a){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var b=a.split("-");a=b[0];var d=isNaN(Number(a[0])),e=d?a.substr(1):a,q=l.map(e.split("."),function(a){return Number(a)});return{isRange:d,version:e,range:a,operator:d?a[0]:"",parts:q,prerelease:b[1],number:1E8*q[0]+1E4*q[1]+q[2]}};b.versionSatisfies=function(a,d){d=d||"*";var e=b.versionParse(d),l=e.parts,h=b.versionParse(a),
n=h.parts;if(e.isRange){if("*"===e.operator||"*"===a)return!0;if("~"===e.operator)return n[0]===l[0]&&n[1]===l[1]&&n[2]>=l[2];if("^"===e.operator)return 0<l[0]?n[0]===l[0]&&h.number>=e.number:0<l[1]?n[1]===l[1]&&n[2]>=l[2]:n[2]===l[2]}return a===d||"*"===a}})()},{"./Common":14}],21:[function(a,d,m){var b={};d.exports=b;var l=a("./Events"),e=a("./Engine"),h=a("./Common");(function(){var a,d;"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);if(!a){var q;a=function(a){q=setTimeout(function(){a(h.now())},1E3/60)};d=function(){clearTimeout(q)}}b.create=function(a){a=h.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},a);a.delta=a.delta||1E3/a.fps;a.deltaMin=a.deltaMin||
1E3/a.fps;a.deltaMax=a.deltaMax||1E3/(.5*a.fps);a.fps=1E3/a.delta;return a};b.run=function(d,e){"undefined"!==typeof d.positionIterations&&(e=d,d=b.create());(function g(l){d.frameRequestId=a(g);l&&d.enabled&&b.tick(d,e,l)})();return d};b.tick=function(a,b,d){var g=b.timing,k=1,h,n={timestamp:g.timestamp};l.trigger(a,"beforeTick",n);l.trigger(b,"beforeTick",n);a.isFixed?h=a.delta:(h=d-a.timePrev||a.delta,a.timePrev=d,a.deltaHistory.push(h),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),h=
Math.min.apply(null,a.deltaHistory),h=h<a.deltaMin?a.deltaMin:h,h=h>a.deltaMax?a.deltaMax:h,k=h/a.delta,a.delta=h);0!==a.timeScalePrev&&(k*=g.timeScale/a.timeScalePrev);0===g.timeScale&&(k=0);a.timeScalePrev=g.timeScale;a.correction=k;a.frameCounter+=1;1E3<=d-a.counterTimestamp&&(a.fps=(d-a.counterTimestamp)/1E3*a.frameCounter,a.counterTimestamp=d,a.frameCounter=0);l.trigger(a,"tick",n);l.trigger(b,"tick",n);b.world.isModified&&b.render&&b.render.controller&&b.render.controller.clear&&b.render.controller.clear(b.render);
l.trigger(a,"beforeUpdate",n);e.update(b,h,k);l.trigger(a,"afterUpdate",n);b.render&&b.render.controller&&(l.trigger(a,"beforeRender",n),l.trigger(b,"beforeRender",n),b.render.controller.world(b.render),l.trigger(a,"afterRender",n),l.trigger(b,"afterRender",n));l.trigger(a,"afterTick",n);l.trigger(b,"afterTick",n)};b.stop=function(a){d(a.frameRequestId)};b.start=function(a,d){b.run(a,d)}})()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(a,d,m){var b={};d.exports=b;var l=a("./Events");
(function(){b._motionWakeThreshold=.18;b._motionSleepThreshold=.08;b._minBias=.9;b.update=function(a,d){for(var e=d*d*d,l=0;l<a.length;l++){var h=a[l],n=h.speed*h.speed+h.angularSpeed*h.angularSpeed;0!==h.force.x||0!==h.force.y?b.set(h,!1):(h.motion=b._minBias*Math.min(h.motion,n)+(1-b._minBias)*Math.max(h.motion,n),0<h.sleepThreshold&&h.motion<b._motionSleepThreshold*e?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold&&b.set(h,!0)):0<h.sleepCounter&&--h.sleepCounter)}};b.afterCollisions=function(a,
d){for(var e=d*d*d,l=0;l<a.length;l++){var h=a[l];if(h.isActive){var n=h.collision,h=n.bodyA.parent,m=n.bodyB.parent;h.isSleeping&&m.isSleeping||h.isStatic||m.isStatic||!h.isSleeping&&!m.isSleeping||(n=h.isSleeping&&!h.isStatic?h:m,h=n===h?m:h,!n.isStatic&&h.motion>b._motionWakeThreshold*e&&b.set(n,!1))}}};b.set=function(a,b){var d=a.isSleeping;b?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,
a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,d||l.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,d&&l.trigger(a,"sleepEnd"))}})()},{"./Events":16}],23:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),e=a("../core/Common"),h=a("../body/Body"),k=a("../geometry/Bounds"),t=a("../geometry/Vector");(function(){b.rectangle=function(a,b,d,k,g){g=g||{};a={label:"Rectangle Body",position:{x:a,y:b},vertices:l.fromPath("L 0 0 L "+d+" 0 L "+d+" "+k+" L 0 "+k)};g.chamfer&&
(b=g.chamfer,a.vertices=l.chamfer(a.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete g.chamfer);return h.create(e.extend({},a,g))};b.trapezoid=function(a,b,d,k,g,m){m=m||{};g*=.5;var n=d*g;d=n+(1-2*g)*d;var u=d+n;a={label:"Trapezoid Body",position:{x:a,y:b},vertices:l.fromPath(.5>g?"L 0 0 L "+n+" "+-k+" L "+d+" "+-k+" L "+u+" 0":"L 0 0 L "+d+" "+-k+" L "+u+" 0")};m.chamfer&&(b=m.chamfer,a.vertices=l.chamfer(a.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete m.chamfer);return h.create(e.extend({},
a,m))};b.circle=function(a,d,l,k,g){k=k||{};var h={label:"Circle Body",circleRadius:l};g=Math.ceil(Math.max(10,Math.min(g||25,l)));1===g%2&&(g+=1);return b.polygon(a,d,g,l,e.extend({},h,k))};b.polygon=function(a,d,k,m,g){g=g||{};if(3>k)return b.circle(a,d,m,g);for(var n=2*Math.PI/k,v="",u=.5*n,r=0;r<k;r+=1)var p=u+r*n,q=Math.sin(p)*m,v=v+("L "+(Math.cos(p)*m).toFixed(3)+" "+q.toFixed(3)+" ");a={label:"Polygon Body",position:{x:a,y:d},vertices:l.fromPath(v)};g.chamfer&&(d=g.chamfer,a.vertices=l.chamfer(a.vertices,
d.radius,d.quality,d.qualityMin,d.qualityMax),delete g.chamfer);return h.create(e.extend({},a,g))};b.fromVertices=function(a,b,d,m,g,y,v){var n,r,q,p;m=m||{};n=[];g="undefined"!==typeof g?g:!1;y="undefined"!==typeof y?y:.01;v="undefined"!==typeof v?v:10;window.decomp||e.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.");e.isArray(d[0])||(d=[d]);for(p=0;p<d.length;p+=1)if(q=d[p],(r=l.isConvex(q))||!window.decomp)q=r?l.clockwiseSort(q):l.hull(q),
n.push({position:{x:a,y:b},vertices:q});else{var w=new decomp.Polygon;for(r=0;r<q.length;r++)w.vertices.push([q[r].x,q[r].y]);w.makeCCW();!1!==y&&w.removeCollinearPoints(y);w=w.quickDecomp();for(r=0;r<w.length;r++){var x=w[r],D=[];for(q=0;q<x.vertices.length;q++)D.push({x:x.vertices[q][0],y:x.vertices[q][1]});0<v&&l.area(D)<v||n.push({position:l.centre(D),vertices:D})}}for(r=0;r<n.length;r++)n[r]=h.create(e.extend(n[r],m));if(g)for(r=0;r<n.length;r++)for(y=n[r],q=r+1;q<n.length;q++)if(v=n[q],k.overlaps(y.bounds,
v.bounds))for(p=y.vertices,w=v.vertices,d=0;d<y.vertices.length;d++)for(g=0;g<v.vertices.length;g++)x=t.magnitudeSquared(t.sub(p[(d+1)%p.length],w[g])),D=t.magnitudeSquared(t.sub(p[d],w[(g+1)%w.length])),5>x&&5>D&&(p[d].isInternal=!0,w[g].isInternal=!0);return 1<n.length?(m=h.create(e.extend({parts:n.slice(0)},m)),h.setPosition(m,{x:a,y:b}),m):n[0]}})()},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(a,d,m){var b={};d.exports=
b;var l=a("../body/Composite"),e=a("../constraint/Constraint"),h=a("../core/Common"),k=a("../body/Body"),t=a("./Bodies");(function(){b.stack=function(a,b,d,e,g,h,m){for(var n=l.create({label:"Stack"}),v=a,q,p=0,y=0;y<e;y++){for(var t=0,w=0;w<d;w++){var E=m(v,b,w,y,q,p);E?(v=E.bounds.max.y-E.bounds.min.y,q=E.bounds.max.x-E.bounds.min.x,v>t&&(t=v),k.translate(E,{x:.5*q,y:.5*v}),v=E.bounds.max.x+g,l.addBody(n,E),q=E,p+=1):v+=g}b+=t+h;v=a}return n};b.chain=function(a,b,d,k,g,m){for(var n=a.bodies,u=1;u<
n.length;u++){var r=n[u-1],q=n[u],r=h.extend({bodyA:r,pointA:{x:(r.bounds.max.x-r.bounds.min.x)*b,y:(r.bounds.max.y-r.bounds.min.y)*d},bodyB:q,pointB:{x:(q.bounds.max.x-q.bounds.min.x)*k,y:(q.bounds.max.y-q.bounds.min.y)*g}},m);l.addConstraint(a,e.create(r))}a.label+=" Chain";return a};b.mesh=function(a,b,d,k,g){var n=a.bodies,m,u,r,q;for(m=0;m<d;m++){for(u=1;u<b;u++)r=n[u-1+m*b],q=n[u+m*b],l.addConstraint(a,e.create(h.extend({bodyA:r,bodyB:q},g)));if(0<m)for(u=0;u<b;u++)r=n[u+(m-1)*b],q=n[u+m*b],
l.addConstraint(a,e.create(h.extend({bodyA:r,bodyB:q},g))),k&&0<u&&(r=n[u-1+(m-1)*b],l.addConstraint(a,e.create(h.extend({bodyA:r,bodyB:q},g)))),k&&u<b-1&&(r=n[u+1+(m-1)*b],l.addConstraint(a,e.create(h.extend({bodyA:r,bodyB:q},g))))}a.label+=" Mesh";return a};b.pyramid=function(a,d,e,l,g,h,m){return b.stack(a,d,e,l,g,h,function(b,d,h,n,v,q){var u=Math.min(l,Math.ceil(e/2));b=v?v.bounds.max.x-v.bounds.min.x:0;if(!(n>u||(n=u-n,u=e-1-n,h<n||h>u)))return 1===q&&k.translate(v,{x:(h+(1===e%2?1:-1))*b,y:0}),
m(a+(v?h*b:0)+h*g,d,h,n,v,q)})};b.newtonsCradle=function(a,b,d,k,g){for(var h=l.create({label:"Newtons Cradle"}),n=0;n<d;n++){var m=t.circle(a+1.9*n*k,b+g,k,{inertia:Infinity,restitution:1,friction:0,frictionAir:1E-4,slop:1}),r=e.create({pointA:{x:a+1.9*n*k,y:b},bodyB:m});l.addBody(h,m);l.addConstraint(h,r)}return h};b.car=function(a,b,d,h,g){var n=k.nextGroup(!0),m=.5*-d+-20,u=.5*d- -20,r=l.create({label:"Car"});d=t.trapezoid(a,b,d,h,.3,{collisionFilter:{group:n},friction:.01,chamfer:{radius:10}});
h=t.circle(a+m,b+0,g,{collisionFilter:{group:n},friction:.8,density:.01});a=t.circle(a+u,b+0,g,{collisionFilter:{group:n},friction:.8,density:.01});m=e.create({bodyA:d,pointA:{x:m,y:0},bodyB:h,stiffness:.2});u=e.create({bodyA:d,pointA:{x:u,y:0},bodyB:a,stiffness:.2});l.addBody(r,d);l.addBody(r,h);l.addBody(r,a);l.addConstraint(r,m);l.addConstraint(r,u);return r};b.softBody=function(a,d,e,l,g,k,m,u,r,G){r=h.extend({inertia:Infinity},r);G=h.extend({stiffness:.4},G);a=b.stack(a,d,e,l,g,k,function(a,
b){return t.circle(a,b,u,r)});b.mesh(a,e,l,m,G);a.label="Soft Body";return a}})()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),e=a("../core/Common");(function(){b.fromVertices=function(a){for(var b={},d=0;d<a.length;d++){var h=(d+1)%a.length,h=l.normalise({x:a[h].y-a[d].y,y:a[d].x-a[h].x}),n=0===h.y?Infinity:h.x/h.y,n=n.toFixed(3).toString();b[n]=h}return e.values(b)};
b.rotate=function(a,b){if(0!==b)for(var d=Math.cos(b),e=Math.sin(b),l=0;l<a.length;l++){var h=a[l],k;k=h.x*d-h.y*e;h.y=h.x*e+h.y*d;h.x=k}}})()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a){var d={min:{x:0,y:0},max:{x:0,y:0}};a&&b.update(d,a);return d};b.update=function(a,b,d){a.min.x=Infinity;a.max.x=-Infinity;a.min.y=Infinity;a.max.y=-Infinity;for(var e=0;e<b.length;e++){var h=b[e];h.x>a.max.x&&(a.max.x=h.x);h.x<a.min.x&&
(a.min.x=h.x);h.y>a.max.y&&(a.max.y=h.y);h.y<a.min.y&&(a.min.y=h.y)}d&&(0<d.x?a.max.x+=d.x:a.min.x+=d.x,0<d.y?a.max.y+=d.y:a.min.y+=d.y)};b.contains=function(a,b){return b.x>=a.min.x&&b.x<=a.max.x&&b.y>=a.min.y&&b.y<=a.max.y};b.overlaps=function(a,b){return a.min.x<=b.max.x&&a.max.x>=b.min.x&&a.max.y>=b.min.y&&a.min.y<=b.max.y};b.translate=function(a,b){a.min.x+=b.x;a.max.x+=b.x;a.min.y+=b.y;a.max.y+=b.y};b.shift=function(a,b){var d=a.max.x-a.min.x,e=a.max.y-a.min.y;a.min.x=b.x;a.max.x=b.x+d;a.min.y=
b.y;a.max.y=b.y+e}})()},{}],27:[function(a,d,m){var b={};d.exports=b;a("../geometry/Bounds");(function(){b.pathToVertices=function(b,d){var e,h,l,n,m,w,g=[],y,v,u=0,r=0,G=0;d=d||15;var P=function(a,b,d){d=1===d%2&&1<d;if(!w||a!=w.x||b!=w.y){w&&d?(y=w.x,v=w.y):v=y=0;var e={x:y+a,y:v+b};if(d||!w)w=e;g.push(e);r=y+a;G=v+b}},z=function(a){var b=a.pathSegTypeAsLetter.toUpperCase();if("Z"!==b){switch(b){case "M":case "L":case "T":case "C":case "S":case "Q":r=a.x;G=a.y;break;case "H":r=a.x;break;case "V":G=
a.y}P(r,G,a.pathSegType)}};a(b);h=b.getTotalLength();l=[];for(e=0;e<b.pathSegList.numberOfItems;e+=1)l.push(b.pathSegList.getItem(e));for(n=l.concat();u<h;){e=b.getPathSegAtLength(u);e=l[e];if(e!=m){for(;n.length&&n[0]!=e;)z(n.shift());m=e}switch(e.pathSegTypeAsLetter.toUpperCase()){case "C":case "T":case "S":case "Q":case "A":e=b.getPointAtLength(u),P(e.x,e.y,0)}u+=d}e=0;for(h=n.length;e<h;++e)z(n[e]);return g};var a=function(a){for(var b,d,e,l,n,m,w=a.pathSegList,g=0,y=0,v=w.numberOfItems,u=0;u<
v;++u){var r=w.getItem(u),G=r.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(G))"x"in r&&(g=r.x),"y"in r&&(y=r.y);else switch("x1"in r&&(e=g+r.x1),"x2"in r&&(n=g+r.x2),"y1"in r&&(l=y+r.y1),"y2"in r&&(m=y+r.y2),"x"in r&&(g+=r.x),"y"in r&&(y+=r.y),G){case "m":w.replaceItem(a.createSVGPathSegMovetoAbs(g,y),u);break;case "l":w.replaceItem(a.createSVGPathSegLinetoAbs(g,y),u);break;case "h":w.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(g),u);break;case "v":w.replaceItem(a.createSVGPathSegLinetoVerticalAbs(y),
u);break;case "c":w.replaceItem(a.createSVGPathSegCurvetoCubicAbs(g,y,e,l,n,m),u);break;case "s":w.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(g,y,n,m),u);break;case "q":w.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(g,y,e,l),u);break;case "t":w.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(g,y),u);break;case "a":w.replaceItem(a.createSVGPathSegArcAbs(g,y,r.r1,r.r2,r.angle,r.largeArcFlag,r.sweepFlag),u);break;case "z":case "Z":g=b,y=d}if("M"==G||"m"==G)b=g,d=y}}})()},{"../geometry/Bounds":26}],
28:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a,b){return{x:a||0,y:b||0}};b.clone=function(a){return{x:a.x,y:a.y}};b.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};b.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y};b.rotate=function(a,b){var d=Math.cos(b),e=Math.sin(b);return{x:a.x*d-a.y*e,y:a.x*e+a.y*d}};b.rotateAbout=function(a,b,d,k){var e=Math.cos(b);b=Math.sin(b);k||(k={});var h=d.x+((a.x-d.x)*e-(a.y-d.y)*b);k.y=d.y+((a.x-d.x)*b+(a.y-d.y)*e);k.x=h;return k};
b.normalise=function(a){var d=b.magnitude(a);return 0===d?{x:0,y:0}:{x:a.x/d,y:a.y/d}};b.dot=function(a,b){return a.x*b.x+a.y*b.y};b.cross=function(a,b){return a.x*b.y-a.y*b.x};b.cross3=function(a,b,d){return(b.x-a.x)*(d.y-a.y)-(b.y-a.y)*(d.x-a.x)};b.add=function(a,b,d){d||(d={});d.x=a.x+b.x;d.y=a.y+b.y;return d};b.sub=function(a,b,d){d||(d={});d.x=a.x-b.x;d.y=a.y-b.y;return d};b.mult=function(a,b){return{x:a.x*b,y:a.y*b}};b.div=function(a,b){return{x:a.x/b,y:a.y/b}};b.perp=function(a,b){b=!0===b?
-1:1;return{x:b*-a.y,y:b*a.x}};b.neg=function(a){return{x:-a.x,y:-a.y}};b.angle=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)};b._temp=[b.create(),b.create(),b.create(),b.create(),b.create(),b.create()]})()},{}],29:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),e=a("../core/Common");(function(){b.create=function(a,b){for(var d=[],e=0;e<a.length;e++){var h=a[e];d.push({x:h.x,y:h.y,index:e,body:b,isInternal:!1})}return d};b.fromPath=function(a,d){var e=[];a.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/ig,
function(a,b,d){e.push({x:parseFloat(b),y:parseFloat(d)})});return b.create(e,d)};b.centre=function(a){for(var d=b.area(a,!0),e={x:0,y:0},h,n,m=0;m<a.length;m++)n=(m+1)%a.length,h=l.cross(a[m],a[n]),h=l.mult(l.add(a[m],a[n]),h),e=l.add(e,h);return l.div(e,6*d)};b.mean=function(a){for(var b={x:0,y:0},d=0;d<a.length;d++)b.x+=a[d].x,b.y+=a[d].y;return l.div(b,a.length)};b.area=function(a,b){for(var d=0,e=a.length-1,h=0;h<a.length;h++)d+=(a[e].x-a[h].x)*(a[e].y+a[h].y),e=h;return b?d/2:Math.abs(d)/2};
b.inertia=function(a,b){for(var d=0,e=0,h,k,m=0;m<a.length;m++)k=(m+1)%a.length,h=Math.abs(l.cross(a[k],a[m])),d+=h*(l.dot(a[k],a[k])+l.dot(a[k],a[m])+l.dot(a[m],a[m])),e+=h;return b/6*(d/e)};b.translate=function(a,b,d){var e;if(d)for(e=0;e<a.length;e++)a[e].x+=b.x*d,a[e].y+=b.y*d;else for(e=0;e<a.length;e++)a[e].x+=b.x,a[e].y+=b.y;return a};b.rotate=function(a,b,d){if(0!==b){var e=Math.cos(b);b=Math.sin(b);for(var h=0;h<a.length;h++){var k=a[h],l=k.x-d.x,g=k.y-d.y;k.x=d.x+(l*e-g*b);k.y=d.y+(l*b+
g*e)}return a}};b.contains=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],h=a[(d+1)%a.length];if(0<(b.x-e.x)*(h.y-e.y)+(b.y-e.y)*(e.x-h.x))return!1}return!0};b.scale=function(a,d,e,m){if(1===d&&1===e)return a;m=m||b.centre(a);for(var k,h=0;h<a.length;h++)k=a[h],k=l.sub(k,m),a[h].x=m.x+k.x*d,a[h].y=m.y+k.y*e;return a};b.chamfer=function(a,b,d,m,n){b=b||[8];b.length||(b=[b]);d="undefined"!==typeof d?d:-1;m=m||2;n=n||14;for(var h=[],k=0;k<a.length;k++){var g=a[0<=k-1?k-1:a.length-1],y=a[k],v=a[(k+
1)%a.length],u=b[k<b.length?k:b.length-1];if(0===u)h.push(y);else{var g=l.normalise({x:y.y-g.y,y:g.x-y.x}),r=l.normalise({x:v.y-y.y,y:y.x-v.x}),q=Math.sqrt(2*Math.pow(u,2)),v=l.mult(e.clone(g),u),t=l.normalise(l.mult(l.add(g,r),.5)),y=l.sub(y,l.mult(t,q)),q=d;-1===d&&(q=1.75*Math.pow(u,.32));q=e.clamp(q,m,n);1===q%2&&(q+=1);u=Math.acos(l.dot(g,r))/q;for(g=0;g<q;g++)h.push(l.add(l.rotate(v,u*g),y))}}return h};b.clockwiseSort=function(a){var d=b.mean(a);a.sort(function(a,b){return l.angle(d,a)-l.angle(d,
b)});return a};b.isConvex=function(a){var b=0,d=a.length,e,h,l,m;if(3>d)return null;for(e=0;e<d;e++)if(h=(e+1)%d,l=(e+2)%d,m=(a[h].x-a[e].x)*(a[l].y-a[h].y),m-=(a[h].y-a[e].y)*(a[l].x-a[h].x),0>m?b|=1:0<m&&(b|=2),3===b)return!1;return 0!==b?!0:null};b.hull=function(a){var b=[],d=[],e,h;a=a.slice(0);a.sort(function(a,b){var d=a.x-b.x;return 0!==d?d:a.y-b.y});for(h=0;h<a.length;h++){for(e=a[h];2<=d.length&&0>=l.cross3(d[d.length-2],d[d.length-1],e);)d.pop();d.push(e)}for(h=a.length-1;0<=h;h--){for(e=
a[h];2<=b.length&&0>=l.cross3(b[b.length-2],b[b.length-1],e);)b.pop();b.push(e)}b.pop();d.pop();return b.concat(d)}})()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(a,d,m){d=d.exports=a("../core/Matter");d.Body=a("../body/Body");d.Composite=a("../body/Composite");d.World=a("../body/World");d.Contact=a("../collision/Contact");d.Detector=a("../collision/Detector");d.Grid=a("../collision/Grid");d.Pairs=a("../collision/Pairs");d.Pair=a("../collision/Pair");d.Query=a("../collision/Query");
d.Resolver=a("../collision/Resolver");d.SAT=a("../collision/SAT");d.Constraint=a("../constraint/Constraint");d.MouseConstraint=a("../constraint/MouseConstraint");d.Common=a("../core/Common");d.Engine=a("../core/Engine");d.Events=a("../core/Events");d.Mouse=a("../core/Mouse");d.Runner=a("../core/Runner");d.Sleeping=a("../core/Sleeping");d.Plugin=a("../core/Plugin");d.Bodies=a("../factory/Bodies");d.Composites=a("../factory/Composites");d.Axes=a("../geometry/Axes");d.Bounds=a("../geometry/Bounds");
d.Svg=a("../geometry/Svg");d.Vector=a("../geometry/Vector");d.Vertices=a("../geometry/Vertices");d.Render=a("../render/Render");d.RenderPixi=a("../render/RenderPixi");d.World.add=d.Composite.add;d.World.remove=d.Composite.remove;d.World.addComposite=d.Composite.addComposite;d.World.addBody=d.Composite.addBody;d.World.addConstraint=d.Composite.addConstraint;d.World.clear=d.Composite.clear;d.Engine.run=d.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,
"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,
"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Common"),e=a("../body/Composite"),h=a("../geometry/Bounds"),k=a("../core/Events"),t=a("../collision/Grid"),q=a("../geometry/Vector");(function(){var a,d;"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(l.now())},
1E3/60)},d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);b.create=function(a){var d=l.extend({controller:b,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222",hasBounds:!!a.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,
showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},a);d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height);d.mouse=a.mouse;d.engine=a.engine;d.canvas=d.canvas||m(d.options.width,d.options.height);d.context=d.canvas.getContext("2d");d.textures={};d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}};1!==d.options.pixelRatio&&
b.setPixelRatio(d,d.options.pixelRatio);l.isElement(d.element)?d.element.appendChild(d.canvas):l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn");return d};b.run=function(d){(function v(g){d.frameRequestId=a(v);b.world(d)})()};b.stop=function(a){d(a.frameRequestId)};b.setPixelRatio=function(a,b){var d=a.options,g=a.canvas;if("auto"===b){var e=g.getContext("2d");b=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||
e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}d.pixelRatio=b;g.setAttribute("data-pixel-ratio",b);g.width=d.width*b;g.height=d.height*b;g.style.width=d.width+"px";g.style.height=d.height+"px";a.context.scale(b,b)};b.world=function(a){var d=a.engine,g=d.world,l=a.canvas,m=a.context,n=a.options,p=e.allBodies(g),g=e.allConstraints(g),w=n.wireframes?n.wireframeBackground:n.background,x=[],D=[],E={timestamp:d.timing.timestamp};k.trigger(a,"beforeRender",E);if(a.currentBackground!==
w){var F=w;/(jpg|gif|png)$/.test(w)&&(F="url("+w+")");a.canvas.style.background=F;a.canvas.style.backgroundSize="contain";a.currentBackground=w}m.globalCompositeOperation="source-in";m.fillStyle="transparent";m.fillRect(0,0,l.width,l.height);m.globalCompositeOperation="source-over";if(n.hasBounds){w=(a.bounds.max.x-a.bounds.min.x)/n.width;F=(a.bounds.max.y-a.bounds.min.y)/n.height;for(l=0;l<p.length;l++){var A=p[l];h.overlaps(A.bounds,a.bounds)&&x.push(A)}for(l=0;l<g.length;l++){var p=g[l],A=p.bodyA,
B=p.bodyB,C=p.pointA,L=p.pointB;A&&(C=q.add(A.position,p.pointA));B&&(L=q.add(B.position,p.pointB));C&&L&&(h.contains(a.bounds,C)||h.contains(a.bounds,L))&&D.push(p)}m.scale(1/w,1/F);m.translate(-a.bounds.min.x,-a.bounds.min.y)}else D=g,x=p;!n.wireframes||d.enableSleeping&&n.showSleeping?b.bodies(a,x,m):(n.showConvexHulls&&b.bodyConvexHulls(a,x,m),b.bodyWireframes(a,x,m));n.showBounds&&b.bodyBounds(a,x,m);(n.showAxes||n.showAngleIndicator)&&b.bodyAxes(a,x,m);n.showPositions&&b.bodyPositions(a,x,m);
n.showVelocity&&b.bodyVelocity(a,x,m);n.showIds&&b.bodyIds(a,x,m);n.showSeparations&&b.separations(a,d.pairs.list,m);n.showCollisions&&b.collisions(a,d.pairs.list,m);n.showVertexNumbers&&b.vertexNumbers(a,x,m);n.showMousePosition&&b.mousePosition(a,a.mouse,m);b.constraints(D,m);n.showBroadphase&&d.broadphase.controller===t&&b.grid(a,d.broadphase,m);n.showDebug&&b.debug(a,m);n.hasBounds&&m.setTransform(n.pixelRatio,0,0,n.pixelRatio,0,0);k.trigger(a,"afterRender",E)};b.debug=function(a,b){var d=a.engine,
g=d.metrics,h=a.options;e.allBodies(d.world);if(500<=d.timing.timestamp-(a.debugTimestamp||0)){var k="";g.timing&&(k+="fps: "+Math.round(g.timing.fps)+"    ");a.debugString=k;a.debugTimestamp=d.timing.timestamp}if(a.debugString)for(b.font="12px Arial",b.fillStyle=h.wireframes?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",d=a.debugString.split("\n"),g=0;g<d.length;g++)b.fillText(d[g],50,50+18*g)};b.constraints=function(a,b){for(var d=0;d<a.length;d++){var e=a[d];if(e.render.visible&&e.pointA&&e.pointB){var g=
e.bodyA,h=e.bodyB;g?(b.beginPath(),b.moveTo(g.position.x+e.pointA.x,g.position.y+e.pointA.y)):(b.beginPath(),b.moveTo(e.pointA.x,e.pointA.y));h?b.lineTo(h.position.x+e.pointB.x,h.position.y+e.pointB.y):b.lineTo(e.pointB.x,e.pointB.y);b.lineWidth=e.render.lineWidth;b.strokeStyle=e.render.strokeStyle;b.stroke()}}};b.bodyShadows=function(a,b,d){for(var e=0;e<b.length;e++){var g=b[e];if(g.render.visible){if(g.circleRadius)d.beginPath(),d.arc(g.position.x,g.position.y,g.circleRadius,0,2*Math.PI);else{d.beginPath();
d.moveTo(g.vertices[0].x,g.vertices[0].y);for(var h=1;h<g.vertices.length;h++)d.lineTo(g.vertices[h].x,g.vertices[h].y)}d.closePath();var h=g.position.x-.5*a.options.width,g=g.position.y-.2*a.options.height,k=Math.abs(h)+Math.abs(g);d.shadowColor="rgba(0,0,0,0.15)";d.shadowOffsetX=.05*h;d.shadowOffsetY=.05*g;d.shadowBlur=1+12*Math.min(1,k/1E3);d.fill();d.shadowColor=null;d.shadowOffsetX=null;d.shadowOffsetY=null;d.shadowBlur=null}}};b.bodies=function(a,b,d){var e=a.options,g=e.showInternalEdges||
!e.wireframes,h,k,l,m;for(l=0;l<b.length;l++)if(h=b[l],h.render.visible)for(m=1<h.parts.length?1:0;m<h.parts.length;m++)if(k=h.parts[m],k.render.visible){e.showSleeping&&h.isSleeping?d.globalAlpha=.5*k.render.opacity:1!==k.render.opacity&&(d.globalAlpha=k.render.opacity);if(k.render.sprite&&k.render.sprite.texture&&!e.wireframes){var n=k.render.sprite,v;v=n.texture;var p=a.textures[v];p||(p=a.textures[v]=new Image,p.src=v);v=p;d.translate(k.position.x,k.position.y);d.rotate(k.angle);d.drawImage(v,
v.width*-n.xOffset*n.xScale,v.height*-n.yOffset*n.yScale,v.width*n.xScale,v.height*n.yScale);d.rotate(-k.angle);d.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)d.beginPath(),d.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{d.beginPath();d.moveTo(k.vertices[0].x,k.vertices[0].y);for(n=1;n<k.vertices.length;n++)!k.vertices[n-1].isInternal||g?d.lineTo(k.vertices[n].x,k.vertices[n].y):d.moveTo(k.vertices[n].x,k.vertices[n].y),k.vertices[n].isInternal&&!g&&d.moveTo(k.vertices[(n+
1)%k.vertices.length].x,k.vertices[(n+1)%k.vertices.length].y);d.lineTo(k.vertices[0].x,k.vertices[0].y);d.closePath()}e.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb"):(d.fillStyle=k.render.fillStyle,d.lineWidth=k.render.lineWidth,d.strokeStyle=k.render.strokeStyle,d.fill());d.stroke()}d.globalAlpha=1}};b.bodyWireframes=function(a,b,d){a=a.options.showInternalEdges;var e,g,k,h,l;d.beginPath();for(k=0;k<b.length;k++)if(e=b[k],e.render.visible)for(l=1<e.parts.length?1:0;l<e.parts.length;l++){g=e.parts[l];
d.moveTo(g.vertices[0].x,g.vertices[0].y);for(h=1;h<g.vertices.length;h++)!g.vertices[h-1].isInternal||a?d.lineTo(g.vertices[h].x,g.vertices[h].y):d.moveTo(g.vertices[h].x,g.vertices[h].y),g.vertices[h].isInternal&&!a&&d.moveTo(g.vertices[(h+1)%g.vertices.length].x,g.vertices[(h+1)%g.vertices.length].y);d.lineTo(g.vertices[0].x,g.vertices[0].y)}d.lineWidth=1;d.strokeStyle="#bbb";d.stroke()};b.bodyConvexHulls=function(a,b,d){var e,g;d.beginPath();for(e=0;e<b.length;e++)if(a=b[e],a.render.visible&&
1!==a.parts.length){d.moveTo(a.vertices[0].x,a.vertices[0].y);for(g=1;g<a.vertices.length;g++)d.lineTo(a.vertices[g].x,a.vertices[g].y);d.lineTo(a.vertices[0].x,a.vertices[0].y)}d.lineWidth=1;d.strokeStyle="rgba(255,255,255,0.2)";d.stroke()};b.vertexNumbers=function(a,b,d){var e,g;for(a=0;a<b.length;a++){var k=b[a].parts;for(g=1<k.length?1:0;g<k.length;g++){var h=k[g];for(e=0;e<h.vertices.length;e++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(a+"_"+e,h.position.x+.8*(h.vertices[e].x-h.position.x),
h.position.y+.8*(h.vertices[e].y-h.position.y))}}};b.mousePosition=function(a,b,d){d.fillStyle="rgba(255,255,255,0.8)";d.fillText(b.position.x+"  "+b.position.y,b.position.x+5,b.position.y-5)};b.bodyBounds=function(a,b,d){a=a.options;d.beginPath();for(var e=0;e<b.length;e++)if(b[e].render.visible)for(var g=b[e].parts,k=1<g.length?1:0;k<g.length;k++){var h=g[k];d.rect(h.bounds.min.x,h.bounds.min.y,h.bounds.max.x-h.bounds.min.x,h.bounds.max.y-h.bounds.min.y)}d.strokeStyle=a.wireframes?"rgba(255,255,255,0.08)":
"rgba(0,0,0,0.1)";d.lineWidth=1;d.stroke()};b.bodyAxes=function(a,b,d){a=a.options;var e,g,h,k;d.beginPath();for(g=0;g<b.length;g++){e=b[g];var l=e.parts;if(e.render.visible)if(a.showAxes)for(h=1<l.length?1:0;h<l.length;h++)for(e=l[h],k=0;k<e.axes.length;k++){var m=e.axes[k];d.moveTo(e.position.x,e.position.y);d.lineTo(e.position.x+20*m.x,e.position.y+20*m.y)}else for(h=1<l.length?1:0;h<l.length;h++)for(e=l[h],k=0;k<e.axes.length;k++)d.moveTo(e.position.x,e.position.y),d.lineTo((e.vertices[0].x+e.vertices[e.vertices.length-
1].x)/2,(e.vertices[0].y+e.vertices[e.vertices.length-1].y)/2)}a.wireframes?d.strokeStyle="indianred":(d.strokeStyle="rgba(0,0,0,0.8)",d.globalCompositeOperation="overlay");d.lineWidth=1;d.stroke();d.globalCompositeOperation="source-over"};b.bodyPositions=function(a,b,d){a=a.options;var e,g,h,k;d.beginPath();for(h=0;h<b.length;h++)if(e=b[h],e.render.visible)for(k=0;k<e.parts.length;k++)g=e.parts[k],d.arc(g.position.x,g.position.y,3,0,2*Math.PI,!1),d.closePath();d.fillStyle=a.wireframes?"indianred":
"rgba(0,0,0,0.5)";d.fill();d.beginPath();for(h=0;h<b.length;h++)e=b[h],e.render.visible&&(d.arc(e.positionPrev.x,e.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)";d.fill()};b.bodyVelocity=function(a,b,d){d.beginPath();for(a=0;a<b.length;a++){var e=b[a];e.render.visible&&(d.moveTo(e.position.x,e.position.y),d.lineTo(e.position.x+2*(e.position.x-e.positionPrev.x),e.position.y+2*(e.position.y-e.positionPrev.y)))}d.lineWidth=3;d.strokeStyle="cornflowerblue";d.stroke()};
b.bodyIds=function(a,b,d){var e;for(a=0;a<b.length;a++)if(b[a].render.visible){var g=b[a].parts;for(e=1<g.length?1:0;e<g.length;e++){var h=g[e];d.font="12px Arial";d.fillStyle="rgba(255,255,255,0.5)";d.fillText(h.id,h.position.x+10,h.position.y-10)}}};b.collisions=function(a,b,d){a=a.options;var e,g,h;d.beginPath();for(h=0;h<b.length;h++)if(e=b[h],e.isActive)for(g=0;g<e.activeContacts.length;g++){var k=e.activeContacts[g].vertex;d.rect(k.x-1.5,k.y-1.5,3.5,3.5)}d.fillStyle=a.wireframes?"rgba(255,255,255,0.7)":
"orange";d.fill();d.beginPath();for(h=0;h<b.length;h++)if(e=b[h],e.isActive&&(g=e.collision,0<e.activeContacts.length)){var k=e.activeContacts[0].vertex.x,l=e.activeContacts[0].vertex.y;2===e.activeContacts.length&&(k=(e.activeContacts[0].vertex.x+e.activeContacts[1].vertex.x)/2,l=(e.activeContacts[0].vertex.y+e.activeContacts[1].vertex.y)/2);g.bodyB===g.supports[0].body||!0===g.bodyA.isStatic?d.moveTo(k-8*g.normal.x,l-8*g.normal.y):d.moveTo(k+8*g.normal.x,l+8*g.normal.y);d.lineTo(k,l)}d.strokeStyle=
a.wireframes?"rgba(255,165,0,0.7)":"orange";d.lineWidth=1;d.stroke()};b.separations=function(a,b,d){a=a.options;var e,g,h,k;d.beginPath();for(k=0;k<b.length;k++)if(e=b[k],e.isActive){e=e.collision;g=e.bodyA;h=e.bodyB;var l=1;h.isStatic||g.isStatic||(l=.5);h.isStatic&&(l=0);d.moveTo(h.position.x,h.position.y);d.lineTo(h.position.x-e.penetration.x*l,h.position.y-e.penetration.y*l);l=1;h.isStatic||g.isStatic||(l=.5);g.isStatic&&(l=0);d.moveTo(g.position.x,g.position.y);d.lineTo(g.position.x+e.penetration.x*
l,g.position.y+e.penetration.y*l)}d.strokeStyle=a.wireframes?"rgba(255,165,0,0.5)":"orange";d.stroke()};b.grid=function(a,b,d){d.strokeStyle=a.options.wireframes?"rgba(255,180,0,0.1)":"rgba(255,180,0,0.5)";d.beginPath();a=l.keys(b.buckets);for(var e=0;e<a.length;e++){var g=a[e];2>b.buckets[g].length||(g=g.split(","),d.rect(.5+parseInt(g[0],10)*b.bucketWidth,.5+parseInt(g[1],10)*b.bucketHeight,b.bucketWidth,b.bucketHeight))}d.lineWidth=1;d.stroke()};b.inspector=function(a,b){var d=a.selected,e=a.render,
g=e.options,h;g.hasBounds&&(b.scale(1/((e.bounds.max.x-e.bounds.min.x)/e.options.width),1/((e.bounds.max.y-e.bounds.min.y)/e.options.height)),b.translate(-e.bounds.min.x,-e.bounds.min.y));for(e=0;e<d.length;e++){h=d[e].data;b.translate(.5,.5);b.lineWidth=1;b.strokeStyle="rgba(255,165,0,0.9)";b.setLineDash([1,2]);switch(h.type){case "body":h=h.bounds;b.beginPath();b.rect(Math.floor(h.min.x-3),Math.floor(h.min.y-3),Math.floor(h.max.x-h.min.x+6),Math.floor(h.max.y-h.min.y+6));b.closePath();b.stroke();
break;case "constraint":var k=h.pointA;h.bodyA&&(k=h.pointB);b.beginPath();b.arc(k.x,k.y,10,0,2*Math.PI);b.closePath();b.stroke()}b.setLineDash([]);b.translate(-.5,-.5)}null!==a.selectStart&&(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.6)",b.fillStyle="rgba(255,165,0,0.1)",h=a.selectBounds,b.beginPath(),b.rect(Math.floor(h.min.x),Math.floor(h.min.y),Math.floor(h.max.x-h.min.x),Math.floor(h.max.y-h.min.y)),b.closePath(),b.stroke(),b.fill(),b.translate(-.5,-.5));g.hasBounds&&b.setTransform(1,
0,0,1,0,0)};var m=function(a,b){var d=document.createElement("canvas");d.width=a;d.height=b;d.oncontextmenu=function(){return!1};d.onselectstart=function(){return!1};return d}})()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Bounds"),e=a("../body/Composite"),h=a("../core/Common"),k=a("../core/Events"),t=a("../geometry/Vector");(function(){var a,d;
"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(h.now())},1E3/60)},d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);b.create=function(a){h.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var d=h.extend({controller:b,engine:null,element:null,
frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},a),e=!d.options.wireframes&&"transparent"===d.options.background;d.pixiOptions=d.pixiOptions||{view:d.canvas,transparent:e,
antialias:!0,backgroundColor:a.background};d.mouse=a.mouse;d.engine=a.engine;d.renderer=d.renderer||new PIXI.WebGLRenderer(d.options.width,d.options.height,d.pixiOptions);d.container=d.container||new PIXI.Container;d.spriteContainer=d.spriteContainer||new PIXI.Container;d.canvas=d.canvas||d.renderer.view;d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.options.width,y:d.options.height}};k.on(d.engine,"beforeUpdate",function(){b.clear(d)});d.textures={};d.sprites={};d.primitives={};d.container.addChild(d.spriteContainer);
h.isElement(d.element)?d.element.appendChild(d.canvas):h.warn('No "render.element" passed, "render.canvas" was not inserted into document.');d.canvas.oncontextmenu=function(){return!1};d.canvas.onselectstart=function(){return!1};return d};b.run=function(d){(function y(e){d.frameRequestId=a(y);b.world(d)})()};b.stop=function(a){d(a.frameRequestId)};b.clear=function(a){for(var b=a.container,d=a.spriteContainer;b.children[0];)b.removeChild(b.children[0]);for(;d.children[0];)d.removeChild(d.children[0]);
d=a.sprites["bg-0"];a.textures={};a.sprites={};a.primitives={};(a.sprites["bg-0"]=d)&&b.addChildAt(d,0);a.container.addChild(a.spriteContainer);a.currentBackground=null;b.scale.set(1,1);b.position.set(0,0)};b.setBackground=function(a,b){if(a.currentBackground!==b){var d=b.indexOf&&-1!==b.indexOf("#"),e=a.sprites["bg-0"];d?(d=h.colorToNumber(b),a.renderer.backgroundColor=d,e&&a.container.removeChild(e)):e||(e=m(a,b),e=a.sprites["bg-0"]=new PIXI.Sprite(e),e.position.x=0,e.position.y=0,a.container.addChildAt(e,
0));a.currentBackground=b}};b.world=function(a){var d=a.engine.world,h=a.renderer,k=a.container,m=a.options,n=e.allBodies(d),d=e.allConstraints(d),p=[];m.wireframes?b.setBackground(a,m.wireframeBackground):b.setBackground(a,m.background);var q=(a.bounds.max.x-a.bounds.min.x)/a.options.width,w=(a.bounds.max.y-a.bounds.min.y)/a.options.height;if(m.hasBounds){for(m=0;m<n.length;m++){var x=n[m];x.render.sprite.visible=l.overlaps(x.bounds,a.bounds)}for(m=0;m<d.length;m++){var x=d[m],D=x.bodyA,E=x.bodyB,
F=x.pointA,A=x.pointB;D&&(F=t.add(D.position,x.pointA));E&&(A=t.add(E.position,x.pointB));F&&A&&(l.contains(a.bounds,F)||l.contains(a.bounds,A))&&p.push(x)}k.scale.set(1/q,1/w);k.position.set(1/q*-a.bounds.min.x,1/w*-a.bounds.min.y)}else p=d;for(m=0;m<n.length;m++)b.body(a,n[m]);for(m=0;m<p.length;m++)b.constraint(a,p[m]);h.render(k)};b.constraint=function(a,b){var d=b.bodyA,e=b.bodyB,g=b.pointA,k=b.pointB,l=a.container,m=b.render,n="c-"+b.id,p=a.primitives[n];p||(p=a.primitives[n]=new PIXI.Graphics);
m.visible&&b.pointA&&b.pointB?(-1===h.indexOf(l.children,p)&&l.addChild(p),p.clear(),p.beginFill(0,0),p.lineStyle(m.lineWidth,h.colorToNumber(m.strokeStyle),1),d?p.moveTo(d.position.x+g.x,d.position.y+g.y):p.moveTo(g.x,g.y),e?p.lineTo(e.position.x+k.x,e.position.y+k.y):p.lineTo(k.x,k.y),p.endFill()):p.clear()};b.body=function(a,b){var d=b.render;if(d.visible)if(d.sprite&&d.sprite.texture){var e="b-"+b.id,g=a.sprites[e],k=a.spriteContainer;if(!g){var g=a.sprites,l=m(a,b.render.sprite.texture),l=new PIXI.Sprite(l);
l.anchor.x=b.render.sprite.xOffset;l.anchor.y=b.render.sprite.yOffset;g=g[e]=l}-1===h.indexOf(k.children,g)&&k.addChild(g);g.position.x=b.position.x;g.position.y=b.position.y;g.rotation=b.angle;g.scale.x=d.sprite.xScale||1;g.scale.y=d.sprite.yScale||1}else{d="b-"+b.id;k=a.primitives[d];e=a.container;if(!k){var k=a.primitives,g=b.render,l=a.options,n=new PIXI.Graphics,p=h.colorToNumber(g.fillStyle),q=h.colorToNumber(g.strokeStyle),t=h.colorToNumber(g.strokeStyle),w=h.colorToNumber("#bbb"),F=h.colorToNumber("#CD5C5C"),
A;n.clear();for(var B=1<b.parts.length?1:0;B<b.parts.length;B++){A=b.parts[B];l.wireframes?(n.beginFill(0,0),n.lineStyle(1,w,1)):(n.beginFill(p,1),n.lineStyle(g.lineWidth,q,1));n.moveTo(A.vertices[0].x-b.position.x,A.vertices[0].y-b.position.y);for(var C=1;C<A.vertices.length;C++)n.lineTo(A.vertices[C].x-b.position.x,A.vertices[C].y-b.position.y);n.lineTo(A.vertices[0].x-b.position.x,A.vertices[0].y-b.position.y);n.endFill();if(l.showAngleIndicator||l.showAxes)n.beginFill(0,0),l.wireframes?n.lineStyle(1,
F,1):n.lineStyle(1,t),n.moveTo(A.position.x-b.position.x,A.position.y-b.position.y),n.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2-b.position.x,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2-b.position.y),n.endFill()}k=k[d]=n;k.initialAngle=b.angle}-1===h.indexOf(e.children,k)&&e.addChild(k);k.position.x=b.position.x;k.position.y=b.position.y;k.rotation=b.angle-k.initialAngle}};var m=function(a,b){var d=a.textures[b];d||(d=a.textures[b]=PIXI.Texture.fromImage(b));return d}})()},
{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)});var __$release_big$classdecl$var0=function(f,a,d,m,b){var l=this;this._scroll={isActive:!1,prevM1:!1};this._posEpsilon=5;this._canvas=f;this._width=a;this._height=d;this._x=void 0===m?0:m;this._y=void 0===b?0:b;this._mainMatrix=0;this._clip=null;this._calcMainMatrix();window.addEventListener("resize",function(){return l._calcMainMatrix()})};
__$release_big$classdecl$var0.prototype.draw=function(f){f=$jscomp.makeIterator(f);for(var a=f.next();!a.done;a=f.next()){var a=a.value,d=a.getPosition(),m=a.getScale(),b=a.getAngle(),l=QQ.Matrix.getIdentity(),l=QQ.Matrix.mul(l,QQ.Matrix.getScale(m.x,-m.y)),l=QQ.Matrix.mul(l,QQ.Matrix.getRotate(-b)),l=QQ.Matrix.mul(l,QQ.Matrix.getMove(d.x,d.y)),l=QQ.Matrix.mul(l,this._mainMatrix);this._canvas.getContext("2d").setTransform(l[0][0],l[0][1],l[1][0],l[1][1],l[2][0],l[2][1]);a.draw()}};
__$release_big$classdecl$var0.prototype.drawHud=function(f){f=$jscomp.makeIterator(f);for(var a=f.next();!a.done;a=f.next()){var a=a.value,d=a.getPosition(),m=a.getScale(),b=this.widthPercent(m.x),m=this.heightPercent(m.y),l=QQ.Matrix.getIdentity(),l=QQ.Matrix.mul(l,QQ.Matrix.getScale(b,m)),l=QQ.Matrix.mul(l,QQ.Matrix.getMove(this.widthPercent(d.x),this.heightPercent(d.y)));this._canvas.getContext("2d").setTransform(l[0][0],l[0][1],l[1][0],l[1][1],l[2][0],l[2][1]);a.draw()}};
__$release_big$classdecl$var0.prototype.isScrolling=function(){return this._scroll.isActive};
__$release_big$classdecl$var0.prototype.tickScroll=function(f,a,d){var m=this._scroll;if(0<=f&&0<=a)if(!m.prevM1&&d)m.prevM1=d,m.isActive=!1,m.startX=f,m.startY=a;else if(m.prevM1&&!d)m.prevM1=d,m.isActive=!1;else{var b=this._isPositionsClose(f,a,m.startX,m.startY);!d||m.isActive||b||(d=this.getWorldPoint(f,a),m.isActive=!0,m.scrollX=d.x,m.scrollY=d.y);m.isActive&&(d=this.getWorldPoint(f,a),this.addPos(m.scrollX-d.x,m.scrollY-d.y),f=this.getWorldPoint(f,a),m.scrollX=f.x,m.scrollY=f.y)}else m.prevM1=
!1,m.isActive=!1};__$release_big$classdecl$var0.prototype.getViewRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};__$release_big$classdecl$var0.prototype.getWorldPoint=function(f,a){var d=QQ.Matrix.mul([[f,a,1]],QQ.Matrix.inverse(this._mainMatrix));return{x:d[0][0],y:d[0][1]}};__$release_big$classdecl$var0.prototype.getPosition=function(){return{x:this._x,y:this._y}};
__$release_big$classdecl$var0.prototype.setClip=function(f,a,d,m){this._clip={maxX:f,minX:a,maxY:d,minY:m}};__$release_big$classdecl$var0.prototype.setPos=function(f,a){this._x=f;this._y=a;this._calcMainMatrix()};__$release_big$classdecl$var0.prototype.addPos=function(f,a){this._x+=f;this._y+=a;this._calcMainMatrix()};__$release_big$classdecl$var0.prototype.addView=function(f,a){this._width+=f;this._height+=a;this._calcMainMatrix()};
__$release_big$classdecl$var0.prototype.setView=function(f,a){this._width=f;this._height=a;this._calcMainMatrix()};__$release_big$classdecl$var0.prototype.widthToPercent=function(f){return f/(this._canvas.width/100)};__$release_big$classdecl$var0.prototype.heightToPercent=function(f){return f/(this._canvas.height/100)};__$release_big$classdecl$var0.prototype.widthPercent=function(f){return this._canvas.width*f/100};
__$release_big$classdecl$var0.prototype.heightPercent=function(f){return this._canvas.height*f/100};__$release_big$classdecl$var0.prototype._isPositionsClose=function(f,a,d,m){return Math.abs(f-d)<this._posEpsilon&&Math.abs(a-m)<this._posEpsilon};
__$release_big$classdecl$var0.prototype._fixClip=function(){null!==this._clip&&(this._x>this._clip.maxX&&(this._x=this._clip.maxX),this._x<this._clip.minX&&(this._x=this._clip.minX),this._y>this._clip.maxY&&(this._y=this._clip.maxY),this._y<this._clip.minY&&(this._y=this._clip.minY))};__$release_big$classdecl$var0.prototype._calcMainMatrix=function(){this._fixClip();this._mainMatrix=QQ.Matrix.mul(this._getInverseMatrix(),this._getScreenMatrix())};
__$release_big$classdecl$var0.prototype._drawAxis=function(){var f=this._mainMatrix,a=this._canvas.getContext("2d");a.setTransform(f[0][0],f[0][1],f[1][0],f[1][1],f[2][0],f[2][1]);for(f=-10;10>=f;f++)a.beginPath(),a.moveTo(-10,f),a.lineTo(10,f),a.lineWidth=.1,a.strokeStyle="#00ff00",a.stroke();for(f=-10;10>=f;f++)a.beginPath(),a.moveTo(f,-10),a.lineTo(f,10),a.lineWidth=.1,a.strokeStyle="#00ff00",a.stroke();a.fillStyle="#FF0000";a.fillRect(-.1,-.1,.2,.2);a.fillStyle="#0000FF";a.fillRect(10,10,.2,.2)};
__$release_big$classdecl$var0.prototype._getMatrix=function(){var f=QQ.Matrix.getIdentity(),f=QQ.Matrix.mul(f,QQ.Matrix.getScale(1,1)),f=QQ.Matrix.mul(f,QQ.Matrix.getRotate(0));return f=QQ.Matrix.mul(f,QQ.Matrix.getMove(this._x,this._y))};__$release_big$classdecl$var0.prototype._getInverseMatrix=function(){return QQ.Matrix.inverse(this._getMatrix())};
__$release_big$classdecl$var0.prototype._getScreenMatrix=function(){var f=QQ.Matrix.getIdentity(),f=QQ.Matrix.mul(f,QQ.Matrix.getRotate(0)),f=QQ.Matrix.mul(f,QQ.Matrix.getScale(this._canvas.width/this._width,-this._canvas.height/this._height));return f=QQ.Matrix.mul(f,QQ.Matrix.getMove(this._canvas.width/2,this._canvas.height/2))};__$release_big$classdecl$var0.prototype._cleanCanvas=function(){var f=this._canvas.getContext("2d");f.fillStyle="gray";f.fillRect(0,0,this._canvas.width,this._canvas.height)};
QQ.Camera=__$release_big$classdecl$var0;
var __$release_big$classdecl$var1=function(f,a,d,m){var b=this;this._maximize=void 0===m?!1:m;this._fullscreen=void 0===a||void 0===d;this._width=null;this._w=a;this._height=null;this._h=d;this._scale=1;this._ut=null;this._canvas=document.createElement("canvas");this._context=this._canvas.getContext("2d");this._onCalcSize=function(){};this._canvas.id=f;this._canvas.style.position="absolute";this._calcSize();document.body.appendChild(this._canvas);window.addEventListener("resize",function(){return b.resize()});
this._context.imageSmoothingEnabled=!0};__$release_big$classdecl$var1.prototype.getWidth=function(){return this._width};__$release_big$classdecl$var1.prototype.getHeight=function(){return this._height};__$release_big$classdecl$var1.prototype.getUt=function(){return this._ut};__$release_big$classdecl$var1.prototype.getCanvas=function(){return this._canvas};__$release_big$classdecl$var1.prototype.getContext=function(){return this._context};__$release_big$classdecl$var1.prototype.getScale=function(){return this._scale};
__$release_big$classdecl$var1.prototype.getRatio=function(){return this._width/this._height};__$release_big$classdecl$var1.prototype.setOnCalcSize=function(f){this._onCalcSize=f;f()};__$release_big$classdecl$var1.prototype.resize=function(){this._calcSize()};__$release_big$classdecl$var1.prototype.drawBorder=function(){var f=this._context;f.setTransform(1,0,0,1,0,0,0);f.beginPath();f.rect(0,0,this._width,this._height);f.lineWidth=this._ut;f.strokeStyle="black";f.stroke()};
__$release_big$classdecl$var1.prototype.remove=function(){document.body.removeChild(this._canvas)};
__$release_big$classdecl$var1.prototype._calcSize=function(){if(this._fullscreen)this._width=window.innerWidth,this._height=window.innerHeight,this._scale=1;else{if(this._maximize){var f=this._w/this._h;this._width=window.innerWidth;this._height=Math.floor(this._width/f);window.innerHeight<this._height&&(this._height=window.innerHeight,this._width=Math.floor(this._height*f))}else this._width=this._w,this._height=this._h,window.innerWidth<this._width&&(this._height=Math.floor(window.innerWidth/this._width*
this._height),this._width=Math.floor(window.innerWidth)),window.innerHeight<this._height&&(this._width=Math.floor(window.innerHeight/this._height*this._width),this._height=Math.floor(window.innerHeight));this._scale=this._width/this._w}this._ut=this._width/100;this._calcCanvasSize();this._onCalcSize()};
__$release_big$classdecl$var1.prototype._calcCanvasSize=function(){var f=this._canvas;f.width=this._width;f.height=this._height;f.style.left=window.innerWidth/2-this._width/2+"px";f.style.top=window.innerHeight/2-this._height/2+"px";this._context.font="bold "+Math.floor(20*this.getScale())+"pxdefaultFont"};QQ.Canvas=__$release_big$classdecl$var1;
var __$release_big$classdecl$var2=function(){this._iSlot=this._fpsToShow=this._accumFps=this._accumDelta=0;this._maxSlots=10;this._details=!1;this._slots=[];this._font="10px defaultFont"};__$release_big$classdecl$var2.prototype.showDetails=function(){this._details=!this._details};
__$release_big$classdecl$var2.prototype.tick=function(f){this._slots[this._iSlot]=Math.floor(1/f);this._iSlot=(this._iSlot+1)%this._maxSlots;++this._accumFps;this._accumDelta+=f;1<this._accumDelta&&(this._fpsToShow=this._accumFps,this._accumDelta=this._accumFps=0)};
__$release_big$classdecl$var2.prototype.show=function(f){if(this._details){f.setTransform(1,0,0,1,0,0,0);f.font=this._font;f.textBaseline="middle";f.textAlign="center";for(var a=0,d=$jscomp.makeIterator(this._slots),m=d.next();!m.done;m=d.next())m=m.value,f.fillStyle="green",99<m&&(f.fillStyle="white"),55>m&&(f.fillStyle="yellow"),50>m&&(f.fillStyle="red"),f.fillText(m+" FPS",20,20+15*a),++a}};QQ.FpsCounter=__$release_big$classdecl$var2;var __$release_big$classdecl$var3=function(){this._imgs=[]};
__$release_big$classdecl$var3.prototype.get=function(f){for(var a=$jscomp.makeIterator(this._imgs),d=a.next();!d.done;d=a.next())if(d=d.value,d.url===f)return d.obj;a={};a.url=f;a.obj=new Image;a.obj.src=f;this._imgs.push(a);return a.obj};__$release_big$classdecl$var3.prototype.isAllReady=function(){for(var f=$jscomp.makeIterator(this._imgs),a=f.next();!a.done;a=f.next())if(!1===a.value.obj.complete)return!1;return!0};
__$release_big$classdecl$var3.prototype.isReady=function(f){for(var a=$jscomp.makeIterator(this._imgs),d=a.next();!d.done;d=a.next())if(d=d.value,d.obj===f)return d.obj.complete;return!1};QQ.imgManager=new __$release_big$classdecl$var3;QQ.Math={};QQ.Math.rand=function(f,a,d){return d?Math.round(Math.random()*(a-f))+f:Math.random()*(a-f)+f};QQ.Math.reduceToSize=function(f,a,d){var m=1;f>d&&(m=d/f);a>d&&(f=d/a,f<m&&(m=f));return m};QQ.Math.scaleToSize=function(f,a,d){f=d/f;a=d/a;return f<a?f:a};
QQ.Math.devidePeriod=function(f,a){f>a&&(f%=a);return f};QQ.Math.devideAngle=function(f){f>Math.PI&&(f-=2*Math.PI);f<-Math.PI&&(f+=2*Math.PI);return f};QQ.Math.sinBetweenVectors=function(f,a,d,m){f=(f*d+a*m)/(Math.sqrt(f*f+a*a)*Math.sqrt(d*d+m*m));f=1-f*f;0>f&&(f=0);return Math.sqrt(f)};QQ.Math.calcProgress=function(f,a){var d=(Date.now()-f)/a;return 1>d?d:1};QQ.Math.getSign=function(f){return 0<=f?1:-1};QQ.Math.secToMs=function(f){return 1E3*f};
QQ.Math.isIntersect=function(f,a){return f.y1<a.y2||f.y2>a.y1||f.x2<a.x1||f.x1>a.x2?!1:!0};QQ.Math.isInside=function(f,a,d){return f.y1>d&&d>f.y2&&f.x1<a&&a<f.x2?!0:!1};QQ.Math.PIx2=2*Math.PI;QQ.Math.calcPivotX=function(f,a,d){var m=QQ.Math.pivot;if(f===m.CENTERTOP||f===m.CENTERBOTTOM||f===m.CENTER)return a;if(f===m.LEFTTOP)return a+d/2};
QQ.Math.calcPivotY=function(f,a,d,m){m=void 0===m?1:m;var b=QQ.Math.pivot;if(f===b.CENTERTOP)return a-d/2*m;if(f===b.CENTERBOTTOM)return a+d/2*m;if(f===b.CENTER)return a;if(f===b.LEFTTOP)return a-d/2*m};QQ.Math.pivot={NONE:1,CENTER:2,LEFTTOP:3,CENTERBOTTOM:4,CENTERTOP:5};QQ.Matrix={};var abs=function(f){return Math.abs(f)},cos=function(f){return Math.cos(f)},sin=function(f){return Math.sin(f)};QQ.Matrix.getIdentity=function(){return[[1,0,0],[0,1,0],[0,0,1]]};
QQ.Matrix.getScale=function(f,a){return[[f,0,0],[0,a,0],[0,0,1]]};QQ.Matrix.getMove=function(f,a){return[[1,0,0],[0,1,0],[f,a,1]]};QQ.Matrix.getRotate=function(f){return[[cos(f),-sin(f),0],[sin(f),cos(f),0],[0,0,1]]};
QQ.Matrix.determinant=function(f){for(var a=f.length,d=[],m=1,b=0,l=0;l<a;++l){d[l]=[];for(var e=0;e<a;++e)d[l][e]=f[l][e]}for(l=0;l<a-1;++l){f=l;for(var h=abs(d[l][l]),e=l+1;e<a;++e){var k=abs(d[e][l]);k>h&&(f=e,h=k)}if(f>l)e=d[l],d[l]=d[f],d[f]=e,++b;else if(0===h)return h;f=d[l][l];for(e=l+1;e<a;++e)for(h=d[e][l],d[e][l]=0,k=l+1;k<a;++k)d[e][k]=(d[e][k]*f-d[l][k]*h)/m;m=f}return b%2?-d[a-1][a-1]:d[a-1][a-1]};
QQ.Matrix.inverse=function(f){var a=QQ.Matrix.determinant(f);if(0===a)return!1;for(var d=f.length,m=[],b=0;b<d;b++){m[b]=[];for(var l=0;l<d;l++){for(var e=[],h=0===(b+l)%2?1:-1,k=0;k<l;k++){e[k]=[];for(var t=0;t<b;t++)e[k][t]=f[k][t];for(t=b+1;t<d;t++)e[k][t-1]=f[k][t]}for(k=l+1;k<d;k++){e[k-1]=[];for(t=0;t<b;t++)e[k-1][t]=f[k][t];for(t=b+1;t<d;t++)e[k-1][t-1]=f[k][t]}m[b][l]=h*QQ.Matrix.determinant(e)/a}}return m};
QQ.Matrix.mul=function(f,a){var d=f.length,m=a.length,b=a[0].length,l=[];if(f[0].length!==m)return!1;for(var e=0;e<d;e++)l[e]=[];for(var h=0;h<b;h++)for(e=0;e<d;e++){for(var k=0,t=0;t<m;t++)k+=f[e][t]*a[t][h];l[e][h]=k}return l};
var __$release_big$classdecl$var4=function(){var f=this;window.addEventListener("mousemove",function(a){f._isNumbers(a.clientX,a.clientY,a.buttons)&&f._process(a.clientX,a.clientY,1===a.buttons)});window.addEventListener("mousedown",function(a){f._isNumbers(a.clientX,a.clientY)&&f._process(a.clientX,a.clientY,!0)});window.addEventListener("mouseup",function(a){f._isNumbers(a.clientX,a.clientY)&&f._process(a.clientX,a.clientY,!1)});this._y=this._x=0;this._m1=!1;this._m1UpCB=this._m1DownCB=null};
__$release_big$classdecl$var4.prototype.getX=function(){return this._x};__$release_big$classdecl$var4.prototype.getY=function(){return this._y};__$release_big$classdecl$var4.prototype.getM1=function(){return this._m1};__$release_big$classdecl$var4.prototype.setM1DownCB=function(f){this._m1DownCB=f};__$release_big$classdecl$var4.prototype.setM1UpCB=function(f){this._m1UpCB=f};__$release_big$classdecl$var4.prototype.emulate=function(f,a,d){this._process(f,a,d)};
__$release_big$classdecl$var4.prototype._process=function(f,a,d){this._x=f;this._y=a;!0===d&&!1===this._m1&&(this._m1=!0,this._m1DownCB&&this._m1DownCB());!1===d&&!0===this._m1&&(this._m1=!1,this._m1UpCB&&this._m1UpCB())};__$release_big$classdecl$var4.prototype._isNumbers=function(){for(var f=0;f<arguments.length;++f)if("number"!==typeof arguments[f])return!1;return!0};QQ.Mouse=__$release_big$classdecl$var4;
var __$release_big$classdecl$var5=function(f,a,d){f=void 0===f?null:f;this._y=this._x=0;this._width=void 0===a?1:a;this._height=void 0===d?1:d;this._angle=0;this._ctx=QQ.application.getContext();this._physicsBody=null;this._sprite=f?new QQ.Sprite(QQ.imgManager.get(f)):null};__$release_big$classdecl$var5.prototype.setSize=function(f,a){this._width=f;this._height=a};__$release_big$classdecl$var5.prototype.draw=function(){this._sprite&&this._sprite.draw()};
__$release_big$classdecl$var5.prototype.drawBorder=function(){var f=this.getScale();this._ctx.beginPath();this._ctx.rect(-this._width/f.x/2,-this._height/f.y/2,this._width/f.x,this._height/f.y);this._ctx.lineWidth=1;this._ctx.strokeStyle="#000000";this._ctx.stroke()};__$release_big$classdecl$var5.prototype.getRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};
__$release_big$classdecl$var5.prototype.fitInRect=function(f){this._width=f.x2-f.x1;this._height=f.y1-f.y2;this._x=f.x1+this._width/2;this._y=f.y2+this._height/2};__$release_big$classdecl$var5.prototype.getPosition=function(){return{x:this._x,y:this._y}};__$release_big$classdecl$var5.prototype.getAngle=function(){return this._angle};__$release_big$classdecl$var5.prototype.type=function(){return"subject"};
__$release_big$classdecl$var5.prototype.setPhysics=function(f,a,d,m,b){this._physicsBody=Matter.Bodies.rectangle(f,a,d,m,b)};__$release_big$classdecl$var5.prototype.setDefaultPhysics=function(f){this._physicsBody=Matter.Bodies.rectangle(this._x,this._y,this._width,this._height,f)};__$release_big$classdecl$var5.prototype.getPhysicsBody=function(){return this._physicsBody};__$release_big$classdecl$var5.prototype.isPhysicsBody=function(){return null!==this._physicsBody};
__$release_big$classdecl$var5.prototype.click=function(){};__$release_big$classdecl$var5.prototype.tick=function(f){this._physicsTick(f)};__$release_big$classdecl$var5.prototype.setAlpha=function(f){this._sprite&&this._sprite.setAlpha(f)};__$release_big$classdecl$var5.prototype.getScale=function(){var f=1,a=1;this._sprite&&(a=this._sprite.getSize(),f=this._width/a.width,a=this._height/a.height);return{x:f,y:a}};__$release_big$classdecl$var5.prototype.isClickable=function(){return!0};
__$release_big$classdecl$var5.prototype.setPosition=function(f,a,d){void 0!==f&&(this._x=d?QQ.Math.calcPivotX(d,f,this._width):f);void 0!==a&&(this._y=d?QQ.Math.calcPivotY(d,a,this._height):a)};__$release_big$classdecl$var5.prototype._physicsTick=function(f){this.isPhysicsBody()&&(this.setPosition(this._physicsBody.position.x,this._physicsBody.position.y),this._angle=this._physicsBody.angle)};QQ.Subject=__$release_big$classdecl$var5;
var __$release_big$classdecl$var6=function(f,a,d,m,b){a=void 0===a?0:a;d=void 0===d?0:d;m=void 0===m?1:m;b=void 0===b?QQ.Text.fit.HEIGHT:b;QQ.Subject.call(this,null,0,0);this._fitSize=m;this._textX=a;this._textY=d;this._ratio=this._pxInUnit=this._textWidth=this._textHeight=0;this._fit=b;this._align="center";this._font="Ken";this._lineSpace=0;this._lineHeight=20+this._lineSpace;this._text=String(f).split("\n");this._lines=this._text.length;this._calcSizes()};
$jscomp.inherits(__$release_big$classdecl$var6,QQ.Subject);__$release_big$classdecl$var6.prototype.isClickable=function(){return!1};__$release_big$classdecl$var6.prototype.setSize=function(f,a){this._width=f;this._height=a};__$release_big$classdecl$var6.prototype.setFont=function(f){this._font=f;this._calcSizes()};__$release_big$classdecl$var6.prototype.setAlign=function(f){this._align=f};__$release_big$classdecl$var6.prototype.setLineHeight=function(f){this._lineHeight=f+this._lineSpace;this._calcSizes()};
__$release_big$classdecl$var6.prototype.setLineSpace=function(f){this._lineHeight-=this._lineSpace;this._lineSpace=f;this._lineHeight+=this._lineSpace;this._calcSizes()};__$release_big$classdecl$var6.prototype.getScale=function(){return{x:this._width/this._textHeight/this._ratio,y:this._height/this._textHeight}};
__$release_big$classdecl$var6.prototype.draw=function(){this._setupContext();var f=0,a=-(this._lineHeight/2)*(this._lines-1);"left"===this._align?f=-(this._textWidth/2):"right"===this._align&&(f=this._textWidth/2);for(var d=0,m=$jscomp.makeIterator(this._text),b=m.next();!b.done;b=m.next())this._ctx.fillText(b.value,f,a+d*this._lineHeight),++d};
__$release_big$classdecl$var6.prototype._setupContext=function(){this._ctx.textBaseline="middle";this._ctx.textAlign=this._align;this._ctx.fillStyle="#878787";this._ctx.font=this._lineHeight-this._lineSpace+"px "+this._font};
__$release_big$classdecl$var6.prototype._calcSizes=function(){this._setupContext();this._textHeight=this._lineHeight*this._text.length;this._textWidth=0;for(var f=$jscomp.makeIterator(this._text),a=f.next();!a.done;a=f.next())a=this._ctx.measureText(a.value).width,a>this._textWidth&&(this._textWidth=a);this._pxInUnit=this._fit===__$release_big$classdecl$var6.fit.WIDTH?this._textWidth/this._fitSize:this._lineHeight/this._fitSize;this._ratio=this._textWidth/this._textHeight;this.setSize(this._textWidth/
this._pxInUnit,this._textHeight/this._pxInUnit);this.setPosition(this._textX,this._textY-this._height/this._lines/2*(this._lines-1))};QQ.Text=__$release_big$classdecl$var6;QQ.Text.fit={WIDTH:0,HEIGHT:1};
var __$release_big$classdecl$var7=function(f){!1===f.complete&&alert("QQ.Sprite: img must be complete");this._width=f.width;this._height=f.height;this._alpha=1;this._animation=!1;this._curFrame=this._frames=this._tpf=this._fps=this._frameWidth=this._frameHeight=0;this._time=null;this._startTime=0;this._img=f};__$release_big$classdecl$var7.prototype.getRatio=function(){return this._width/this._height};__$release_big$classdecl$var7.prototype.getSize=function(){return{width:this._width,height:this._height}};
__$release_big$classdecl$var7.prototype.setAnimation=function(f,a,d,m){this._isAnimation=!0;this._frameWidth=f;this._frameHeight=a;this._fps=d;this._tpf=Math.round(1E3/d);this._time=m;this._startTime=this._time.now()};__$release_big$classdecl$var7.prototype.setAlpha=function(f){this._alpha=f};
__$release_big$classdecl$var7.prototype.draw=function(f,a){var d="number"===typeof f,m="number"===typeof a;if(QQ.Sprite.context){var b,l;d&&m?(d=QQ.Sprite.pivot.NONE,b=f,l=a):d=d&&!m?f:QQ.Sprite.pivot.CENTER;d!==QQ.Sprite.pivot.NONE&&(l=this._calcPosition(d),b=l.x,l=l.y);d=QQ.Sprite.context.globalAlpha;QQ.Sprite.context.globalAlpha=this._alpha;this._isAnimation?(m=this._time.now()-this._startTime,this._curFrame=Math.round(m/this._tpf)%this._frames,QQ.Sprite.context.drawImage(this._img,this._frameWidth*
this._curFrame,0,this._frameWidth,this._frameHeight,b,l,this._frameWidth,this._frameHeight)):QQ.Sprite.context.drawImage(this._img,b,l,this._width,this._height);QQ.Sprite.context.globalAlpha=d}};__$release_big$classdecl$var7.prototype.getContext=function(){return QQ.Sprite.context};
__$release_big$classdecl$var7.prototype._calcPosition=function(f){var a={x:0,y:0};if(f===QQ.Sprite.pivot.LEFTTOP)return a;this._isAnimation?f===QQ.Sprite.pivot.CENTER?(a.x=-this._frameWidth/2,a.y=-this._frameHeight/2):f===QQ.Sprite.pivot.CENTERBOTTOM?(a.x=-this._frameWidth/2,a.y=-this._frameHeight):f===QQ.Sprite.pivot.CENTERTOP&&(a.x=-this._frameWidth/2,a.y=0):f===QQ.Sprite.pivot.CENTER?(a.x=-this._width/2,a.y=-this._height/2):f===QQ.Sprite.pivot.CENTERBOTTOM?(a.x=-this._width/2,a.y=-this._height):
f===QQ.Sprite.pivot.CENTERTOP&&(a.x=-this._width/2,a.y=0);return a};QQ.Sprite=__$release_big$classdecl$var7;QQ.Sprite.setContext=function(f){QQ.Sprite.context=f};QQ.Sprite.context=!1;QQ.Sprite.pivot={NONE:0,CENTER:1,LEFTTOP:2,CENTERBOTTOM:3,CENTERTOP:4};var __$release_big$classdecl$var8=function(){this._nowTime=Date.now()};__$release_big$classdecl$var8.prototype.now=function(){return this._nowTime};
__$release_big$classdecl$var8.prototype.update=function(){var f=this._nowTime;this._nowTime=Date.now();return(this._nowTime-f)/1E3};QQ.Time=__$release_big$classdecl$var8;
var __$release_big$classdecl$var9=function(f){var a=this,d=0,m=0;window.addEventListener("touchstart",function(b){var l=b.touches[0];a._isNumbers(l.clientX,l.clientY)&&(d=l.clientX,m=l.clientY,f.emulate(d,m,!0));b.preventDefault()},{passive:!1});window.addEventListener("touchmove",function(b){var l=b.touches[0];a._isNumbers(l.clientX,l.clientY)&&(d=l.clientX,m=l.clientY,f.emulate(d,m,!0));b.preventDefault()},{passive:!1});window.addEventListener("touchend",function(a){f.emulate(d,m,!1);a.preventDefault();
return!0},{passive:!1})};__$release_big$classdecl$var9.prototype._isNumbers=function(f){for(var a=[],d=0;d<arguments.length;++d)a[d-0]=arguments[d];a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())if("number"!==typeof d.value)return!1;return!0};QQ.Touch=__$release_big$classdecl$var9;var __$release_big$classdecl$var10=function(f){this._val=void 0===f?0:f};__$release_big$classdecl$var10.prototype.clear=function(){this._val=0};
__$release_big$classdecl$var10.prototype.invert=function(){this._val*=-1};__$release_big$classdecl$var10.prototype.v=function(f){void 0!==f&&(this._val=f);return this._val};__$release_big$classdecl$var10.prototype.isClear=function(){return 0===this._val};QQ.Value=__$release_big$classdecl$var10;
var __$release_big$classdecl$var11=function(f,a,d){a=void 0===a?0:a;d=void 0===d?0:d;this._sprite=new QQ.Sprite(QQ.imgManager.get(f));this._width=a;this._height=d;this._y=this._x=this._canvasRatio=0;this._onClick=null;this._fixSize()};__$release_big$classdecl$var11.prototype.isHit=function(f,a){return QQ.Math.isInside(this.getRect(),f,a)};__$release_big$classdecl$var11.prototype.click=function(){this._onClick&&this._onClick()};
__$release_big$classdecl$var11.prototype.setClick=function(f){this._onClick=f};__$release_big$classdecl$var11.prototype.getRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};__$release_big$classdecl$var11.prototype.draw=function(){this._sprite.draw()};__$release_big$classdecl$var11.prototype.getPosition=function(){return{x:this._x,y:this._y}};__$release_big$classdecl$var11.prototype.getRatio=function(){return this._sprite.getRatio()};
__$release_big$classdecl$var11.prototype.getScale=function(){var f=this._sprite.getSize();return{x:this._width/f.width,y:this._height/f.height}};__$release_big$classdecl$var11.prototype.setPosition=function(f,a,d){void 0!==f&&(this._x=d?QQ.Math.calcPivotX(d,f,this._width):f);void 0!==a&&(this._y=d?QQ.Math.calcPivotY(d,a,this._height,-1):a)};__$release_big$classdecl$var11.prototype._fixSize=function(){if(0===this._height){var f=QQ.Hud.canvasRatio();this._height=this._width/this.getRatio()*f}};
QQ.Hud=__$release_big$classdecl$var11;QQ.Hud.canvasRatio=function(f){if(void 0!==f)QQ.Hud.canvasRatio.ratio=f;else return QQ.Hud.canvasRatio.ratio};var __$release_big$classdecl$var12=function(f,a){a=void 0===a?0:a;this._x=new QQ.Value(void 0===f?0:f);this._y=new QQ.Value(a)};__$release_big$classdecl$var12.prototype.x=function(f){return this.width(f)};__$release_big$classdecl$var12.prototype.X=function(f){return this.width(f)};__$release_big$classdecl$var12.prototype.w=function(f){return this.width(f)};
__$release_big$classdecl$var12.prototype.W=function(f){return this.width(f)};__$release_big$classdecl$var12.prototype.Width=function(f){return this.width(f)};__$release_big$classdecl$var12.prototype.width=function(f){return this._x.v(f)};__$release_big$classdecl$var12.prototype.y=function(f){return this.height(f)};__$release_big$classdecl$var12.prototype.Y=function(f){return this.height(f)};__$release_big$classdecl$var12.prototype.h=function(f){return this.height(f)};
__$release_big$classdecl$var12.prototype.H=function(f){return this.height(f)};__$release_big$classdecl$var12.prototype.Height=function(f){return this.height(f)};__$release_big$classdecl$var12.prototype.height=function(f){return this._y.v(f)};__$release_big$classdecl$var12.prototype.clear=function(){this._x.clear();this._y.clear()};__$release_big$classdecl$var12.prototype.set=function(f,a){this._x.v(f);this._y.v(a)};
__$release_big$classdecl$var12.prototype.isClear=function(){return this._x.isClear()&&this._y.isClear()};__$release_big$classdecl$var12.prototype.clearX=function(){this._x.clear()};__$release_big$classdecl$var12.prototype.clearY=function(){this._y.clear()};__$release_big$classdecl$var12.prototype.invertX=function(){this._x.invert()};__$release_big$classdecl$var12.prototype.invertY=function(){this._y.invert()};QQ.XY=__$release_big$classdecl$var12;
var __$release_big$classdecl$var13=function(){this._maxTicks=1;this._timeStep=.0166;this._deltaAccum=0;this._subjects=[];this._physics=this._background=null;this._pauseTime=.5;this._pauseable=!1;this._collisions=[]};__$release_big$classdecl$var13.prototype.setPauseable=function(f){this._pauseable=f};__$release_big$classdecl$var13.prototype.addBackground=function(f){this._background=new QQ.Subject(f)};
__$release_big$classdecl$var13.prototype.addSubject=function(f){this._subjects.push(f);f.isPhysicsBody()&&Matter.World.add(this._physics.world,[f.getPhysicsBody()])};__$release_big$classdecl$var13.prototype.deleteSubject=function(f){f=this._subjects.indexOf(f);this._subjects[f].isPhysicsBody()&&Matter.Composite.remove(this._physics.world,this._subjects[f].getPhysicsBody());0<f&&this._subjects.splice(f,1)};
__$release_big$classdecl$var13.prototype.getSubjectByPhysics=function(f){for(var a=$jscomp.makeIterator(this._subjects),d=a.next();!d.done;d=a.next())if(d=d.value,d.getPhysicsBody()===f)return d};
__$release_big$classdecl$var13.prototype.tick=function(f){this._deltaAccum+=f;f=0;if(this._deltaAccum<this._pauseTime)for(this._deltaAccum>(this._maxTicks+1)*this._timeStep&&(this._deltaAccum=this._maxTicks*this._timeStep+this._deltaAccum%this._timeStep);this._deltaAccum>this._timeStep;){this._deltaAccum-=this._timeStep;for(var a=$jscomp.makeIterator(this._subjects),d=a.next();!d.done;d=a.next())d.value.tick(this._timeStep);this._physics&&(this._collisions=[],Matter.Engine.update(this._physics,QQ.Math.secToMs(this._timeStep)));
f++}else this._deltaAccum=0,this._pauseable&&QQ.application.pause()};__$release_big$classdecl$var13.prototype.getPhysics=function(){return this._physics};
__$release_big$classdecl$var13.prototype.createPhysics=function(){var f=this;this._physics=Matter.Engine.create();this._physics.velocityIterations=4;this._physics.positionIterations=4;this._physics.world.gravity.y=-1;this._physics.timing.timeScale=1;var a=function(a){a=$jscomp.makeIterator(a.pairs);for(var d=a.next();!d.done;d=a.next())f._collisions.push(d.value)};Matter.Events.on(this._physics,"collisionStart",a);Matter.Events.on(this._physics,"collisionActive",a)};
__$release_big$classdecl$var13.prototype.getCollisions=function(){return this._collisions};__$release_big$classdecl$var13.prototype.getSubjectsInRect=function(f){var a=[];null!==this._background&&(this._background.fitInRect(f),a.push(this._background));for(var d=$jscomp.makeIterator(this._subjects),m=d.next();!m.done;m=d.next())m=m.value,QQ.Math.isIntersect(f,m.getRect())&&a.push(m);return a};
__$release_big$classdecl$var13.prototype.getSubjectAtPoint=function(f,a){for(var d=this._subjects.length-1;0<=d;--d){var m=this._subjects[d];if(QQ.Math.isInside(m.getRect(),f,a)&&m.isClickable())return m}};__$release_big$classdecl$var13.prototype.getSubjects=function(f){f=void 0===f?function(){return!0}:f;var a=[];this._subjects.forEach(function(d){f(d)&&a.push(d)});return a};QQ.World=__$release_big$classdecl$var13;
var __$release_big$classdecl$var14=function(){this._canvas=new QQ.Canvas("appCanvas",600,800);this._fpsCounter=new QQ.FpsCounter;this._time=new QQ.Time;this._mouse=new QQ.Mouse;this._touch=new QQ.Touch(this._mouse);this._frame=this._skipFrames=0;this._storage=window.localStorage};
__$release_big$classdecl$var14.prototype.init=function(){var f=this;QQ.Sprite.setContext(this._canvas.getContext());this._canvas.setOnCalcSize(function(){QQ.Hud.canvasRatio(f._canvas.getRatio())});QQ.seizures.set("MainMenu");this._mouse.setM1DownCB(function(){if(f._isMouseInCanvas()){var a=f._getMousePosition();QQ.seizures.click(a.x,a.y)}});this._mouse.setM1UpCB(function(){if(f._isMouseInCanvas()){var a=f._getMousePosition();QQ.seizures.clickUp(a.x,a.y)}});this._process()};
__$release_big$classdecl$var14.prototype.storage=function(f,a){if(a)this._storage.setItem(f,a);else return this._storage.getItem(f)};__$release_big$classdecl$var14.prototype.pause=function(){QQ.seizures.popUp("Pause")};__$release_big$classdecl$var14.prototype.getCanvas=function(){return this._canvas.getCanvas()};__$release_big$classdecl$var14.prototype.getContext=function(){return this._canvas.getContext()};__$release_big$classdecl$var14.prototype.isM1Pressed=function(){return this._mouse.getM1()};
__$release_big$classdecl$var14.prototype.getMouseXY=function(){return this._isMouseInCanvas()?this._getMousePosition():{x:-1,y:-1}};__$release_big$classdecl$var14.prototype.getTime=function(){return this._time};__$release_big$classdecl$var14.prototype._getMousePosition=function(){var f=this._canvas.getCanvas(),a=this._mouse.getX()-f.offsetLeft,f=this._mouse.getY()-f.offsetTop;return{x:a,y:f}};
__$release_big$classdecl$var14.prototype._isMouseInCanvas=function(){var f=this._canvas.getCanvas(),a=this._getMousePosition(),d=a.x,a=a.y,a=0<a&&a<f.height;return 0<d&&d<f.width&&a};__$release_big$classdecl$var14.prototype._process=function(f){requestAnimationFrame(this._process.bind(this));this._frame=++this._frame%(this._skipFrames+1);0===this._frame&&(this._tick(),this._draw())};__$release_big$classdecl$var14.prototype._tick=function(){var f=this._time.update();this._fpsCounter.tick(f);QQ.seizures.tick(f)};
__$release_big$classdecl$var14.prototype._draw=function(){QQ.seizures.draw();this._fpsCounter.show(this._canvas.getContext())};QQ.Application=__$release_big$classdecl$var14;QQ.levels=[];QQ.levelsOrder="begin easy jump twoStick async doubleTrouble bunny wall smallwall nowall allin pyramid".split(" ");var __$release_big$classdecl$var15=function(){this._reset=this._seizure=this._loading=null;this._seizures=[];this._popup=null};
__$release_big$classdecl$var15.prototype.init=function(){this._seizure=this._loading=new QQ.Seizures.SeizureLoading(QQ.application)};__$release_big$classdecl$var15.prototype.add=function(f,a){this._seizures[f]=a};__$release_big$classdecl$var15.prototype.popUp=function(f,a){this._popup=new this._seizures[f](QQ.application,a)};__$release_big$classdecl$var15.prototype.closePopUp=function(){this._popup=null};__$release_big$classdecl$var15.prototype.reset=function(){this._reset&&this._reset()};
__$release_big$classdecl$var15.prototype.set=function(f,a){var d=this;null!==this._loading&&(this._seizure=this._loading);this._reset=function(){return d.set(f,a)};this._seizure=new this._seizures[f](QQ.application,a)};__$release_big$classdecl$var15.prototype.tick=function(f){this._doForActive(function(a){return a.tick(f)})};__$release_big$classdecl$var15.prototype.draw=function(){this._seizure.draw();this._popup&&this._popup.draw()};
__$release_big$classdecl$var15.prototype.click=function(f,a){this._doForActive(function(d){d.click&&d.click(f,a)})};__$release_big$classdecl$var15.prototype.clickUp=function(f,a){this._doForActive(function(d){d.clickUp&&d.clickUp(f,a)})};__$release_big$classdecl$var15.prototype._doForActive=function(f){this._popup?f(this._popup):f(this._seizure)};QQ.Seizures=__$release_big$classdecl$var15;QQ.seizures=new QQ.Seizures;
var __$release_big$classdecl$var16=function(f){this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._world.addBackground("img/backgrounds/menu.png")};__$release_big$classdecl$var16.prototype.tick=function(f){this._world&&this._world.tick(f)};__$release_big$classdecl$var16.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)}};QQ.Seizures.SeizureLoading=__$release_big$classdecl$var16;
var __$release_big$classdecl$var17=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,-14);this._camera.setClip(0,0,-14,-41);this._world.addBackground("img/backgrounds/menu.png");var a=new QQ.Text("CREDITS",0,-4,3);this._world.addSubject(a);a=new QQ.Text(this._getText(),0,-7,28,QQ.Text.fit.WIDTH);a.setAlign("left");a.setFont("courier new");this._world.addSubject(a);this._addBackButton(0,0,QQ.Math.pivot.CENTERBOTTOM);this._addBackButton(0,-60,QQ.Math.pivot.CENTERBOTTOM);
a=new QQ.Subject(null,5,5);a.setPosition(10,-60,QQ.Math.pivot.CENTERBOTTOM);a.click=function(){return f._fpsCounter.showDetails()};this._world.addSubject(a)};__$release_big$classdecl$var17.prototype.tick=function(){var f=this._myApp.getMouseXY();this._camera.tickScroll(f.x,f.y,this._myApp.isM1Pressed())};__$release_big$classdecl$var17.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};
__$release_big$classdecl$var17.prototype.clickUp=function(f,a){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}};__$release_big$classdecl$var17.prototype._addBackButton=function(f,a,d){var m=new QQ.Subject("img/buttons/back.png",5,5);m.setPosition(f,a,d);m.click=function(){return QQ.seizures.set("MainMenu")};this._world.addSubject(m)};__$release_big$classdecl$var17.prototype._getText=function(){return'ART:\nKenney (http://kenney.nl)\nLicense CC0 (Creative Commons Zero)\n\nPhysics:\nmatter.js (http://brm.io/matter-js/)\nLicense The MIT License (MIT)\nCopyright (c) 2017\n\nPermission is hereby granted, \nfree of charge, to any person \nobtaining a copy of this software \nand associated documentation \nfiles (the "Software"), to deal\nin the Software without restriction, \nincluding without limitation the rights\nto use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell\ncopies of the Software, and to permit \npersons to whom the Software is\nfurnished to do so, subject to the \nfollowing conditions:\n\nThe above copyright notice and this \npermission notice shall be included \nin all copies or substantial portions \nof the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", \nWITHOUT WARRANTY OF ANY KIND, \nEXPRESS OR IMPLIED, INCLUDING BUT NOT \nLIMITED TO THE WARRANTIES OF MERCHANT\nABILITY, FITNESS FOR A PARTICULAR \nPURPOSE AND NONINFRINGEMENT. IN NO \nEVENT SHALL THE AUTHORS OR COPYRIGHT \nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES \nOR OTHER LIABILITY, WHETHER IN AN ACTION \nOF CONTRACT, TORT OR OTHERWISE, ARISING \nFROM, OUT OF OR IN CONNECTION WITH THE \nSOFTWARE OR THE USE OR OTHER  DEALINGS \nIN THE SOFTWARE.'};
QQ.seizures.add("Credits",__$release_big$classdecl$var17);var __$release_big$classdecl$var18=function(f){this._myApp=f;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._camera.setClip(0,0,0,0);this._world=new QQ.World;this._world.addBackground("img/backgrounds/menu.png");this._clickStart=!1;this._openedMax=3;this._opened=0;this._addLevels();f=new QQ.Subject("img/buttons/back.png",5,5);f.click=function(){return QQ.seizures.set("MainMenu")};f.setPosition(0,17);this._world.addSubject(f)};
__$release_big$classdecl$var18.prototype.tick=function(f){var a=this._myApp.getMouseXY(),d=this._myApp.isM1Pressed()&&this._clickStart;this._camera.tickScroll(a.x,a.y,d);this._world.tick(f)};__$release_big$classdecl$var18.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};__$release_big$classdecl$var18.prototype.click=function(){this._clickStart=!0};
__$release_big$classdecl$var18.prototype.clickUp=function(f,a){if(this._clickStart){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}this._clickStart=!1}};__$release_big$classdecl$var18.prototype._addLevels=function(){for(var f=QQ.levelsOrder.length,a=Math.ceil(f/4),d=0,m=0;m<a;++m)for(var b=0;4>b&&d<f;++b)++d,this._addLevel(-10.5+7*b,10-7*m,QQ.levelsOrder[d-1],d)};
__$release_big$classdecl$var18.prototype._addLevel=function(f,a,d,m){var b=this._myApp.storage("level"+d),l=QQ.Seizures.SeizureLevels.Level.STATUS,e=l.OPEN;"DONE"===b?e=l.DONE:this._opened<this._openedMax?++this._opened:e=l.CLOSED;this._world.addSubject(new __$release_big$classdecl$var18.Level(f,a,d,m,e))};QQ.Seizures.SeizureLevels=__$release_big$classdecl$var18;
var __$release_big$classdecl$var19=function(f,a,d,m,b){QQ.Subject.call(this,"img/buttons/level.png",5,5);this._name=d;this._status=b;this.setPosition(f,a);this._spriteCheck=null;b===__$release_big$classdecl$var19.STATUS.DONE?this._spriteCheck=new QQ.Sprite(QQ.imgManager.get("img/check.png")):b===__$release_big$classdecl$var19.STATUS.CLOSED&&(this._spriteCheck=new QQ.Sprite(QQ.imgManager.get("img/cross.png")));this._text=new QQ.Text(m);this._text.setLineHeight(30)};
$jscomp.inherits(__$release_big$classdecl$var19,QQ.Subject);__$release_big$classdecl$var19.prototype.click=function(){var f=this._status===__$release_big$classdecl$var19.STATUS.DONE;(this._status===__$release_big$classdecl$var19.STATUS.OPEN||f)&&QQ.seizures.set("Game",{cfg:QQ.levels[this._name],name:this._name})};__$release_big$classdecl$var19.prototype.draw=function(){QQ.Subject.prototype.draw.call(this);this._spriteCheck&&this._spriteCheck.draw();this._text.draw()};
QQ.Seizures.SeizureLevels.Level=__$release_big$classdecl$var19;QQ.Seizures.SeizureLevels.Level.STATUS={DONE:0,OPEN:1,CLOSED:2};QQ.seizures.add("Levels",QQ.Seizures.SeizureLevels);
var __$release_big$classdecl$var20=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,-14);this._camera.setClip(0,0,-14,-14);this._world.addBackground("img/backgrounds/menu.png");f=new QQ.Text("INTRO",0,-4,3);this._world.addSubject(f);f=new QQ.Text(this._getText(),0,-7,28,QQ.Text.fit.WIDTH);f.setAlign("left");f.setLineSpace(20);this._world.addSubject(f);this._addBackButton(0,0,QQ.Math.pivot.CENTERBOTTOM)};
__$release_big$classdecl$var20.prototype.tick=function(){var f=this._myApp.getMouseXY();this._camera.tickScroll(f.x,f.y,this._myApp.isM1Pressed())};__$release_big$classdecl$var20.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};__$release_big$classdecl$var20.prototype.clickUp=function(f,a){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}};
__$release_big$classdecl$var20.prototype._addBackButton=function(f,a,d){var m=new QQ.Subject("img/buttons/back.png",5,5);m.setPosition(f,a,d);m.click=function(){return QQ.seizures.set("MainMenu")};this._world.addSubject(m)};__$release_big$classdecl$var20.prototype._getText=function(){return"    Lots of animal living on earth. They like earth,\nbut all of them wants to live in SPACE ZOO.\nEvery year spaceship is comming to earth \nto get some animals to SPACE ZOO.\nOnly you can help them to get to it.\nHelp this little creatures to rech space ship.\nJust tap on screen to help animals.\nThank you"};
QQ.seizures.add("Intro",__$release_big$classdecl$var20);
var __$release_big$classdecl$var21=function(f){this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._world.addBackground("img/backgrounds/menu.png");f=new QQ.Text("JUMPEXELS",0,15,3);this._world.addSubject(f);f=new QQ.Subject("img/logo.png",10,10);f.click=function(){return QQ.seizures.set("Levels")};f.setPosition(0,6);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Levels")};f.setPosition(0,0);this._world.addSubject(f);
f=new QQ.Text("PLAY",0,0,2);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Intro")};f.setPosition(0,-6);this._world.addSubject(f);f=new QQ.Text("INTRO",0,-6,2);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Credits")};f.setPosition(0,-12);this._world.addSubject(f);f=new QQ.Text("CREDITS",0,-12,2);this._world.addSubject(f)};
__$release_big$classdecl$var21.prototype.tick=function(f){this._world&&this._world.tick(f)};__$release_big$classdecl$var21.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)}};__$release_big$classdecl$var21.prototype.click=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()};QQ.seizures.add("MainMenu",__$release_big$classdecl$var21);
var __$release_big$classdecl$var22=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._click=!1;this._world.addBackground("img/dialog.png");f=new QQ.Subject("img/buttons/next.png",5,5);f.setPosition(-6,6);f.click=function(){return QQ.seizures.closePopUp()};this._world.addSubject(f);f=new QQ.Subject("img/buttons/restart.png",5,5);f.setPosition(0,6);f.click=function(){QQ.seizures.closePopUp();QQ.seizures.reset()};this._world.addSubject(f);f=new QQ.Subject("img/buttons/exit.png",
5,5);f.setPosition(6,6);f.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Levels")};this._world.addSubject(f);f=new QQ.Text("Pause",0,11,3);this._world.addSubject(f)};__$release_big$classdecl$var22.prototype.tick=function(){};__$release_big$classdecl$var22.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};__$release_big$classdecl$var22.prototype.click=function(){this._click=!0};
__$release_big$classdecl$var22.prototype.clickUp=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&this._click&&d.click();this._click=!1};QQ.seizures.add("Pause",__$release_big$classdecl$var22);
var __$release_big$classdecl$var23=function(f,a){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._click=!1;this._world.addBackground("img/dialog.png");var d=new QQ.Text("Congratulations\n\nYou have won!",0,13,1.3);this._world.addSubject(d);d=QQ.levelsOrder.indexOf(a)+1;if(d<QQ.levelsOrder.length){var m=QQ.levelsOrder[d],d=new QQ.Subject("img/buttons/forward.png",5,5);d.setPosition(-6,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Game",
{cfg:QQ.levels[m],name:m})};this._world.addSubject(d)}d=new QQ.Subject("img/buttons/restart.png",5,5);d.setPosition(0,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.reset()};this._world.addSubject(d);d=new QQ.Subject("img/buttons/exit.png",5,5);d.setPosition(6,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Levels")};this._world.addSubject(d)};__$release_big$classdecl$var23.prototype.tick=function(){};
__$release_big$classdecl$var23.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};__$release_big$classdecl$var23.prototype.click=function(){this._click=!0};__$release_big$classdecl$var23.prototype.clickUp=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&this._click&&d.click();this._click=!1};QQ.seizures.add("EndLevel",__$release_big$classdecl$var23);
var __$release_big$classdecl$var24=function(f,a){this._app=f;this._name=a.name;this._huds=[];this._world=new QQ.World;this._camera=null;this._isFinish=!1;this._world.setPauseable(!0);this._world.createPhysics();this._camera=new QQ.Camera(f.getCanvas(),a.cfg.camera.size.w,a.cfg.camera.size.h,a.cfg.camera.lookAt.x,a.cfg.camera.lookAt.y);this._world.addBackground(a.cfg.backGround.img);this._world.addSubject(new __$release_big$classdecl$var24.EscapeShip(a.cfg.escapeShip,this));for(var d=$jscomp.makeIterator(a.cfg.grounds),
m=d.next();!m.done;m=d.next())this._world.addSubject(new __$release_big$classdecl$var24.Ground(m.value));d=$jscomp.makeIterator(a.cfg.ramps);for(m=d.next();!m.done;m=d.next())this._world.addSubject(new __$release_big$classdecl$var24.Ramp(m.value));d=$jscomp.makeIterator(a.cfg.aliens);for(m=d.next();!m.done;m=d.next())this._world.addSubject(new __$release_big$classdecl$var24.Alien(m.value,this));d=new QQ.Hud("img/buttons/back.png",15);d.setPosition(1,1,QQ.Math.pivot.LEFTTOP);d.setClick(function(){return QQ.seizures.popUp("Pause")});
this._huds.push(d)};__$release_big$classdecl$var24.prototype.tick=function(f){var a=this;0!==this._getSubjectsByType("alien").length||this._isFinish||(this._isFinish=!0,this._app.storage("level"+this._name,"DONE"),setTimeout(function(){return QQ.seizures.popUp("EndLevel",a._name)},500));this._world&&this._world.tick(f)};__$release_big$classdecl$var24.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f);this._camera.drawHud(this._huds)}};
__$release_big$classdecl$var24.prototype.click=function(f,a){if(!this._isFinish)for(var d=$jscomp.makeIterator(this._huds),m=d.next();!m.done;m=d.next())m=m.value,m.isHit(this._camera.widthToPercent(f),this._camera.heightToPercent(a))&&m.click()};__$release_big$classdecl$var24.prototype.getWorld=function(){return this._world};__$release_big$classdecl$var24.prototype.getWorldPhysics=function(){return this._world.getPhysics()};
__$release_big$classdecl$var24.prototype.getSurfaces=function(){var f=this._getSubjectsByType("ground"),a=this._getSubjectsByType("ramp");return[].concat(f,a)};__$release_big$classdecl$var24.prototype.getApp=function(){return this._app};__$release_big$classdecl$var24.prototype._getSubjectsByType=function(f){return this._world.getSubjects(function(a){return a.type()===f})};QQ.Seizures.SeizureGame=__$release_big$classdecl$var24;QQ.seizures.add("Game",QQ.Seizures.SeizureGame);
var __$release_big$classdecl$var25=function(f,a){QQ.Subject.call(this,"img/aliens/parrot.png",50,50);this.setPosition(f.pos.x,f.pos.y,QQ.Math.pivot.CENTERBOTTOM);this.setPhysics(f.pos.x,f.pos.y,50,50);this._game=a;this._timeToEscape=300;this._startEscape=0;this._jumped=!1;this.tick(0)};$jscomp.inherits(__$release_big$classdecl$var25,QQ.Subject);__$release_big$classdecl$var25.prototype.escape=function(){0===this._startEscape&&(this._startEscape=Date.now())};
__$release_big$classdecl$var25.prototype.jump=function(){for(var f=this._physicsBody,a=this._game.getSurfaces(),d=[],a=$jscomp.makeIterator(a),m=a.next();!m.done;m=a.next())d.push(m.value.getPhysicsBody());a=this._game.getWorld().getCollisions();a=$jscomp.makeIterator(a);for(m=a.next();!m.done;m=a.next()){var b=m.value,m=b.bodyA===f&&b.bodyA.position.y>b.bodyB.bounds.max.y&&d.includes(b.bodyB),b=b.bodyB===f&&b.bodyB.position.y>b.bodyA.bounds.max.y&&d.includes(b.bodyA);if(m||b)Matter.Body.setVelocity(f,
{x:1.5*f.velocity.x,y:10}),1E-5>f.angularSpeed&&(m=QQ.Math.rand(-1,1)/1E3,Matter.Body.setAngularVelocity(f,m)),this._jumped=!0}};__$release_big$classdecl$var25.prototype.tick=function(f){if(0<this._startEscape){var a=1-QQ.Math.calcProgress(this._startEscape,this._timeToEscape);this.setAlpha(a);0===a&&this._game.getWorld().deleteSubject(this)}else this._game.getApp().isM1Pressed()&&!this._jumped&&this.jump(),!this._game.getApp().isM1Pressed()&&this._jumped&&(this._jumped=!1);this._physicsTick(f)};
__$release_big$classdecl$var25.prototype.type=function(){return"alien"};QQ.Seizures.SeizureGame.Alien=__$release_big$classdecl$var25;
var __$release_big$classdecl$var26=function(f,a){QQ.Subject.call(this,"img/spaceShip.png",f.size.w,f.size.h);var d=this;this.setDefaultPhysics({isStatic:!0,isSensor:!0});var m=a.getWorld();this._time=this._a=0;this._pivot=f.pos;this._travel=f.travel;this._period=f.period;Matter.Events.on(a.getWorldPhysics(),"collisionStart",function(a){a=a.pairs;for(var b=d.getPhysicsBody(),e=0,f=a.length;e!==f;++e){var k=a[e],t=null;k.bodyA===b?t=m.getSubjectByPhysics(k.bodyB):k.bodyB===b&&(t=m.getSubjectByPhysics(k.bodyA));
t&&t.escape()}});this.tick(0)};$jscomp.inherits(__$release_big$classdecl$var26,QQ.Subject);__$release_big$classdecl$var26.prototype.tick=function(f){this._time+=f;this._time=QQ.Math.devidePeriod(this._time,this._period);this._a=this._time/this._period*QQ.Math.PIx2;Matter.Body.setPosition(this.getPhysicsBody(),{x:this._pivot.x+this._travel.w*Math.sin(this._a),y:this._pivot.y+this._travel.h*Math.sin(2*this._a)});this._physicsTick(f)};__$release_big$classdecl$var26.prototype.type=function(){return"escapeShip"};
QQ.Seizures.SeizureGame.EscapeShip=__$release_big$classdecl$var26;var __$release_big$classdecl$var27=function(f){QQ.Subject.call(this,"img/earth.png",f.size.w,f.size.h);this.setPosition(f.pos.x,f.pos.y,QQ.Math.pivot.CENTERTOP);this.setDefaultPhysics({isStatic:!0})};$jscomp.inherits(__$release_big$classdecl$var27,QQ.Subject);__$release_big$classdecl$var27.prototype.type=function(){return"ground"};QQ.Seizures.SeizureGame.Ground=__$release_big$classdecl$var27;
var __$release_big$classdecl$var28=function(f){QQ.Subject.call(this,"img/ramp.png",f.size.w,f.size.h);this.setDefaultPhysics({isStatic:!0});this._time=f.time||0;this._prev={x:0,y:0};f.pos?(this._pivot={x:f.pos.x,y:f.pos.y},this._period=f.period,this._range=f.travel):(this._f=f.f,Matter.Body.setPosition(this._physicsBody,this._f(0)));this.tick(0)};$jscomp.inherits(__$release_big$classdecl$var28,QQ.Subject);
__$release_big$classdecl$var28.prototype.tick=function(f){this._time+=f;var a={};this._f?a=this._f(this._time):(this._a=this._time/this._period*QQ.Math.PIx2,a.x=this._pivot.x+this._range*Math.sin(this._a),a.y=this._pivot.y);Matter.Body.setVelocity(this._physicsBody,{x:a.x-this._prev.x,y:a.y-this._prev.y});Matter.Body.setPosition(this._physicsBody,a);this._prev=a;this._physicsTick(f)};__$release_big$classdecl$var28.prototype.type=function(){return"ramp"};QQ.Seizures.SeizureGame.Ramp=__$release_big$classdecl$var28;
QQ.levels.allin={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:50,period:2},{pos:{x:0,y:200},size:{w:30,h:15},travel:40,period:1}],aliens:[{pos:{x:0,y:60}},{pos:{x:75,y:60}},{pos:{x:-75,y:60}},
{pos:{x:150,y:60}},{pos:{x:-150,y:60}},{pos:{x:0,y:160}},{pos:{x:75,y:160}},{pos:{x:-75,y:160}},{pos:{x:150,y:160}},{pos:{x:-150,y:160}},{pos:{x:0,y:260}},{pos:{x:75,y:260}},{pos:{x:-75,y:260}},{pos:{x:150,y:260}},{pos:{x:-150,y:260}}]};
QQ.levels.async={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:-100,y:400},travel:{w:5,h:5},period:10},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-100,y:100},size:{w:100,h:15},travel:80,time:2,period:4},{pos:{x:100,y:220},size:{w:100,h:15},travel:60,time:2.5,period:3}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.begin={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:300},travel:{w:70,h:50},period:10},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.bunny={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:280},travel:{w:10,h:40},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-200,y:150},size:{w:15,h:15},travel:0,period:1}],aliens:[{pos:{x:-180,y:60}}]};
QQ.levels.doubleTrouble={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:50,period:2},{pos:{x:0,y:200},size:{w:30,h:15},travel:40,period:1}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.easy={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:300},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:100,period:5}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.jump={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:140,h:140},pos:{x:130,y:300},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-80,y:100},size:{w:100,h:15},travel:80,period:2.5}],aliens:[{pos:{x:-150,y:60}}]};
QQ.levels.pyramid={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:420},size:{w:720,h:960}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:850},travel:{w:10,h:3},period:5},grounds:[{pos:{x:0,y:0},size:{w:800,h:100}},{pos:{x:450,y:500},size:{w:100,h:600}},{pos:{x:-450,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:220,h:15},travel:150,period:8},{pos:{x:0,y:210},size:{w:180,h:15},travel:100,period:7},{pos:{x:0,y:320},size:{w:140,h:15},travel:80,period:6},{pos:{x:0,
y:430},size:{w:100,h:15},travel:60,period:4},{pos:{x:0,y:540},size:{w:60,h:15},travel:40,period:2},{pos:{x:0,y:650},size:{w:20,h:15},travel:20,period:1}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.test={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:-400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.twoStick={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:100,period:5},{pos:{x:0,y:210},size:{w:100,h:15},travel:100,time:2.5,period:5}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.wall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-200,y:500},size:{w:100,h:500}},{pos:{x:-125,y:200},size:{w:50,h:50}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:50-160*
Math.sin(f/7*QQ.Math.PIx2),y:330}}}],aliens:[{pos:{x:0,y:25}}]};
QQ.levels.nowall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-110,y:200},size:{w:15,h:15}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:10-
150*Math.sin(f/5*QQ.Math.PIx2),y:315}}}],aliens:[{pos:{x:0,y:25}}]};
QQ.levels.smallwall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-180,y:500},size:{w:150,h:500}},{pos:{x:-100,y:200},size:{w:5,h:50}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:50+
100*Math.sin(f/6*QQ.Math.PIx2),y:330}}}],aliens:[{pos:{x:0,y:25}}]};
window.addEventListener("load",function(){QQ.imgManager.get("img/aliens/parrot.png");QQ.imgManager.get("img/backgrounds/castle.png");QQ.imgManager.get("img/backgrounds/menu.png");QQ.imgManager.get("img/buttons/back.png");QQ.imgManager.get("img/buttons/exit.png");QQ.imgManager.get("img/buttons/forward.png");QQ.imgManager.get("img/buttons/level.png");QQ.imgManager.get("img/buttons/long.png");QQ.imgManager.get("img/buttons/next.png");QQ.imgManager.get("img/buttons/restart.png");QQ.imgManager.get("img/check.png");
QQ.imgManager.get("img/cross.png");QQ.imgManager.get("img/dialog.png");QQ.imgManager.get("img/earth.png");QQ.imgManager.get("img/logo.png");QQ.imgManager.get("img/ramp.png");QQ.imgManager.get("img/spaceShip.png");(function a(){QQ.imgManager.isAllReady()?(QQ.application=new QQ.Application,QQ.seizures.init(),QQ.application.init()):setTimeout(a,10)})()});
