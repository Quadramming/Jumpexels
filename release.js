var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,a,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[a]=d.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var a=0;return $jscomp.iteratorPrototype(function(){return a<f.length?{done:!1,value:f[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();var a=f[Symbol.iterator];return a?a.call(f):$jscomp.arrayIterator(f)};
$jscomp.inherits=function(f,a){function d(){}d.prototype=a.prototype;f.prototype=new d;f.prototype.constructor=f;for(var m in a)if(Object.defineProperties){var b=Object.getOwnPropertyDescriptor(a,m);b&&Object.defineProperty(f,m,b)}else f[m]=a[m]};window.QQ=window.QQ||{};window.QQ.Debug={log:function(f){console.log(f)}};window.c=function(f){window.QQ.Debug.log(f)};c("Using QQ.Debug:");c("function c(str) - Quick log");
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Matter=f()})(function(){return function a(d,m,b){function l(e,k){if(!m[e]){if(!d[e]){var q="function"==typeof require&&require;if(!k&&q)return q(e,!0);if(g)return g(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q;}q=m[e]={exports:{}};
d[e][0].call(q.exports,function(b){var p=d[e][1][b];return l(p?p:b)},q,q.exports,a,d,m,b)}return m[e].exports}for(var g="function"==typeof require&&require,k=0;k<b.length;k++)l(b[k]);return l}({1:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=a("../geometry/Vector"),k=a("../core/Sleeping");a("../render/Render");var e=a("../core/Common"),t=a("../geometry/Bounds"),q=a("../geometry/Axes");(function(){b._inertiaScale=4;b._nextCollidingGroupId=1;b._nextNonCollidingGroupId=-1;b._nextCategory=
1;b.create=function(p){var a={id:e.nextId(),type:"body",label:"Body",parts:[],angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,
group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:1.5}},a=e.extend(a,p);p=p||{};b.set(a,{bounds:a.bounds||t.create(a.vertices),positionPrev:a.positionPrev||g.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a});l.rotate(a.vertices,a.angle,a.position);q.rotate(a.axes,a.angle);t.update(a.bounds,a.vertices,a.velocity);b.set(a,{axes:p.axes||
a.axes,area:p.area||a.area,mass:p.mass||a.mass,inertia:p.inertia||a.inertia});p=a.isStatic?"#eeeeee":e.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]);var h=e.shadeColor(p,-20);a.render.fillStyle=a.render.fillStyle||p;a.render.strokeStyle=a.render.strokeStyle||h;a.render.sprite.xOffset+=-(a.bounds.min.x-a.position.x)/(a.bounds.max.x-a.bounds.min.x);a.render.sprite.yOffset+=-(a.bounds.min.y-a.position.y)/(a.bounds.max.y-a.bounds.min.y);return a};b.nextGroup=function(a){return a?b._nextNonCollidingGroupId--:
b._nextCollidingGroupId++};b.nextCategory=function(){b._nextCategory<<=1;return b._nextCategory};b.set=function(a,g,h){var p;"string"===typeof g&&(p=g,g={},g[p]=h);for(p in g)if(h=g[p],g.hasOwnProperty(p))switch(p){case "isStatic":b.setStatic(a,h);break;case "isSleeping":k.set(a,h);break;case "mass":b.setMass(a,h);break;case "density":b.setDensity(a,h);break;case "inertia":b.setInertia(a,h);break;case "vertices":b.setVertices(a,h);break;case "position":b.setPosition(a,h);break;case "angle":b.setAngle(a,
h);break;case "velocity":b.setVelocity(a,h);break;case "angularVelocity":b.setAngularVelocity(a,h);break;case "parts":b.setParts(a,h);break;default:a[p]=h}};b.setStatic=function(a,b){for(var h=0;h<a.parts.length;h++){var p=a.parts[h];if(p.isStatic=b)p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=Infinity,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0}};b.setMass=function(a,
b){a.mass=b;a.inverseMass=1/a.mass;a.density=a.mass/a.area};b.setDensity=function(a,g){b.setMass(a,g*a.area);a.density=g};b.setInertia=function(a,b){a.inertia=b;a.inverseInertia=1/a.inertia};b.setVertices=function(a,g){a.vertices=g[0].body===a?g:l.create(g,a);a.axes=q.fromVertices(a.vertices);a.area=l.area(a.vertices);b.setMass(a,a.density*a.area);var h=l.centre(a.vertices);l.translate(a.vertices,h,-1);b.setInertia(a,b._inertiaScale*l.inertia(a.vertices,a.mass));l.translate(a.vertices,a.position);
t.update(a.bounds,a.vertices,a.velocity)};b.setParts=function(g,e,h){var p;e=e.slice(0);g.parts.length=0;g.parts.push(g);g.parent=g;for(p=0;p<e.length;p++){var n=e[p];n!==g&&(n.parent=g,g.parts.push(n))}if(1!==g.parts.length){if("undefined"!==typeof h?h:1){h=[];for(p=0;p<e.length;p++)h=h.concat(e[p].vertices);l.clockwiseSort(h);e=l.hull(h);p=l.centre(e);b.setVertices(g,e);l.translate(g.vertices,p)}e=a(g);g.area=e.area;g.parent=g;g.position.x=e.centre.x;g.position.y=e.centre.y;g.positionPrev.x=e.centre.x;
g.positionPrev.y=e.centre.y;b.setMass(g,e.mass);b.setInertia(g,e.inertia);b.setPosition(g,e.centre)}};b.setPosition=function(a,b){var h=g.sub(b,a.position);a.positionPrev.x+=h.x;a.positionPrev.y+=h.y;for(var e=0;e<a.parts.length;e++){var p=a.parts[e];p.position.x+=h.x;p.position.y+=h.y;l.translate(p.vertices,h);t.update(p.bounds,p.vertices,a.velocity)}};b.setAngle=function(a,b){var h=b-a.angle;a.anglePrev+=h;for(var e=0;e<a.parts.length;e++){var p=a.parts[e];p.angle+=h;l.rotate(p.vertices,h,a.position);
q.rotate(p.axes,h);t.update(p.bounds,p.vertices,a.velocity);0<e&&g.rotateAbout(p.position,h,a.position,p.position)}};b.setVelocity=function(a,b){a.positionPrev.x=a.position.x-b.x;a.positionPrev.y=a.position.y-b.y;a.velocity.x=b.x;a.velocity.y=b.y;a.speed=g.magnitude(a.velocity)};b.setAngularVelocity=function(a,b){a.anglePrev=a.angle-b;a.angularVelocity=b;a.angularSpeed=Math.abs(a.angularVelocity)};b.translate=function(a,e){b.setPosition(a,g.add(a.position,e))};b.rotate=function(a,g){b.setAngle(a,
a.angle+g)};b.scale=function(g,e,h,n){for(n=0;n<g.parts.length;n++){var p=g.parts[n];l.scale(p.vertices,e,h,g.position);p.axes=q.fromVertices(p.vertices);g.isStatic||(p.area=l.area(p.vertices),b.setMass(p,g.density*p.area),l.translate(p.vertices,{x:-p.position.x,y:-p.position.y}),b.setInertia(p,l.inertia(p.vertices,p.mass)),l.translate(p.vertices,{x:p.position.x,y:p.position.y}));t.update(p.bounds,p.vertices,g.velocity)}g.circleRadius&&(g.circleRadius=e===h?g.circleRadius*e:null);g.isStatic||(e=a(g),
g.area=e.area,b.setMass(g,e.mass),b.setInertia(g,e.inertia))};b.update=function(a,b,h,e){b=Math.pow(b*h*a.timeScale,2);h=1-a.frictionAir*h*a.timeScale;var n=a.position.y-a.positionPrev.y;a.velocity.x=(a.position.x-a.positionPrev.x)*h*e+a.force.x/a.mass*b;a.velocity.y=n*h*e+a.force.y/a.mass*b;a.positionPrev.x=a.position.x;a.positionPrev.y=a.position.y;a.position.x+=a.velocity.x;a.position.y+=a.velocity.y;a.angularVelocity=(a.angle-a.anglePrev)*h*e+a.torque/a.inertia*b;a.anglePrev=a.angle;a.angle+=
a.angularVelocity;a.speed=g.magnitude(a.velocity);a.angularSpeed=Math.abs(a.angularVelocity);for(e=0;e<a.parts.length;e++)b=a.parts[e],l.translate(b.vertices,a.velocity),0<e&&(b.position.x+=a.velocity.x,b.position.y+=a.velocity.y),0!==a.angularVelocity&&(l.rotate(b.vertices,a.angularVelocity,a.position),q.rotate(b.axes,a.angularVelocity),0<e&&g.rotateAbout(b.position,a.angularVelocity,a.position,b.position)),t.update(b.bounds,b.vertices,a.velocity)};b.applyForce=function(a,b,h){a.force.x+=h.x;a.force.y+=
h.y;a.torque+=(b.x-a.position.x)*h.y-(b.y-a.position.y)*h.x};var a=function(a){for(var b={mass:0,area:0,inertia:0,centre:{x:0,y:0}},h=1===a.parts.length?0:1;h<a.parts.length;h++){var e=a.parts[h];b.mass+=e.mass;b.area+=e.area;b.inertia+=e.inertia;b.centre=g.add(b.centre,g.mult(e.position,Infinity!==e.mass?e.mass:1))}b.centre=g.div(b.centre,Infinity!==b.mass?b.mass:a.parts.length);return b}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,
"../geometry/Vertices":29,"../render/Render":31}],2:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Events"),g=a("../core/Common"),k=a("./Body");(function(){b.create=function(a){return g.extend({id:g.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite"},a)};b.setModified=function(a,g,k,n){a.isModified=g;k&&a.parent&&b.setModified(a.parent,g,k,n);if(n)for(var e=0;e<a.composites.length;e++)b.setModified(a.composites[e],g,k,n)};b.add=function(a,
k){var e=[].concat(k);l.trigger(a,"beforeAdd",{object:k});for(var n=0;n<e.length;n++){var p=e[n];switch(p.type){case "body":if(p.parent!==p){g.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}b.addBody(a,p);break;case "constraint":b.addConstraint(a,p);break;case "composite":b.addComposite(a,p);break;case "mouseConstraint":b.addConstraint(a,p.constraint)}}l.trigger(a,"afterAdd",{object:k});return a};b.remove=function(a,g,k){var e=[].concat(g);l.trigger(a,
"beforeRemove",{object:g});for(var p=0;p<e.length;p++){var q=e[p];switch(q.type){case "body":b.removeBody(a,q,k);break;case "constraint":b.removeConstraint(a,q,k);break;case "composite":b.removeComposite(a,q,k);break;case "mouseConstraint":b.removeConstraint(a,q.constraint)}}l.trigger(a,"afterRemove",{object:g});return a};b.addComposite=function(a,g){a.composites.push(g);g.parent=a;b.setModified(a,!0,!0,!1);return a};b.removeComposite=function(a,k,q){var e=g.indexOf(a.composites,k);-1!==e&&(b.removeCompositeAt(a,
e),b.setModified(a,!0,!0,!1));if(q)for(q=0;q<a.composites.length;q++)b.removeComposite(a.composites[q],k,!0);return a};b.removeCompositeAt=function(a,g){a.composites.splice(g,1);b.setModified(a,!0,!0,!1);return a};b.addBody=function(a,g){a.bodies.push(g);b.setModified(a,!0,!0,!1);return a};b.removeBody=function(a,k,q){var e=g.indexOf(a.bodies,k);-1!==e&&(b.removeBodyAt(a,e),b.setModified(a,!0,!0,!1));if(q)for(q=0;q<a.composites.length;q++)b.removeBody(a.composites[q],k,!0);return a};b.removeBodyAt=
function(a,g){a.bodies.splice(g,1);b.setModified(a,!0,!0,!1);return a};b.addConstraint=function(a,g){a.constraints.push(g);b.setModified(a,!0,!0,!1);return a};b.removeConstraint=function(a,k,q){var e=g.indexOf(a.constraints,k);-1!==e&&b.removeConstraintAt(a,e);if(q)for(q=0;q<a.composites.length;q++)b.removeConstraint(a.composites[q],k,!0);return a};b.removeConstraintAt=function(a,g){a.constraints.splice(g,1);b.setModified(a,!0,!0,!1);return a};b.clear=function(a,g,k){if(k)for(k=0;k<a.composites.length;k++)b.clear(a.composites[k],
g,!0);g?a.bodies=a.bodies.filter(function(a){return a.isStatic}):a.bodies.length=0;a.constraints.length=0;a.composites.length=0;b.setModified(a,!0,!0,!1);return a};b.allBodies=function(a){for(var g=[].concat(a.bodies),e=0;e<a.composites.length;e++)g=g.concat(b.allBodies(a.composites[e]));return g};b.allConstraints=function(a){for(var g=[].concat(a.constraints),e=0;e<a.composites.length;e++)g=g.concat(b.allConstraints(a.composites[e]));return g};b.allComposites=function(a){for(var g=[].concat(a.composites),
e=0;e<a.composites.length;e++)g=g.concat(b.allComposites(a.composites[e]));return g};b.get=function(a,g,k){var e;switch(k){case "body":e=b.allBodies(a);break;case "constraint":e=b.allConstraints(a);break;case "composite":e=b.allComposites(a).concat(a)}if(!e)return null;a=e.filter(function(a){return a.id.toString()===g.toString()});return 0===a.length?null:a[0]};b.move=function(a,g,k){b.remove(a,g);b.add(k,g);return a};b.rebase=function(a){for(var e=b.allBodies(a).concat(b.allConstraints(a)).concat(b.allComposites(a)),
k=0;k<e.length;k++)e[k].id=g.nextId();b.setModified(a,!0,!0,!1);return a};b.translate=function(a,g,q){q=q?b.allBodies(a):a.bodies;for(var e=0;e<q.length;e++)k.translate(q[e],g);b.setModified(a,!0,!0,!1);return a};b.rotate=function(a,g,q,n){var e=Math.cos(g),d=Math.sin(g);n=n?b.allBodies(a):a.bodies;for(var h=0;h<n.length;h++){var l=n[h],u=l.position.x-q.x,r=l.position.y-q.y;k.setPosition(l,{x:q.x+(u*e-r*d),y:q.y+(u*d+r*e)});k.rotate(l,g)}b.setModified(a,!0,!0,!1);return a};b.scale=function(a,g,q,
n,p){p=p?b.allBodies(a):a.bodies;for(var e=0;e<p.length;e++){var h=p[e];k.setPosition(h,{x:n.x+(h.position.x-n.x)*g,y:n.y+(h.position.y-n.y)*q});k.scale(h,g,q)}b.setModified(a,!0,!0,!1);return a}})()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(a,d,m){var b={};d.exports=b;var l=a("./Composite");a("../constraint/Constraint");var g=a("../core/Common");(function(){b.create=function(a){var b=l.create();return g.extend(b,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,
y:-Infinity},max:{x:Infinity,y:Infinity}}},a)}})()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a){return{id:b.id(a),vertex:a,normalImpulse:0,tangentImpulse:0}};b.id=function(a){return a.body.id+"_"+a.index}})()},{}],5:[function(a,d,m){var b={};d.exports=b;var l=a("./SAT"),g=a("./Pair"),k=a("../geometry/Bounds");(function(){b.collisions=function(a,d){for(var e=[],n=d.pairs.table,p=0;p<a.length;p++){var w=
a[p][0],h=a[p][1];if((!w.isStatic&&!w.isSleeping||!h.isStatic&&!h.isSleeping)&&b.canCollide(w.collisionFilter,h.collisionFilter)&&k.overlaps(w.bounds,h.bounds))for(var x=1<w.parts.length?1:0;x<w.parts.length;x++)for(var u=w.parts[x],r=1<h.parts.length?1:0;r<h.parts.length;r++){var v=h.parts[r];if(u===w&&v===h||k.overlaps(u.bounds,v.bounds)){var t=g.id(u,v),t=n[t],v=l.collides(u,v,t&&t.isActive?t.collision:null);v.collided&&e.push(v)}}}return e};b.canCollide=function(a,b){return a.group===b.group&&
0!==a.group?0<a.group:0!==(a.mask&b.category)&&0!==(b.mask&a.category)}})()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(a,d,m){var b={};d.exports=b;var l=a("./Pair"),g=a("./Detector"),k=a("../core/Common");(function(){b.create=function(a){return k.extend({controller:b,detector:g.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},a)};b.update=function(b,g,e,p){var n,h,d=e.world,u=b.buckets,r,q;n=!1;for(e=0;e<g.length;e++){var t=g[e];if(!(t.isSleeping&&!p||
t.bounds.max.x<d.bounds.min.x||t.bounds.min.x>d.bounds.max.x||t.bounds.max.y<d.bounds.min.y||t.bounds.min.y>d.bounds.max.y)){var z;z=t.bounds;z=a(Math.floor(z.min.x/b.bucketWidth),Math.floor(z.max.x/b.bucketWidth),Math.floor(z.min.y/b.bucketHeight),Math.floor(z.max.y/b.bucketHeight));if(!t.region||z.id!==t.region.id||p){if(!t.region||p)t.region=z;var m;n=t.region;m=a(Math.min(z.startCol,n.startCol),Math.max(z.endCol,n.endCol),Math.min(z.startRow,n.startRow),Math.max(z.endRow,n.endRow));for(n=m.startCol;n<=
m.endCol;n++)for(h=m.startRow;h<=m.endRow;h++){q=n+","+h;r=u[q];var y=n>=z.startCol&&n<=z.endCol&&h>=z.startRow&&h<=z.endRow,D=n>=t.region.startCol&&n<=t.region.endCol&&h>=t.region.startRow&&h<=t.region.endRow;if(!y&&D&&D&&r){var F=b,E=r,A=t;E.splice(k.indexOf(E,A),1);for(var B=0;B<E.length;B++){var C=l.id(A,E[B]);(C=F.pairs[C])&&--C[2]}}if(t.region===z||y&&!D||p){r||(r=u[q]=[]);q=b;y=t;for(D=0;D<r.length;D++)F=r[D],y.id===F.id||y.isStatic&&F.isStatic||(E=l.id(y,F),(A=q.pairs[E])?A[2]+=1:q.pairs[E]=
[y,F,1]);r.push(y)}}t.region=z;n=!0}}}if(n){e=[];g=k.keys(b.pairs);for(d=0;d<g.length;d++)p=b.pairs[g[d]],0<p[2]?e.push(p):delete b.pairs[g[d]];b.pairsList=e}};b.clear=function(a){a.buckets={};a.pairs={};a.pairsList=[]};var a=function(a,b,g,e){return{id:a+","+b+","+g+","+e,startCol:a,endCol:b,startRow:g,endRow:e}}})()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(a,d,m){var b={};d.exports=b;var l=a("./Contact");(function(){b.create=function(a,k){var g=a.bodyA,d=a.bodyB,q=a.parentA,
n=a.parentB,g={id:b.id(g,d),bodyA:g,bodyB:d,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:g.isSensor||d.isSensor,timeCreated:k,timeUpdated:k,inverseMass:q.inverseMass+n.inverseMass,friction:Math.min(q.friction,n.friction),frictionStatic:Math.max(q.frictionStatic,n.frictionStatic),restitution:Math.max(q.restitution,n.restitution),slop:Math.max(q.slop,n.slop)};b.update(g,a,k);return g};b.update=function(a,k,e){var g=a.contacts,d=k.supports,n=a.activeContacts,p=k.parentA,w=k.parentB;
a.collision=k;a.inverseMass=p.inverseMass+w.inverseMass;a.friction=Math.min(p.friction,w.friction);a.frictionStatic=Math.max(p.frictionStatic,w.frictionStatic);a.restitution=Math.max(p.restitution,w.restitution);a.slop=Math.max(p.slop,w.slop);n.length=0;if(k.collided){for(p=0;p<d.length;p++){var w=d[p],h=l.id(w),x=g[h];x?n.push(x):n.push(g[h]=l.create(w))}a.separation=k.depth;b.setActive(a,!0,e)}else!0===a.isActive&&b.setActive(a,!1,e)};b.setActive=function(a,b,e){b?(a.isActive=!0,a.timeUpdated=e):
(a.isActive=!1,a.activeContacts.length=0)};b.id=function(a,b){return a.id<b.id?a.id+"_"+b.id:b.id+"_"+a.id}})()},{"./Contact":4}],8:[function(a,d,m){var b={};d.exports=b;var l=a("./Pair"),g=a("../core/Common");(function(){b.create=function(a){return g.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)};b.update=function(a,b,d){var e=a.list,n=a.table,k=a.collisionStart,w=a.collisionEnd;a=a.collisionActive;var h=[],x,u,r,v;k.length=0;w.length=0;for(v=a.length=0;v<b.length;v++)x=
b[v],x.collided&&(u=l.id(x.bodyA,x.bodyB),h.push(u),(r=n[u])?(r.isActive?a.push(r):k.push(r),l.update(r,x,d)):(r=l.create(x,d),n[u]=r,k.push(r),e.push(r)));for(v=0;v<e.length;v++)r=e[v],r.isActive&&-1===g.indexOf(h,r.id)&&(l.setActive(r,!1,d),w.push(r))};b.removeOld=function(a,b){var g=a.list,e=a.table,n=[],k,d,h;for(h=0;h<g.length;h++)k=g[h],d=k.collision,d.bodyA.isSleeping||d.bodyB.isSleeping?k.timeUpdated=b:1E3<b-k.timeUpdated&&n.push(h);for(h=0;h<n.length;h++)d=n[h]-h,k=g[d],delete e[k.id],g.splice(d,
1)};b.clear=function(a){a.table={};a.list.length=0;a.collisionStart.length=0;a.collisionActive.length=0;a.collisionEnd.length=0;return a}})()},{"../core/Common":14,"./Pair":7}],9:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),g=a("./SAT"),k=a("../geometry/Bounds"),e=a("../factory/Bodies"),t=a("../geometry/Vertices");(function(){b.ray=function(a,b,d,w){w=w||1E-100;var h=l.angle(b,d),n=l.magnitude(l.sub(b,d));b=e.rectangle(.5*(d.x+b.x),.5*(d.y+b.y),n,w,{angle:h});d=[];for(w=0;w<
a.length;w++)if(h=a[w],k.overlaps(h.bounds,b.bounds))for(n=1===h.parts.length?0:1;n<h.parts.length;n++){var u=h.parts[n];if(k.overlaps(u.bounds,b.bounds)&&(u=g.collides(u,b),u.collided)){u.body=u.bodyA=u.bodyB=h;d.push(u);break}}return d};b.region=function(a,b,g){for(var e=[],h=0;h<a.length;h++){var n=a[h],d=k.overlaps(n.bounds,b);(d&&!g||!d&&g)&&e.push(n)}return e};b.point=function(a,b){for(var g=[],e=0;e<a.length;e++){var h=a[e];if(k.contains(h.bounds,b))for(var n=1===h.parts.length?0:1;n<h.parts.length;n++){var d=
h.parts[n];if(k.contains(d.bounds,b)&&t.contains(d.vertices,b)){g.push(h);break}}}return g}})()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=a("../geometry/Vector"),k=a("../core/Common"),e=a("../geometry/Bounds");(function(){b._restingThresh=4;b._restingThreshTangent=6;b._positionDampen=.9;b._positionWarming=.8;b._frictionNormalMultiplier=5;b.preSolvePosition=
function(a){var b,g,e;for(b=0;b<a.length;b++)g=a[b],g.isActive&&(e=g.activeContacts.length,g.collision.parentA.totalContacts+=e,g.collision.parentB.totalContacts+=e)};b.solvePosition=function(a,e){var n,k,d,h,q,u,r;r=g._temp[0];var l=g._temp[1],t=g._temp[2],z=g._temp[3];for(n=0;n<a.length;n++)k=a[n],k.isActive&&!k.isSensor&&(d=k.collision,h=d.parentA,q=d.parentB,u=d.normal,h=g.sub(g.add(q.positionImpulse,q.position,r),g.add(h.positionImpulse,g.sub(q.position,d.penetration,l),t),z),k.separation=g.dot(u,
h));for(n=0;n<a.length;n++)if(k=a[n],!(!k.isActive||k.isSensor||0>k.separation)){d=k.collision;h=d.parentA;q=d.parentB;u=d.normal;r=(k.separation-k.slop)*e;if(h.isStatic||q.isStatic)r*=2;h.isStatic||h.isSleeping||(k=b._positionDampen/h.totalContacts,h.positionImpulse.x+=u.x*r*k,h.positionImpulse.y+=u.y*r*k);q.isStatic||q.isSleeping||(k=b._positionDampen/q.totalContacts,q.positionImpulse.x-=u.x*r*k,q.positionImpulse.y-=u.y*r*k)}};b.postSolvePosition=function(a){for(var k=0;k<a.length;k++){var n=a[k];
n.totalContacts=0;if(0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var d=0;d<n.parts.length;d++){var w=n.parts[d];l.translate(w.vertices,n.positionImpulse);e.update(w.bounds,w.vertices,n.velocity);w.position.x+=n.positionImpulse.x;w.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x;n.positionPrev.y+=n.positionImpulse.y;0>g.dot(n.positionImpulse,n.velocity)?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=b._positionWarming,n.positionImpulse.y*=b._positionWarming)}}};
b.preSolveVelocity=function(a){var b,e,k,d,h,l,u,r,v,t,z=g._temp[0],m=g._temp[1];for(b=0;b<a.length;b++)if(k=a[b],k.isActive&&!k.isSensor)for(d=k.activeContacts,e=k.collision,k=e.parentA,h=e.parentB,l=e.normal,u=e.tangent,e=0;e<d.length;e++)if(r=d[e],v=r.vertex,t=r.normalImpulse,r=r.tangentImpulse,0!==t||0!==r)z.x=l.x*t+u.x*r,z.y=l.y*t+u.y*r,k.isStatic||k.isSleeping||(t=g.sub(v,k.position,m),k.positionPrev.x+=z.x*k.inverseMass,k.positionPrev.y+=z.y*k.inverseMass,k.anglePrev+=g.cross(t,z)*k.inverseInertia),
h.isStatic||h.isSleeping||(t=g.sub(v,h.position,m),h.positionPrev.x-=z.x*h.inverseMass,h.positionPrev.y-=z.y*h.inverseMass,h.anglePrev-=g.cross(t,z)*h.inverseInertia)};b.solveVelocity=function(a,e){for(var n=e*e,d=g._temp[0],l=g._temp[1],h=g._temp[2],q=g._temp[3],u=g._temp[4],r=g._temp[5],v=0;v<a.length;v++){var t=a[v];if(t.isActive&&!t.isSensor){var z=t.collision,m=z.parentA,y=z.parentB,D=z.normal,z=z.tangent,F=t.activeContacts,E=1/F.length;m.velocity.x=m.position.x-m.positionPrev.x;m.velocity.y=
m.position.y-m.positionPrev.y;y.velocity.x=y.position.x-y.positionPrev.x;y.velocity.y=y.position.y-y.positionPrev.y;m.angularVelocity=m.angle-m.anglePrev;y.angularVelocity=y.angle-y.anglePrev;for(var A=0;A<F.length;A++){var B=F[A],C=B.vertex,L=g.sub(C,m.position,l),C=g.sub(C,y.position,h),H=g.add(m.velocity,g.mult(g.perp(L),m.angularVelocity),q),J=g.add(y.velocity,g.mult(g.perp(C),y.angularVelocity),u),H=g.sub(H,J,r),I=g.dot(D,H),M=g.dot(z,H),K=Math.abs(M),O=k.sign(M),H=(1+t.restitution)*I,Q=k.clamp(t.separation+
I,0,1)*b._frictionNormalMultiplier,J=M,N=Infinity;K>t.friction*t.frictionStatic*Q*n&&(N=K,J=k.clamp(t.friction*O*n,-N,N));K=g.cross(L,D);O=g.cross(C,D);K=E/(m.inverseMass+y.inverseMass+m.inverseInertia*K*K+y.inverseInertia*O*O);H*=K;J*=K;0>I&&I*I>b._restingThresh*n?B.normalImpulse=0:(I=B.normalImpulse,B.normalImpulse=Math.min(B.normalImpulse+H,0),H=B.normalImpulse-I);M*M>b._restingThreshTangent*n?B.tangentImpulse=0:(I=B.tangentImpulse,B.tangentImpulse=k.clamp(B.tangentImpulse+J,-N,N),J=B.tangentImpulse-
I);d.x=D.x*H+z.x*J;d.y=D.y*H+z.y*J;m.isStatic||m.isSleeping||(m.positionPrev.x+=d.x*m.inverseMass,m.positionPrev.y+=d.y*m.inverseMass,m.anglePrev+=g.cross(L,d)*m.inverseInertia);y.isStatic||y.isSleeping||(y.positionPrev.x-=d.x*y.inverseMass,y.positionPrev.y-=d.y*y.inverseMass,y.anglePrev-=g.cross(C,d)*y.inverseInertia)}}}}})()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=
a("../geometry/Vector");(function(){b.collides=function(b,e,k){var n,h;n=!1;k?(h=b.parent,n=e.parent,h=h.speed*h.speed+h.angularSpeed*h.angularSpeed+n.speed*n.speed+n.angularSpeed*n.angularSpeed,n=k&&k.collided&&.2>h,h=k):h={collided:!1,bodyA:b,bodyB:e};if(k&&n){if(n=h.axisBody,k=a(n.vertices,(n===b?e:b).vertices,[n.axes[k.axisNumber]]),h.reused=!0,0>=k.overlap)return h.collided=!1,h}else{k=a(b.vertices,e.vertices,b.axes);if(0>=k.overlap)return h.collided=!1,h;n=a(e.vertices,b.vertices,e.axes);if(0>=
n.overlap)return h.collided=!1,h;k.overlap<n.overlap?h.axisBody=b:(k=n,h.axisBody=e);h.axisNumber=k.axisNumber}h.bodyA=b.id<e.id?b:e;h.bodyB=b.id<e.id?e:b;h.collided=!0;h.normal=k.axis;h.depth=k.overlap;h.parentA=h.bodyA.parent;h.parentB=h.bodyB.parent;b=h.bodyA;e=h.bodyB;0<g.dot(h.normal,g.sub(e.position,b.position))&&(h.normal=g.neg(h.normal));h.tangent=g.perp(h.normal);h.penetration={x:h.normal.x*h.depth,y:h.normal.y*h.depth};k=d(b,e,h.normal);n=h.supports||[];n.length=0;l.contains(b.vertices,
k[0])&&n.push(k[0]);l.contains(b.vertices,k[1])&&n.push(k[1]);2>n.length&&(b=d(e,b,g.neg(h.normal)),l.contains(e.vertices,b[0])&&n.push(b[0]),2>n.length&&l.contains(e.vertices,b[1])&&n.push(b[1]));1>n.length&&(n=[k[0]]);h.supports=n;return h};var a=function(a,b,k){for(var n=g._temp[0],h=g._temp[1],d={overlap:Number.MAX_VALUE},u,r,l=0;l<k.length;l++){r=k[l];e(n,a,r);e(h,b,r);u=Math.min(n.max-h.min,h.max-n.min);if(0>=u){d.overlap=u;break}u<d.overlap&&(d.overlap=u,d.axis=r,d.axisNumber=l)}return d},
e=function(a,b,e){for(var k=g.dot(b[0],e),h=k,n=1;n<b.length;n+=1){var d=g.dot(b[n],e);d>h?h=d:d<k&&(k=d)}a.min=k;a.max=h},d=function(a,b,e){var k=Number.MAX_VALUE,h=g._temp[0];b=b.vertices;a=a.position;var d,n,r,l;for(l=0;l<b.length;l++)n=b[l],h.x=n.x-a.x,h.y=n.y-a.y,d=-g.dot(e,h),d<k&&(k=d,r=n);n=b[0<=r.index-1?r.index-1:b.length-1];h.x=n.x-a.x;h.y=n.y-a.y;k=-g.dot(e,h);l=n;n=b[(r.index+1)%b.length];h.x=n.x-a.x;h.y=n.y-a.y;d=-g.dot(e,h);d<k&&(l=n);return[r,l]}})()},{"../geometry/Vector":28,"../geometry/Vertices":29}],
12:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=a("../geometry/Vector"),k=a("../core/Sleeping"),e=a("../geometry/Bounds"),t=a("../geometry/Axes"),q=a("../core/Common");(function(){b.create=function(a){a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0});a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var b=a.bodyA?g.add(a.bodyA.position,a.pointA):a.pointA,e=a.bodyB?g.add(a.bodyB.position,a.pointB):a.pointB,b=g.magnitude(g.sub(b,e));a.length=a.length||b||1E-6;a.render=q.extend({visible:!0,
lineWidth:2,strokeStyle:"#666"},a.render);a.id=a.id||q.nextId();a.label=a.label||"Constraint";a.type="constraint";a.stiffness=a.stiffness||1;a.angularStiffness=a.angularStiffness||0;a.angleA=a.bodyA?a.bodyA.angle:a.angleA;a.angleB=a.bodyB?a.bodyB.angle:a.angleB;return a};b.solveAll=function(a,g){for(var e=0;e<a.length;e++)b.solve(a[e],g)};b.solve=function(a,b){var e=a.bodyA,h=a.bodyB,k=a.pointA,d=a.pointB;e&&!e.isStatic&&(a.pointA=g.rotate(k,e.angle-a.angleA),a.angleA=e.angle);h&&!h.isStatic&&(a.pointB=
g.rotate(d,h.angle-a.angleB),a.angleB=h.angle);var n=k,l=d;e&&(n=g.add(e.position,k));h&&(l=g.add(h.position,d));if(n&&l){var d=g.sub(n,l),q=g.magnitude(d);0===q&&(q=1E-6);var t=(q-a.length)/q,k=g.div(d,q),d=g.mult(d,.5*t*a.stiffness*b*b);if(!(Math.abs(1-q/a.length)<.001*b)){var p,m;e&&!e.isStatic?(p={x:n.x-e.position.x+d.x,y:n.y-e.position.y+d.y},e.velocity.x=e.position.x-e.positionPrev.x,e.velocity.y=e.position.y-e.positionPrev.y,e.angularVelocity=e.angle-e.anglePrev,n=g.add(e.velocity,g.mult(g.perp(p),
e.angularVelocity)),q=g.dot(p,k),q=e.inverseMass+e.inverseInertia*q*q):(n={x:0,y:0},q=e?e.inverseMass:0);h&&!h.isStatic?(m={x:l.x-h.position.x-d.x,y:l.y-h.position.y-d.y},h.velocity.x=h.position.x-h.positionPrev.x,h.velocity.y=h.position.y-h.positionPrev.y,h.angularVelocity=h.angle-h.anglePrev,l=g.add(h.velocity,g.mult(g.perp(m),h.angularVelocity)),t=g.dot(m,k),t=h.inverseMass+h.inverseInertia*t*t):(l={x:0,y:0},t=h?h.inverseMass:0);l=g.sub(l,n);l=g.dot(k,l)/(q+t);0<l&&(l=0);k={x:k.x*l,y:k.y*l};e&&
!e.isStatic&&(p=g.cross(p,k)*e.inverseInertia*(1-a.angularStiffness),e.constraintImpulse.x-=d.x,e.constraintImpulse.y-=d.y,e.constraintImpulse.angle+=p,e.position.x-=d.x,e.position.y-=d.y,e.angle+=p);h&&!h.isStatic&&(p=g.cross(m,k)*h.inverseInertia*(1-a.angularStiffness),h.constraintImpulse.x+=d.x,h.constraintImpulse.y+=d.y,h.constraintImpulse.angle-=p,h.position.x+=d.x,h.position.y+=d.y,h.angle-=p)}}};b.postSolveAll=function(a){for(var b=0;b<a.length;b++){var d=a[b],h=d.constraintImpulse;if(0!==
h.x||0!==h.y||0!==h.angle){k.set(d,!1);for(var n=0;n<d.parts.length;n++){var u=d.parts[n];l.translate(u.vertices,h);0<n&&(u.position.x+=h.x,u.position.y+=h.y);0!==h.angle&&(l.rotate(u.vertices,h.angle,d.position),t.rotate(u.axes,h.angle),0<n&&g.rotateAbout(u.position,h.angle,d.position,u.position));e.update(u.bounds,u.vertices,d.velocity)}h.angle=0;h.x=0;h.y=0}}}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],
13:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=a("../core/Sleeping"),k=a("../core/Mouse"),e=a("../core/Events"),t=a("../collision/Detector"),q=a("./Constraint"),n=a("../body/Composite"),p=a("../core/Common"),w=a("../geometry/Bounds");(function(){b.create=function(a,g){var h=(a?a.mouse:null)||(g?g.mouse:null);h||(a&&a.render&&a.render.canvas?h=k.create(a.render.canvas):g&&g.element?h=k.create(g.element):(h=k.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));
var d=q.create({label:"Mouse Constraint",pointA:h.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),l=p.extend({type:"mouseConstraint",mouse:h,element:null,body:null,constraint:d,collisionFilter:{category:1,mask:4294967295,group:0}},g);e.on(a,"tick",function(){var g=n.allBodies(a.world);b.update(l,g);var g=l.mouse,h=g.sourceEvents;h.mousemove&&e.trigger(l,"mousemove",{mouse:g});h.mousedown&&e.trigger(l,"mousedown",{mouse:g});h.mouseup&&
e.trigger(l,"mouseup",{mouse:g});k.clearSourceEvents(g)});return l};b.update=function(a,b){var h=a.mouse,k=a.constraint,d=a.body;if(0===h.button)if(k.bodyB)g.set(k.bodyB,!1),k.pointA=h.position;else for(var n=0;n<b.length;n++){if(d=b[n],w.contains(d.bounds,h.position)&&t.canCollide(d.collisionFilter,a.collisionFilter))for(var q=1<d.parts.length?1:0;q<d.parts.length;q++)if(l.contains(d.parts[q].vertices,h.position)){k.pointA=h.position;k.bodyB=a.body=d;k.pointB={x:h.position.x-d.position.x,y:h.position.y-
d.position.y};k.angleB=d.angle;g.set(d,!1);e.trigger(a,"startdrag",{mouse:h,body:d});break}}else k.bodyB=a.body=null,k.pointB=null,d&&e.trigger(a,"enddrag",{mouse:h,body:d})}})()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(a,d,m){var b={};d.exports=b;(function(){b._nextId=0;b._seed=0;b.extend=function(a,k){var g,d;"boolean"===typeof k?
(g=2,d=k):(g=1,d=!0);g=Array.prototype.slice.call(arguments,g);for(var l=0;l<g.length;l++){var n=g[l];if(n)for(var p in n)d&&n[p]&&n[p].constructor===Object?a[p]&&a[p].constructor!==Object?a[p]=n[p]:(a[p]=a[p]||{},b.extend(a[p],d,n[p])):a[p]=n[p]}return a};b.clone=function(a,k){return b.extend({},k,a)};b.keys=function(a){if(Object.keys)return Object.keys(a);var b=[],g;for(g in a)b.push(g);return b};b.values=function(a){var b=[];if(Object.keys){for(var g=Object.keys(a),d=0;d<g.length;d++)b.push(a[g[d]]);
return b}for(g in a)b.push(a[g]);return b};b.get=function(a,b,e,d){b=b.split(".").slice(e,d);for(e=0;e<b.length;e+=1)a=a[b[e]];return a};b.set=function(a,k,e,d,l){d=k.split(".").slice(d,l);return b.get(a,k,0,-1)[d[d.length-1]]=e};b.shadeColor=function(a,b){var g=parseInt(a.slice(1),16),k=Math.round(2.55*b),d=(g>>16)+k,n=(g>>8&255)+k,g=(g&255)+k;return"#"+(16777216+65536*(255>d?1>d?0:d:255)+256*(255>n?1>n?0:n:255)+(255>g?1>g?0:g:255)).toString(16).slice(1)};b.shuffle=function(a){for(var g=a.length-
1;0<g;g--){var e=Math.floor(b.random()*(g+1)),d=a[g];a[g]=a[e];a[e]=d}return a};b.choose=function(a){return a[Math.floor(b.random()*a.length)]};b.isElement=function(a){try{return a instanceof HTMLElement}catch(k){return"object"===typeof a&&1===a.nodeType&&"object"===typeof a.style&&"object"===typeof a.ownerDocument}};b.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.isFunction=function(a){return"function"===typeof a};b.isPlainObject=function(a){return"object"===typeof a&&
a.constructor===Object};b.isString=function(a){return"[object String]"===toString.call(a)};b.clamp=function(a,b,e){return a<b?b:a>e?e:a};b.sign=function(a){return 0>a?-1:1};b.now=function(){var a=window.performance||{};a.now=function(){return a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow||function(){return+new Date}}();return a.now()};b.random=function(a,d){a="undefined"!==typeof a?a:0;b._seed=(9301*b._seed+49297)%233280;return a+b._seed/233280*(("undefined"!==typeof d?d:1)-a)};b.colorToNumber=function(a){a=
a.replace("#","");3==a.length&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2));return parseInt(a,16)};b.logLevel=1;b.log=function(){console&&0<b.logLevel&&3>=b.logLevel&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.info=function(){console&&0<b.logLevel&&2>=b.logLevel&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.warn=function(){console&&0<b.logLevel&&3>=b.logLevel&&console.warn.apply(console,
["matter-js:"].concat(Array.prototype.slice.call(arguments)))};b.nextId=function(){return b._nextId++};b.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var g=0;g<a.length;g++)if(a[g]===b)return g;return-1};b.map=function(a,b){if(a.map)return a.map(b);for(var g=[],d=0;d<a.length;d+=1)g.push(b(a[d]));return g};b.topologicalSort=function(b){var g=[],e=[],d=[],l;for(l in b)e[l]||d[l]||a(l,e,d,b,g);return g};var a=function(b,d,e,l,q){var g=l[b]||[];e[b]=!0;for(var k=0;k<g.length;k+=1){var t=
g[k];e[t]||d[t]||a(t,d,e,l,q)}e[b]=!1;d[b]=!0;q.push(b)};b.chain=function(){for(var a=Array.prototype.slice.call(arguments),b=[],e=0;e<a.length;e+=1){var d=a[e];d._chained?b.push.apply(b,d._chained):b.push(d)}a=function(){for(var a,g=0;g<b.length;g+=1){var e=b[g].apply(a,arguments);"undefined"!==typeof e&&(a=e)}return a};a._chained=b;return a};b.chainPathBefore=function(a,d,e){return b.set(a,d,b.chain(e,b.get(a,d)))};b.chainPathAfter=function(a,d,e){return b.set(a,d,b.chain(b.get(a,d),e))}})()},{}],
15:[function(a,d,m){var b={};d.exports=b;var l=a("../body/World"),g=a("./Sleeping"),k=a("../collision/Resolver"),e=a("../render/Render"),t=a("../collision/Pairs");a("./Metrics");var q=a("../collision/Grid"),n=a("./Events"),p=a("../body/Composite"),w=a("../constraint/Constraint"),h=a("./Common"),x=a("../body/Body");(function(){b.create=function(a,b){b=h.isElement(a)?b:a;a=h.isElement(a)?a:null;b=b||{};(a||b.render)&&h.warn("Engine.create: engine.render is deprecated (see docs)");var g=h.extend({positionIterations:6,
velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],timing:{timestamp:0,timeScale:1},broadphase:{controller:q}},b);if(a||g.render)g.render=h.extend({element:a,controller:e},g.render);g.render&&g.render.controller&&(g.render=g.render.controller.create(g.render));g.render&&(g.render.engine=g);g.world=b.world||l.create(g.world);g.pairs=t.create();g.broadphase=g.broadphase.controller.create(g.broadphase);g.metrics=g.metrics||{extended:!1};return g};b.update=function(a,b,h){b=b||1E3/
60;h=h||1;var e=a.world,d=a.timing,l=a.broadphase,r;d.timestamp+=b*d.timeScale;var q={timestamp:d.timestamp};n.trigger(a,"beforeUpdate",q);var u=p.allBodies(e);r=p.allConstraints(e);a.enableSleeping&&g.update(u,d.timeScale);var v=e.gravity,m="undefined"!==typeof v.scale?v.scale:.001;if((0!==v.x||0!==v.y)&&0!==m)for(var B=0;B<u.length;B++){var C=u[B];C.isStatic||C.isSleeping||(C.force.y+=C.mass*v.y*m,C.force.x+=C.mass*v.x*m)}v=d.timeScale;for(m=0;m<u.length;m++)B=u[m],B.isStatic||B.isSleeping||x.update(B,
b,v,h);for(h=0;h<a.constraintIterations;h++)w.solveAll(r,d.timeScale);w.postSolveAll(u);l.controller?(e.isModified&&l.controller.clear(l),l.controller.update(l,u,a,e.isModified),r=l.pairsList):r=u;e.isModified&&p.setModified(e,!1,!1,!0);l=l.detector(r,a);e=a.pairs;r=d.timestamp;t.update(e,l,r);t.removeOld(e,r);a.enableSleeping&&g.afterCollisions(e.list,d.timeScale);0<e.collisionStart.length&&n.trigger(a,"collisionStart",{pairs:e.collisionStart});k.preSolvePosition(e.list);for(h=0;h<a.positionIterations;h++)k.solvePosition(e.list,
d.timeScale);k.postSolvePosition(u);k.preSolveVelocity(e.list);for(h=0;h<a.velocityIterations;h++)k.solveVelocity(e.list,d.timeScale);0<e.collisionActive.length&&n.trigger(a,"collisionActive",{pairs:e.collisionActive});0<e.collisionEnd.length&&n.trigger(a,"collisionEnd",{pairs:e.collisionEnd});for(d=0;d<u.length;d++)e=u[d],e.force.x=0,e.force.y=0,e.torque=0;n.trigger(a,"afterUpdate",q);return a};b.merge=function(a,e){h.extend(a,e);if(e.world){a.world=e.world;b.clear(a);for(var d=p.allBodies(a.world),
k=0;k<d.length;k++){var n=d[k];g.set(n,!1);n.id=h.nextId()}}};b.clear=function(a){var b=a.world;t.clear(a.pairs);var h=a.broadphase;h.controller&&(b=p.allBodies(b),h.controller.clear(h),h.controller.update(h,b,a,!0))}})()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(a,d,m){var b={};d.exports=
b;var l=a("./Common");(function(){b.on=function(a,b,e){b=b.split(" ");for(var g,d=0;d<b.length;d++)g=b[d],a.events=a.events||{},a.events[g]=a.events[g]||[],a.events[g].push(e);return e};b.off=function(a,b,e){if(b){"function"===typeof b&&(e=b,b=l.keys(a.events).join(" "));b=b.split(" ");for(var g=0;g<b.length;g++){var d=a.events[b[g]],k=[];if(e&&d)for(var p=0;p<d.length;p++)d[p]!==e&&k.push(d[p]);a.events[b[g]]=k}}else a.events={}};b.trigger=function(a,b,e){var g,d,k;if(a.events){e||(e={});b=b.split(" ");
for(var p=0;p<b.length;p++)if(g=b[p],d=a.events[g])for(k=l.clone(e,!1),k.name=g,k.source=a,g=0;g<d.length;g++)d[g].apply(a,[k])}}})()},{"./Common":14}],17:[function(a,d,m){var b={};d.exports=b;var l=a("./Plugin"),g=a("./Common");(function(){b.name="matter-js";b.version="0.11.0";b.uses=[];b.used=[];b.use=function(){l.use(b,Array.prototype.slice.call(arguments))};b.before=function(a,e){a=a.replace(/^Matter./,"");return g.chainPathBefore(b,a,e)};b.after=function(a,e){a=a.replace(/^Matter./,"");return g.chainPathAfter(b,
a,e)}})()},{"./Common":14,"./Plugin":20}],18:[function(a,d,m){},{"../body/Composite":2,"./Common":14}],19:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Common");(function(){b.create=function(g){var e={};g||l.log("Mouse.create: element was undefined, defaulting to document.body","warn");e.element=g||document.body;e.absolute={x:0,y:0};e.position={x:0,y:0};e.mousedownPosition={x:0,y:0};e.mouseupPosition={x:0,y:0};e.offset={x:0,y:0};e.scale={x:1,y:1};e.wheelDelta=0;e.button=-1;e.pixelRatio=e.element.getAttribute("data-pixel-ratio")||
1;e.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null};e.mousemove=function(b){var g=a(b,e.element,e.pixelRatio);b.changedTouches&&(e.button=0,b.preventDefault());e.absolute.x=g.x;e.absolute.y=g.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.sourceEvents.mousemove=b};e.mousedown=function(b){var g=a(b,e.element,e.pixelRatio);b.changedTouches?(e.button=0,b.preventDefault()):e.button=b.button;e.absolute.x=g.x;e.absolute.y=g.y;
e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.mousedownPosition.x=e.position.x;e.mousedownPosition.y=e.position.y;e.sourceEvents.mousedown=b};e.mouseup=function(b){var g=a(b,e.element,e.pixelRatio);b.changedTouches&&b.preventDefault();e.button=-1;e.absolute.x=g.x;e.absolute.y=g.y;e.position.x=e.absolute.x*e.scale.x+e.offset.x;e.position.y=e.absolute.y*e.scale.y+e.offset.y;e.mouseupPosition.x=e.position.x;e.mouseupPosition.y=e.position.y;e.sourceEvents.mouseup=
b};e.mousewheel=function(a){e.wheelDelta=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));a.preventDefault()};b.setElement(e,e.element);return e};b.setElement=function(a,b){a.element=b;b.addEventListener("mousemove",a.mousemove);b.addEventListener("mousedown",a.mousedown);b.addEventListener("mouseup",a.mouseup);b.addEventListener("mousewheel",a.mousewheel);b.addEventListener("DOMMouseScroll",a.mousewheel);b.addEventListener("touchmove",a.mousemove);b.addEventListener("touchstart",a.mousedown);b.addEventListener("touchend",
a.mouseup)};b.clearSourceEvents=function(a){a.sourceEvents.mousemove=null;a.sourceEvents.mousedown=null;a.sourceEvents.mouseup=null;a.sourceEvents.mousewheel=null;a.wheelDelta=0};b.setOffset=function(a,b){a.offset.x=b.x;a.offset.y=b.y;a.position.x=a.absolute.x*a.scale.x+a.offset.x;a.position.y=a.absolute.y*a.scale.y+a.offset.y};b.setScale=function(a,b){a.scale.x=b.x;a.scale.y=b.y;a.position.x=a.absolute.x*a.scale.x+a.offset.x;a.position.y=a.absolute.y*a.scale.y+a.offset.y};var a=function(a,b,g){var d=
b.getBoundingClientRect(),e=document.documentElement||document.body.parentNode||document.body,k=void 0!==window.pageXOffset?window.pageXOffset:e.scrollLeft,e=void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop,l=a.changedTouches;l?(k=l[0].pageX-d.left-k,a=l[0].pageY-d.top-e):(k=a.pageX-d.left-k,a=a.pageY-d.top-e);return{x:k/(b.clientWidth/(b.width||b.clientWidth)*g),y:a/(b.clientHeight/(b.height||b.clientHeight)*g)}}})()},{"../core/Common":14}],20:[function(a,d,m){var b={};d.exports=b;var l=
a("./Common");(function(){b._registry={};b.register=function(a){b.isPlugin(a)||l.warn("Plugin.register:",b.toString(a),"does not implement all required fields.");if(a.name in b._registry){var g=b._registry[a.name],d=b.versionParse(a.version).number,m=b.versionParse(g.version).number;d>m?(l.warn("Plugin.register:",b.toString(g),"was upgraded to",b.toString(a)),b._registry[a.name]=a):d<m?l.warn("Plugin.register:",b.toString(g),"can not be downgraded to",b.toString(a)):a!==g&&l.warn("Plugin.register:",
b.toString(a),"is already registered to different plugin object")}else b._registry[a.name]=a;return a};b.resolve=function(a){return b._registry[b.dependencyParse(a).name]};b.toString=function(a){return"string"===typeof a?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")};b.isPlugin=function(a){return a&&a.name&&a.version&&a.install};b.isUsed=function(a,b){return-1<a.used.indexOf(b)};b.isFor=function(a,d){var g=a["for"]&&b.dependencyParse(a["for"]);return!a["for"]||d.name===g.name&&b.versionSatisfies(d.version,
g.range)};b.use=function(a,d){a.uses=(a.uses||[]).concat(d||[]);if(0===a.uses.length)l.warn("Plugin.use:",b.toString(a),"does not specify any dependencies to install.");else{for(var g=b.dependencies(a),g=l.topologicalSort(g),k=[],q=0;q<g.length;q+=1)if(g[q]!==a.name){var n=b.resolve(g[q]);n?b.isUsed(a,n.name)||(b.isFor(n,a)||(l.warn("Plugin.use:",b.toString(n),"is for",n["for"],"but installed on",b.toString(a)+"."),n._warned=!0),n.install?n.install(a):(l.warn("Plugin.use:",b.toString(n),"does not specify an install function."),
n._warned=!0),n._warned?(k.push("\ud83d\udd36 "+b.toString(n)),delete n._warned):k.push("\u2705 "+b.toString(n)),a.used.push(n.name)):k.push("\u274c "+g[q])}0<k.length&&l.info(k.join("  "))}};b.dependencies=function(a,d){var g=b.dependencyParse(a),k=g.name;d=d||{};if(!(k in d)){a=b.resolve(a)||a;d[k]=l.map(a.uses||[],function(d){b.isPlugin(d)&&b.register(d);var e=b.dependencyParse(d),k=b.resolve(d);k&&!b.versionSatisfies(k.version,e.range)?(l.warn("Plugin.dependencies:",b.toString(k),"does not satisfy",
b.toString(e),"used by",b.toString(g)+"."),k._warned=!0,a._warned=!0):k||(l.warn("Plugin.dependencies:",b.toString(d),"used by",b.toString(g),"could not be resolved."),a._warned=!0);return e.name});for(var q=0;q<d[k].length;q+=1)b.dependencies(d[k][q],d);return d}};b.dependencyParse=function(a){return l.isString(a)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}):
{name:a.name,range:a.range||a.version}};b.versionParse=function(a){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var b=a.split("-");a=b[0];var d=isNaN(Number(a[0])),g=d?a.substr(1):a,q=l.map(g.split("."),function(a){return Number(a)});return{isRange:d,version:g,range:a,operator:d?a[0]:"",parts:q,prerelease:b[1],number:1E8*q[0]+1E4*q[1]+q[2]}};b.versionSatisfies=function(a,d){d=d||"*";var g=b.versionParse(d),k=g.parts,l=b.versionParse(a),
n=l.parts;if(g.isRange){if("*"===g.operator||"*"===a)return!0;if("~"===g.operator)return n[0]===k[0]&&n[1]===k[1]&&n[2]>=k[2];if("^"===g.operator)return 0<k[0]?n[0]===k[0]&&l.number>=g.number:0<k[1]?n[1]===k[1]&&n[2]>=k[2]:n[2]===k[2]}return a===d||"*"===a}})()},{"./Common":14}],21:[function(a,d,m){var b={};d.exports=b;var l=a("./Events"),g=a("./Engine"),k=a("./Common");(function(){var a,d;"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);if(!a){var q;a=function(a){q=setTimeout(function(){a(k.now())},1E3/60)};d=function(){clearTimeout(q)}}b.create=function(a){a=k.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},a);a.delta=a.delta||1E3/a.fps;a.deltaMin=a.deltaMin||
1E3/a.fps;a.deltaMax=a.deltaMax||1E3/(.5*a.fps);a.fps=1E3/a.delta;return a};b.run=function(d,g){"undefined"!==typeof d.positionIterations&&(g=d,d=b.create());(function h(e){d.frameRequestId=a(h);e&&d.enabled&&b.tick(d,g,e)})();return d};b.tick=function(a,b,d){var h=b.timing,e=1,k,n={timestamp:h.timestamp};l.trigger(a,"beforeTick",n);l.trigger(b,"beforeTick",n);a.isFixed?k=a.delta:(k=d-a.timePrev||a.delta,a.timePrev=d,a.deltaHistory.push(k),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),k=
Math.min.apply(null,a.deltaHistory),k=k<a.deltaMin?a.deltaMin:k,k=k>a.deltaMax?a.deltaMax:k,e=k/a.delta,a.delta=k);0!==a.timeScalePrev&&(e*=h.timeScale/a.timeScalePrev);0===h.timeScale&&(e=0);a.timeScalePrev=h.timeScale;a.correction=e;a.frameCounter+=1;1E3<=d-a.counterTimestamp&&(a.fps=(d-a.counterTimestamp)/1E3*a.frameCounter,a.counterTimestamp=d,a.frameCounter=0);l.trigger(a,"tick",n);l.trigger(b,"tick",n);b.world.isModified&&b.render&&b.render.controller&&b.render.controller.clear&&b.render.controller.clear(b.render);
l.trigger(a,"beforeUpdate",n);g.update(b,k,e);l.trigger(a,"afterUpdate",n);b.render&&b.render.controller&&(l.trigger(a,"beforeRender",n),l.trigger(b,"beforeRender",n),b.render.controller.world(b.render),l.trigger(a,"afterRender",n),l.trigger(b,"afterRender",n));l.trigger(a,"afterTick",n);l.trigger(b,"afterTick",n)};b.stop=function(a){d(a.frameRequestId)};b.start=function(a,d){b.run(a,d)}})()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(a,d,m){var b={};d.exports=b;var l=a("./Events");
(function(){b._motionWakeThreshold=.18;b._motionSleepThreshold=.08;b._minBias=.9;b.update=function(a,d){for(var g=d*d*d,k=0;k<a.length;k++){var l=a[k],n=l.speed*l.speed+l.angularSpeed*l.angularSpeed;0!==l.force.x||0!==l.force.y?b.set(l,!1):(l.motion=b._minBias*Math.min(l.motion,n)+(1-b._minBias)*Math.max(l.motion,n),0<l.sleepThreshold&&l.motion<b._motionSleepThreshold*g?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold&&b.set(l,!0)):0<l.sleepCounter&&--l.sleepCounter)}};b.afterCollisions=function(a,
d){for(var g=d*d*d,k=0;k<a.length;k++){var l=a[k];if(l.isActive){var n=l.collision,l=n.bodyA.parent,p=n.bodyB.parent;l.isSleeping&&p.isSleeping||l.isStatic||p.isStatic||!l.isSleeping&&!p.isSleeping||(n=l.isSleeping&&!l.isStatic?l:p,l=n===l?p:l,!n.isStatic&&l.motion>b._motionWakeThreshold*g&&b.set(n,!1))}}};b.set=function(a,b){var d=a.isSleeping;b?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,
a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,d||l.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,d&&l.trigger(a,"sleepEnd"))}})()},{"./Events":16}],23:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vertices"),g=a("../core/Common"),k=a("../body/Body"),e=a("../geometry/Bounds"),t=a("../geometry/Vector");(function(){b.rectangle=function(a,b,d,e,h){h=h||{};a={label:"Rectangle Body",position:{x:a,y:b},vertices:l.fromPath("L 0 0 L "+d+" 0 L "+d+" "+e+" L 0 "+e)};h.chamfer&&
(b=h.chamfer,a.vertices=l.chamfer(a.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete h.chamfer);return k.create(g.extend({},a,h))};b.trapezoid=function(a,b,d,e,h,x){x=x||{};h*=.5;var n=d*h;d=n+(1-2*h)*d;var r=d+n;a={label:"Trapezoid Body",position:{x:a,y:b},vertices:l.fromPath(.5>h?"L 0 0 L "+n+" "+-e+" L "+d+" "+-e+" L "+r+" 0":"L 0 0 L "+d+" "+-e+" L "+r+" 0")};x.chamfer&&(b=x.chamfer,a.vertices=l.chamfer(a.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete x.chamfer);return k.create(g.extend({},
a,x))};b.circle=function(a,d,e,l,h){l=l||{};var k={label:"Circle Body",circleRadius:e};h=Math.ceil(Math.max(10,Math.min(h||25,e)));1===h%2&&(h+=1);return b.polygon(a,d,h,e,g.extend({},k,l))};b.polygon=function(a,d,e,m,h){h=h||{};if(3>e)return b.circle(a,d,m,h);for(var n=2*Math.PI/e,u="",r=.5*n,v=0;v<e;v+=1)var p=r+v*n,q=Math.sin(p)*m,u=u+("L "+(Math.cos(p)*m).toFixed(3)+" "+q.toFixed(3)+" ");a={label:"Polygon Body",position:{x:a,y:d},vertices:l.fromPath(u)};h.chamfer&&(d=h.chamfer,a.vertices=l.chamfer(a.vertices,
d.radius,d.quality,d.qualityMin,d.qualityMax),delete h.chamfer);return k.create(g.extend({},a,h))};b.fromVertices=function(a,b,d,m,h,x,u){var n,v,q,p;m=m||{};n=[];h="undefined"!==typeof h?h:!1;x="undefined"!==typeof x?x:.01;u="undefined"!==typeof u?u:10;window.decomp||g.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.");g.isArray(d[0])||(d=[d]);for(p=0;p<d.length;p+=1)if(q=d[p],(v=l.isConvex(q))||!window.decomp)q=v?l.clockwiseSort(q):l.hull(q),
n.push({position:{x:a,y:b},vertices:q});else{var w=new decomp.Polygon;for(v=0;v<q.length;v++)w.vertices.push([q[v].x,q[v].y]);w.makeCCW();!1!==x&&w.removeCollinearPoints(x);w=w.quickDecomp();for(v=0;v<w.length;v++){var y=w[v],D=[];for(q=0;q<y.vertices.length;q++)D.push({x:y.vertices[q][0],y:y.vertices[q][1]});0<u&&l.area(D)<u||n.push({position:l.centre(D),vertices:D})}}for(v=0;v<n.length;v++)n[v]=k.create(g.extend(n[v],m));if(h)for(v=0;v<n.length;v++)for(x=n[v],q=v+1;q<n.length;q++)if(u=n[q],e.overlaps(x.bounds,
u.bounds))for(p=x.vertices,w=u.vertices,d=0;d<x.vertices.length;d++)for(h=0;h<u.vertices.length;h++)y=t.magnitudeSquared(t.sub(p[(d+1)%p.length],w[h])),D=t.magnitudeSquared(t.sub(p[d],w[(h+1)%w.length])),5>y&&5>D&&(p[d].isInternal=!0,w[h].isInternal=!0);return 1<n.length?(m=k.create(g.extend({parts:n.slice(0)},m)),k.setPosition(m,{x:a,y:b}),m):n[0]}})()},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(a,d,m){var b={};d.exports=
b;var l=a("../body/Composite"),g=a("../constraint/Constraint"),k=a("../core/Common"),e=a("../body/Body"),t=a("./Bodies");(function(){b.stack=function(a,b,d,g,h,k,u){for(var n=l.create({label:"Stack"}),v=a,q,m=0,p=0;p<g;p++){for(var x=0,t=0;t<d;t++){var w=u(v,b,t,p,q,m);w?(v=w.bounds.max.y-w.bounds.min.y,q=w.bounds.max.x-w.bounds.min.x,v>x&&(x=v),e.translate(w,{x:.5*q,y:.5*v}),v=w.bounds.max.x+h,l.addBody(n,w),q=w,m+=1):v+=h}b+=x+k;v=a}return n};b.chain=function(a,b,d,e,h,m){for(var n=a.bodies,r=1;r<
n.length;r++){var v=n[r-1],q=n[r],v=k.extend({bodyA:v,pointA:{x:(v.bounds.max.x-v.bounds.min.x)*b,y:(v.bounds.max.y-v.bounds.min.y)*d},bodyB:q,pointB:{x:(q.bounds.max.x-q.bounds.min.x)*e,y:(q.bounds.max.y-q.bounds.min.y)*h}},m);l.addConstraint(a,g.create(v))}a.label+=" Chain";return a};b.mesh=function(a,b,d,e,h){var n=a.bodies,u,r,v,m;for(u=0;u<d;u++){for(r=1;r<b;r++)v=n[r-1+u*b],m=n[r+u*b],l.addConstraint(a,g.create(k.extend({bodyA:v,bodyB:m},h)));if(0<u)for(r=0;r<b;r++)v=n[r+(u-1)*b],m=n[r+u*b],
l.addConstraint(a,g.create(k.extend({bodyA:v,bodyB:m},h))),e&&0<r&&(v=n[r-1+(u-1)*b],l.addConstraint(a,g.create(k.extend({bodyA:v,bodyB:m},h)))),e&&r<b-1&&(v=n[r+1+(u-1)*b],l.addConstraint(a,g.create(k.extend({bodyA:v,bodyB:m},h))))}a.label+=" Mesh";return a};b.pyramid=function(a,d,g,l,h,k,u){return b.stack(a,d,g,l,h,k,function(b,d,k,n,m,q){var r=Math.min(l,Math.ceil(g/2));b=m?m.bounds.max.x-m.bounds.min.x:0;if(!(n>r||(n=r-n,r=g-1-n,k<n||k>r)))return 1===q&&e.translate(m,{x:(k+(1===g%2?1:-1))*b,y:0}),
u(a+(m?k*b:0)+k*h,d,k,n,m,q)})};b.newtonsCradle=function(a,b,d,e,h){for(var k=l.create({label:"Newtons Cradle"}),n=0;n<d;n++){var r=t.circle(a+1.9*n*e,b+h,e,{inertia:Infinity,restitution:1,friction:0,frictionAir:1E-4,slop:1}),m=g.create({pointA:{x:a+1.9*n*e,y:b},bodyB:r});l.addBody(k,r);l.addConstraint(k,m)}return k};b.car=function(a,b,d,k,h){var n=e.nextGroup(!0),u=.5*-d+-20,r=.5*d- -20,m=l.create({label:"Car"});d=t.trapezoid(a,b,d,k,.3,{collisionFilter:{group:n},friction:.01,chamfer:{radius:10}});
k=t.circle(a+u,b+0,h,{collisionFilter:{group:n},friction:.8,density:.01});a=t.circle(a+r,b+0,h,{collisionFilter:{group:n},friction:.8,density:.01});u=g.create({bodyA:d,pointA:{x:u,y:0},bodyB:k,stiffness:.2});r=g.create({bodyA:d,pointA:{x:r,y:0},bodyB:a,stiffness:.2});l.addBody(m,d);l.addBody(m,k);l.addBody(m,a);l.addConstraint(m,u);l.addConstraint(m,r);return m};b.softBody=function(a,d,e,g,h,l,u,r,m,G){m=k.extend({inertia:Infinity},m);G=k.extend({stiffness:.4},G);a=b.stack(a,d,e,g,h,l,function(a,
b){return t.circle(a,b,r,m)});b.mesh(a,e,g,u,G);a.label="Soft Body";return a}})()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),g=a("../core/Common");(function(){b.fromVertices=function(a){for(var b={},d=0;d<a.length;d++){var k=(d+1)%a.length,k=l.normalise({x:a[k].y-a[d].y,y:a[d].x-a[k].x}),n=0===k.y?Infinity:k.x/k.y,n=n.toFixed(3).toString();b[n]=k}return g.values(b)};
b.rotate=function(a,b){if(0!==b)for(var d=Math.cos(b),e=Math.sin(b),g=0;g<a.length;g++){var k=a[g],l;l=k.x*d-k.y*e;k.y=k.x*e+k.y*d;k.x=l}}})()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a){var d={min:{x:0,y:0},max:{x:0,y:0}};a&&b.update(d,a);return d};b.update=function(a,b,d){a.min.x=Infinity;a.max.x=-Infinity;a.min.y=Infinity;a.max.y=-Infinity;for(var e=0;e<b.length;e++){var g=b[e];g.x>a.max.x&&(a.max.x=g.x);g.x<a.min.x&&
(a.min.x=g.x);g.y>a.max.y&&(a.max.y=g.y);g.y<a.min.y&&(a.min.y=g.y)}d&&(0<d.x?a.max.x+=d.x:a.min.x+=d.x,0<d.y?a.max.y+=d.y:a.min.y+=d.y)};b.contains=function(a,b){return b.x>=a.min.x&&b.x<=a.max.x&&b.y>=a.min.y&&b.y<=a.max.y};b.overlaps=function(a,b){return a.min.x<=b.max.x&&a.max.x>=b.min.x&&a.max.y>=b.min.y&&a.min.y<=b.max.y};b.translate=function(a,b){a.min.x+=b.x;a.max.x+=b.x;a.min.y+=b.y;a.max.y+=b.y};b.shift=function(a,b){var d=a.max.x-a.min.x,e=a.max.y-a.min.y;a.min.x=b.x;a.max.x=b.x+d;a.min.y=
b.y;a.max.y=b.y+e}})()},{}],27:[function(a,d,m){var b={};d.exports=b;a("../geometry/Bounds");(function(){b.pathToVertices=function(b,d){var e,g,k,l,m,w,h=[],x,u,r=0,v=0,G=0;d=d||15;var z=function(a,b,d){d=1===d%2&&1<d;if(!w||a!=w.x||b!=w.y){w&&d?(x=w.x,u=w.y):u=x=0;var e={x:x+a,y:u+b};if(d||!w)w=e;h.push(e);v=x+a;G=u+b}},P=function(a){var b=a.pathSegTypeAsLetter.toUpperCase();if("Z"!==b){switch(b){case "M":case "L":case "T":case "C":case "S":case "Q":v=a.x;G=a.y;break;case "H":v=a.x;break;case "V":G=
a.y}z(v,G,a.pathSegType)}};a(b);g=b.getTotalLength();k=[];for(e=0;e<b.pathSegList.numberOfItems;e+=1)k.push(b.pathSegList.getItem(e));for(l=k.concat();r<g;){e=b.getPathSegAtLength(r);e=k[e];if(e!=m){for(;l.length&&l[0]!=e;)P(l.shift());m=e}switch(e.pathSegTypeAsLetter.toUpperCase()){case "C":case "T":case "S":case "Q":case "A":e=b.getPointAtLength(r),z(e.x,e.y,0)}r+=d}e=0;for(g=l.length;e<g;++e)P(l[e]);return h};var a=function(a){for(var b,d,g,l,n,m,w=a.pathSegList,h=0,x=0,u=w.numberOfItems,r=0;r<
u;++r){var v=w.getItem(r),G=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(G))"x"in v&&(h=v.x),"y"in v&&(x=v.y);else switch("x1"in v&&(g=h+v.x1),"x2"in v&&(n=h+v.x2),"y1"in v&&(l=x+v.y1),"y2"in v&&(m=x+v.y2),"x"in v&&(h+=v.x),"y"in v&&(x+=v.y),G){case "m":w.replaceItem(a.createSVGPathSegMovetoAbs(h,x),r);break;case "l":w.replaceItem(a.createSVGPathSegLinetoAbs(h,x),r);break;case "h":w.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(h),r);break;case "v":w.replaceItem(a.createSVGPathSegLinetoVerticalAbs(x),
r);break;case "c":w.replaceItem(a.createSVGPathSegCurvetoCubicAbs(h,x,g,l,n,m),r);break;case "s":w.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(h,x,n,m),r);break;case "q":w.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(h,x,g,l),r);break;case "t":w.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(h,x),r);break;case "a":w.replaceItem(a.createSVGPathSegArcAbs(h,x,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),r);break;case "z":case "Z":h=b,x=d}if("M"==G||"m"==G)b=h,d=x}}})()},{"../geometry/Bounds":26}],
28:[function(a,d,m){var b={};d.exports=b;(function(){b.create=function(a,b){return{x:a||0,y:b||0}};b.clone=function(a){return{x:a.x,y:a.y}};b.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};b.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y};b.rotate=function(a,b){var d=Math.cos(b),e=Math.sin(b);return{x:a.x*d-a.y*e,y:a.x*e+a.y*d}};b.rotateAbout=function(a,b,d,e){var g=Math.cos(b);b=Math.sin(b);e||(e={});var k=d.x+((a.x-d.x)*g-(a.y-d.y)*b);e.y=d.y+((a.x-d.x)*b+(a.y-d.y)*g);e.x=k;return e};
b.normalise=function(a){var d=b.magnitude(a);return 0===d?{x:0,y:0}:{x:a.x/d,y:a.y/d}};b.dot=function(a,b){return a.x*b.x+a.y*b.y};b.cross=function(a,b){return a.x*b.y-a.y*b.x};b.cross3=function(a,b,d){return(b.x-a.x)*(d.y-a.y)-(b.y-a.y)*(d.x-a.x)};b.add=function(a,b,d){d||(d={});d.x=a.x+b.x;d.y=a.y+b.y;return d};b.sub=function(a,b,d){d||(d={});d.x=a.x-b.x;d.y=a.y-b.y;return d};b.mult=function(a,b){return{x:a.x*b,y:a.y*b}};b.div=function(a,b){return{x:a.x/b,y:a.y/b}};b.perp=function(a,b){b=!0===b?
-1:1;return{x:b*-a.y,y:b*a.x}};b.neg=function(a){return{x:-a.x,y:-a.y}};b.angle=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)};b._temp=[b.create(),b.create(),b.create(),b.create(),b.create(),b.create()]})()},{}],29:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Vector"),g=a("../core/Common");(function(){b.create=function(a,b){for(var d=[],e=0;e<a.length;e++){var g=a[e];d.push({x:g.x,y:g.y,index:e,body:b,isInternal:!1})}return d};b.fromPath=function(a,d){var e=[];a.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/ig,
function(a,b,d){e.push({x:parseFloat(b),y:parseFloat(d)})});return b.create(e,d)};b.centre=function(a){for(var d=b.area(a,!0),g={x:0,y:0},k,n,m=0;m<a.length;m++)n=(m+1)%a.length,k=l.cross(a[m],a[n]),k=l.mult(l.add(a[m],a[n]),k),g=l.add(g,k);return l.div(g,6*d)};b.mean=function(a){for(var b={x:0,y:0},d=0;d<a.length;d++)b.x+=a[d].x,b.y+=a[d].y;return l.div(b,a.length)};b.area=function(a,b){for(var d=0,e=a.length-1,g=0;g<a.length;g++)d+=(a[e].x-a[g].x)*(a[e].y+a[g].y),e=g;return b?d/2:Math.abs(d)/2};
b.inertia=function(a,b){for(var d=0,e=0,g,k,m=0;m<a.length;m++)k=(m+1)%a.length,g=Math.abs(l.cross(a[k],a[m])),d+=g*(l.dot(a[k],a[k])+l.dot(a[k],a[m])+l.dot(a[m],a[m])),e+=g;return b/6*(d/e)};b.translate=function(a,b,d){var e;if(d)for(e=0;e<a.length;e++)a[e].x+=b.x*d,a[e].y+=b.y*d;else for(e=0;e<a.length;e++)a[e].x+=b.x,a[e].y+=b.y;return a};b.rotate=function(a,b,d){if(0!==b){var e=Math.cos(b);b=Math.sin(b);for(var g=0;g<a.length;g++){var k=a[g],l=k.x-d.x,h=k.y-d.y;k.x=d.x+(l*e-h*b);k.y=d.y+(l*b+
h*e)}return a}};b.contains=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],g=a[(d+1)%a.length];if(0<(b.x-e.x)*(g.y-e.y)+(b.y-e.y)*(e.x-g.x))return!1}return!0};b.scale=function(a,d,g,m){if(1===d&&1===g)return a;m=m||b.centre(a);for(var e,k=0;k<a.length;k++)e=a[k],e=l.sub(e,m),a[k].x=m.x+e.x*d,a[k].y=m.y+e.y*g;return a};b.chamfer=function(a,b,d,m,n){b=b||[8];b.length||(b=[b]);d="undefined"!==typeof d?d:-1;m=m||2;n=n||14;for(var e=[],k=0;k<a.length;k++){var h=a[0<=k-1?k-1:a.length-1],x=a[k],u=a[(k+
1)%a.length],r=b[k<b.length?k:b.length-1];if(0===r)e.push(x);else{var h=l.normalise({x:x.y-h.y,y:h.x-x.x}),v=l.normalise({x:u.y-x.y,y:x.x-u.x}),q=Math.sqrt(2*Math.pow(r,2)),u=l.mult(g.clone(h),r),z=l.normalise(l.mult(l.add(h,v),.5)),x=l.sub(x,l.mult(z,q)),q=d;-1===d&&(q=1.75*Math.pow(r,.32));q=g.clamp(q,m,n);1===q%2&&(q+=1);r=Math.acos(l.dot(h,v))/q;for(h=0;h<q;h++)e.push(l.add(l.rotate(u,r*h),x))}}return e};b.clockwiseSort=function(a){var d=b.mean(a);a.sort(function(a,b){return l.angle(d,a)-l.angle(d,
b)});return a};b.isConvex=function(a){var b=0,d=a.length,g,k,l,m;if(3>d)return null;for(g=0;g<d;g++)if(k=(g+1)%d,l=(g+2)%d,m=(a[k].x-a[g].x)*(a[l].y-a[k].y),m-=(a[k].y-a[g].y)*(a[l].x-a[k].x),0>m?b|=1:0<m&&(b|=2),3===b)return!1;return 0!==b?!0:null};b.hull=function(a){var b=[],d=[],g,k;a=a.slice(0);a.sort(function(a,b){var d=a.x-b.x;return 0!==d?d:a.y-b.y});for(k=0;k<a.length;k++){for(g=a[k];2<=d.length&&0>=l.cross3(d[d.length-2],d[d.length-1],g);)d.pop();d.push(g)}for(k=a.length-1;0<=k;k--){for(g=
a[k];2<=b.length&&0>=l.cross3(b[b.length-2],b[b.length-1],g);)b.pop();b.push(g)}b.pop();d.pop();return b.concat(d)}})()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(a,d,m){d=d.exports=a("../core/Matter");d.Body=a("../body/Body");d.Composite=a("../body/Composite");d.World=a("../body/World");d.Contact=a("../collision/Contact");d.Detector=a("../collision/Detector");d.Grid=a("../collision/Grid");d.Pairs=a("../collision/Pairs");d.Pair=a("../collision/Pair");d.Query=a("../collision/Query");
d.Resolver=a("../collision/Resolver");d.SAT=a("../collision/SAT");d.Constraint=a("../constraint/Constraint");d.MouseConstraint=a("../constraint/MouseConstraint");d.Common=a("../core/Common");d.Engine=a("../core/Engine");d.Events=a("../core/Events");d.Mouse=a("../core/Mouse");d.Runner=a("../core/Runner");d.Sleeping=a("../core/Sleeping");d.Plugin=a("../core/Plugin");d.Bodies=a("../factory/Bodies");d.Composites=a("../factory/Composites");d.Axes=a("../geometry/Axes");d.Bounds=a("../geometry/Bounds");
d.Svg=a("../geometry/Svg");d.Vector=a("../geometry/Vector");d.Vertices=a("../geometry/Vertices");d.Render=a("../render/Render");d.RenderPixi=a("../render/RenderPixi");d.World.add=d.Composite.add;d.World.remove=d.Composite.remove;d.World.addComposite=d.Composite.addComposite;d.World.addBody=d.Composite.addBody;d.World.addConstraint=d.Composite.addConstraint;d.World.clear=d.Composite.clear;d.Engine.run=d.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,
"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,
"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(a,d,m){var b={};d.exports=b;var l=a("../core/Common"),g=a("../body/Composite"),k=a("../geometry/Bounds"),e=a("../core/Events"),t=a("../collision/Grid"),q=a("../geometry/Vector");(function(){var a,d;"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(l.now())},
1E3/60)},d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);b.create=function(a){var d=l.extend({controller:b,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222",hasBounds:!!a.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,
showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},a);d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height);d.mouse=a.mouse;d.engine=a.engine;d.canvas=d.canvas||m(d.options.width,d.options.height);d.context=d.canvas.getContext("2d");d.textures={};d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}};1!==d.options.pixelRatio&&
b.setPixelRatio(d,d.options.pixelRatio);l.isElement(d.element)?d.element.appendChild(d.canvas):l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn");return d};b.run=function(d){(function u(h){d.frameRequestId=a(u);b.world(d)})()};b.stop=function(a){d(a.frameRequestId)};b.setPixelRatio=function(a,b){var d=a.options,h=a.canvas;if("auto"===b){var e=h.getContext("2d");b=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||
e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}d.pixelRatio=b;h.setAttribute("data-pixel-ratio",b);h.width=d.width*b;h.height=d.height*b;h.style.width=d.width+"px";h.style.height=d.height+"px";a.context.scale(b,b)};b.world=function(a){var d=a.engine,h=d.world,l=a.canvas,m=a.context,n=a.options,p=g.allBodies(h),h=g.allConstraints(h),w=n.wireframes?n.wireframeBackground:n.background,y=[],D=[],F={timestamp:d.timing.timestamp};e.trigger(a,"beforeRender",F);if(a.currentBackground!==
w){var E=w;/(jpg|gif|png)$/.test(w)&&(E="url("+w+")");a.canvas.style.background=E;a.canvas.style.backgroundSize="contain";a.currentBackground=w}m.globalCompositeOperation="source-in";m.fillStyle="transparent";m.fillRect(0,0,l.width,l.height);m.globalCompositeOperation="source-over";if(n.hasBounds){w=(a.bounds.max.x-a.bounds.min.x)/n.width;E=(a.bounds.max.y-a.bounds.min.y)/n.height;for(l=0;l<p.length;l++){var A=p[l];k.overlaps(A.bounds,a.bounds)&&y.push(A)}for(l=0;l<h.length;l++){var p=h[l],A=p.bodyA,
B=p.bodyB,C=p.pointA,L=p.pointB;A&&(C=q.add(A.position,p.pointA));B&&(L=q.add(B.position,p.pointB));C&&L&&(k.contains(a.bounds,C)||k.contains(a.bounds,L))&&D.push(p)}m.scale(1/w,1/E);m.translate(-a.bounds.min.x,-a.bounds.min.y)}else D=h,y=p;!n.wireframes||d.enableSleeping&&n.showSleeping?b.bodies(a,y,m):(n.showConvexHulls&&b.bodyConvexHulls(a,y,m),b.bodyWireframes(a,y,m));n.showBounds&&b.bodyBounds(a,y,m);(n.showAxes||n.showAngleIndicator)&&b.bodyAxes(a,y,m);n.showPositions&&b.bodyPositions(a,y,m);
n.showVelocity&&b.bodyVelocity(a,y,m);n.showIds&&b.bodyIds(a,y,m);n.showSeparations&&b.separations(a,d.pairs.list,m);n.showCollisions&&b.collisions(a,d.pairs.list,m);n.showVertexNumbers&&b.vertexNumbers(a,y,m);n.showMousePosition&&b.mousePosition(a,a.mouse,m);b.constraints(D,m);n.showBroadphase&&d.broadphase.controller===t&&b.grid(a,d.broadphase,m);n.showDebug&&b.debug(a,m);n.hasBounds&&m.setTransform(n.pixelRatio,0,0,n.pixelRatio,0,0);e.trigger(a,"afterRender",F)};b.debug=function(a,b){var d=a.engine,
h=d.metrics,e=a.options;g.allBodies(d.world);if(500<=d.timing.timestamp-(a.debugTimestamp||0)){var k="";h.timing&&(k+="fps: "+Math.round(h.timing.fps)+"    ");a.debugString=k;a.debugTimestamp=d.timing.timestamp}if(a.debugString)for(b.font="12px Arial",b.fillStyle=e.wireframes?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",d=a.debugString.split("\n"),h=0;h<d.length;h++)b.fillText(d[h],50,50+18*h)};b.constraints=function(a,b){for(var d=0;d<a.length;d++){var h=a[d];if(h.render.visible&&h.pointA&&h.pointB){var e=
h.bodyA,g=h.bodyB;e?(b.beginPath(),b.moveTo(e.position.x+h.pointA.x,e.position.y+h.pointA.y)):(b.beginPath(),b.moveTo(h.pointA.x,h.pointA.y));g?b.lineTo(g.position.x+h.pointB.x,g.position.y+h.pointB.y):b.lineTo(h.pointB.x,h.pointB.y);b.lineWidth=h.render.lineWidth;b.strokeStyle=h.render.strokeStyle;b.stroke()}}};b.bodyShadows=function(a,b,d){for(var h=0;h<b.length;h++){var e=b[h];if(e.render.visible){if(e.circleRadius)d.beginPath(),d.arc(e.position.x,e.position.y,e.circleRadius,0,2*Math.PI);else{d.beginPath();
d.moveTo(e.vertices[0].x,e.vertices[0].y);for(var g=1;g<e.vertices.length;g++)d.lineTo(e.vertices[g].x,e.vertices[g].y)}d.closePath();var g=e.position.x-.5*a.options.width,e=e.position.y-.2*a.options.height,k=Math.abs(g)+Math.abs(e);d.shadowColor="rgba(0,0,0,0.15)";d.shadowOffsetX=.05*g;d.shadowOffsetY=.05*e;d.shadowBlur=1+12*Math.min(1,k/1E3);d.fill();d.shadowColor=null;d.shadowOffsetX=null;d.shadowOffsetY=null;d.shadowBlur=null}}};b.bodies=function(a,b,d){var h=a.options,e=h.showInternalEdges||
!h.wireframes,g,k,l,m;for(l=0;l<b.length;l++)if(g=b[l],g.render.visible)for(m=1<g.parts.length?1:0;m<g.parts.length;m++)if(k=g.parts[m],k.render.visible){h.showSleeping&&g.isSleeping?d.globalAlpha=.5*k.render.opacity:1!==k.render.opacity&&(d.globalAlpha=k.render.opacity);if(k.render.sprite&&k.render.sprite.texture&&!h.wireframes){var n=k.render.sprite,u;u=n.texture;var p=a.textures[u];p||(p=a.textures[u]=new Image,p.src=u);u=p;d.translate(k.position.x,k.position.y);d.rotate(k.angle);d.drawImage(u,
u.width*-n.xOffset*n.xScale,u.height*-n.yOffset*n.yScale,u.width*n.xScale,u.height*n.yScale);d.rotate(-k.angle);d.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)d.beginPath(),d.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{d.beginPath();d.moveTo(k.vertices[0].x,k.vertices[0].y);for(n=1;n<k.vertices.length;n++)!k.vertices[n-1].isInternal||e?d.lineTo(k.vertices[n].x,k.vertices[n].y):d.moveTo(k.vertices[n].x,k.vertices[n].y),k.vertices[n].isInternal&&!e&&d.moveTo(k.vertices[(n+
1)%k.vertices.length].x,k.vertices[(n+1)%k.vertices.length].y);d.lineTo(k.vertices[0].x,k.vertices[0].y);d.closePath()}h.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb"):(d.fillStyle=k.render.fillStyle,d.lineWidth=k.render.lineWidth,d.strokeStyle=k.render.strokeStyle,d.fill());d.stroke()}d.globalAlpha=1}};b.bodyWireframes=function(a,b,d){a=a.options.showInternalEdges;var h,e,g,k,l;d.beginPath();for(g=0;g<b.length;g++)if(h=b[g],h.render.visible)for(l=1<h.parts.length?1:0;l<h.parts.length;l++){e=h.parts[l];
d.moveTo(e.vertices[0].x,e.vertices[0].y);for(k=1;k<e.vertices.length;k++)!e.vertices[k-1].isInternal||a?d.lineTo(e.vertices[k].x,e.vertices[k].y):d.moveTo(e.vertices[k].x,e.vertices[k].y),e.vertices[k].isInternal&&!a&&d.moveTo(e.vertices[(k+1)%e.vertices.length].x,e.vertices[(k+1)%e.vertices.length].y);d.lineTo(e.vertices[0].x,e.vertices[0].y)}d.lineWidth=1;d.strokeStyle="#bbb";d.stroke()};b.bodyConvexHulls=function(a,b,d){var e,h;d.beginPath();for(e=0;e<b.length;e++)if(a=b[e],a.render.visible&&
1!==a.parts.length){d.moveTo(a.vertices[0].x,a.vertices[0].y);for(h=1;h<a.vertices.length;h++)d.lineTo(a.vertices[h].x,a.vertices[h].y);d.lineTo(a.vertices[0].x,a.vertices[0].y)}d.lineWidth=1;d.strokeStyle="rgba(255,255,255,0.2)";d.stroke()};b.vertexNumbers=function(a,b,d){var e,h;for(a=0;a<b.length;a++){var g=b[a].parts;for(h=1<g.length?1:0;h<g.length;h++){var k=g[h];for(e=0;e<k.vertices.length;e++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(a+"_"+e,k.position.x+.8*(k.vertices[e].x-k.position.x),
k.position.y+.8*(k.vertices[e].y-k.position.y))}}};b.mousePosition=function(a,b,d){d.fillStyle="rgba(255,255,255,0.8)";d.fillText(b.position.x+"  "+b.position.y,b.position.x+5,b.position.y-5)};b.bodyBounds=function(a,b,d){a=a.options;d.beginPath();for(var e=0;e<b.length;e++)if(b[e].render.visible)for(var h=b[e].parts,g=1<h.length?1:0;g<h.length;g++){var k=h[g];d.rect(k.bounds.min.x,k.bounds.min.y,k.bounds.max.x-k.bounds.min.x,k.bounds.max.y-k.bounds.min.y)}d.strokeStyle=a.wireframes?"rgba(255,255,255,0.08)":
"rgba(0,0,0,0.1)";d.lineWidth=1;d.stroke()};b.bodyAxes=function(a,b,d){a=a.options;var e,h,g,k;d.beginPath();for(h=0;h<b.length;h++){e=b[h];var l=e.parts;if(e.render.visible)if(a.showAxes)for(g=1<l.length?1:0;g<l.length;g++)for(e=l[g],k=0;k<e.axes.length;k++){var m=e.axes[k];d.moveTo(e.position.x,e.position.y);d.lineTo(e.position.x+20*m.x,e.position.y+20*m.y)}else for(g=1<l.length?1:0;g<l.length;g++)for(e=l[g],k=0;k<e.axes.length;k++)d.moveTo(e.position.x,e.position.y),d.lineTo((e.vertices[0].x+e.vertices[e.vertices.length-
1].x)/2,(e.vertices[0].y+e.vertices[e.vertices.length-1].y)/2)}a.wireframes?d.strokeStyle="indianred":(d.strokeStyle="rgba(0,0,0,0.8)",d.globalCompositeOperation="overlay");d.lineWidth=1;d.stroke();d.globalCompositeOperation="source-over"};b.bodyPositions=function(a,b,d){a=a.options;var e,h,g,k;d.beginPath();for(g=0;g<b.length;g++)if(e=b[g],e.render.visible)for(k=0;k<e.parts.length;k++)h=e.parts[k],d.arc(h.position.x,h.position.y,3,0,2*Math.PI,!1),d.closePath();d.fillStyle=a.wireframes?"indianred":
"rgba(0,0,0,0.5)";d.fill();d.beginPath();for(g=0;g<b.length;g++)e=b[g],e.render.visible&&(d.arc(e.positionPrev.x,e.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)";d.fill()};b.bodyVelocity=function(a,b,d){d.beginPath();for(a=0;a<b.length;a++){var e=b[a];e.render.visible&&(d.moveTo(e.position.x,e.position.y),d.lineTo(e.position.x+2*(e.position.x-e.positionPrev.x),e.position.y+2*(e.position.y-e.positionPrev.y)))}d.lineWidth=3;d.strokeStyle="cornflowerblue";d.stroke()};
b.bodyIds=function(a,b,d){var e;for(a=0;a<b.length;a++)if(b[a].render.visible){var g=b[a].parts;for(e=1<g.length?1:0;e<g.length;e++){var h=g[e];d.font="12px Arial";d.fillStyle="rgba(255,255,255,0.5)";d.fillText(h.id,h.position.x+10,h.position.y-10)}}};b.collisions=function(a,b,d){a=a.options;var e,g,h;d.beginPath();for(h=0;h<b.length;h++)if(e=b[h],e.isActive)for(g=0;g<e.activeContacts.length;g++){var k=e.activeContacts[g].vertex;d.rect(k.x-1.5,k.y-1.5,3.5,3.5)}d.fillStyle=a.wireframes?"rgba(255,255,255,0.7)":
"orange";d.fill();d.beginPath();for(h=0;h<b.length;h++)if(e=b[h],e.isActive&&(g=e.collision,0<e.activeContacts.length)){var k=e.activeContacts[0].vertex.x,l=e.activeContacts[0].vertex.y;2===e.activeContacts.length&&(k=(e.activeContacts[0].vertex.x+e.activeContacts[1].vertex.x)/2,l=(e.activeContacts[0].vertex.y+e.activeContacts[1].vertex.y)/2);g.bodyB===g.supports[0].body||!0===g.bodyA.isStatic?d.moveTo(k-8*g.normal.x,l-8*g.normal.y):d.moveTo(k+8*g.normal.x,l+8*g.normal.y);d.lineTo(k,l)}d.strokeStyle=
a.wireframes?"rgba(255,165,0,0.7)":"orange";d.lineWidth=1;d.stroke()};b.separations=function(a,b,d){a=a.options;var e,g,h,k;d.beginPath();for(k=0;k<b.length;k++)if(e=b[k],e.isActive){e=e.collision;g=e.bodyA;h=e.bodyB;var l=1;h.isStatic||g.isStatic||(l=.5);h.isStatic&&(l=0);d.moveTo(h.position.x,h.position.y);d.lineTo(h.position.x-e.penetration.x*l,h.position.y-e.penetration.y*l);l=1;h.isStatic||g.isStatic||(l=.5);g.isStatic&&(l=0);d.moveTo(g.position.x,g.position.y);d.lineTo(g.position.x+e.penetration.x*
l,g.position.y+e.penetration.y*l)}d.strokeStyle=a.wireframes?"rgba(255,165,0,0.5)":"orange";d.stroke()};b.grid=function(a,b,d){d.strokeStyle=a.options.wireframes?"rgba(255,180,0,0.1)":"rgba(255,180,0,0.5)";d.beginPath();a=l.keys(b.buckets);for(var e=0;e<a.length;e++){var g=a[e];2>b.buckets[g].length||(g=g.split(","),d.rect(.5+parseInt(g[0],10)*b.bucketWidth,.5+parseInt(g[1],10)*b.bucketHeight,b.bucketWidth,b.bucketHeight))}d.lineWidth=1;d.stroke()};b.inspector=function(a,b){var d=a.selected,e=a.render,
g=e.options,h;g.hasBounds&&(b.scale(1/((e.bounds.max.x-e.bounds.min.x)/e.options.width),1/((e.bounds.max.y-e.bounds.min.y)/e.options.height)),b.translate(-e.bounds.min.x,-e.bounds.min.y));for(e=0;e<d.length;e++){h=d[e].data;b.translate(.5,.5);b.lineWidth=1;b.strokeStyle="rgba(255,165,0,0.9)";b.setLineDash([1,2]);switch(h.type){case "body":h=h.bounds;b.beginPath();b.rect(Math.floor(h.min.x-3),Math.floor(h.min.y-3),Math.floor(h.max.x-h.min.x+6),Math.floor(h.max.y-h.min.y+6));b.closePath();b.stroke();
break;case "constraint":var k=h.pointA;h.bodyA&&(k=h.pointB);b.beginPath();b.arc(k.x,k.y,10,0,2*Math.PI);b.closePath();b.stroke()}b.setLineDash([]);b.translate(-.5,-.5)}null!==a.selectStart&&(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.6)",b.fillStyle="rgba(255,165,0,0.1)",h=a.selectBounds,b.beginPath(),b.rect(Math.floor(h.min.x),Math.floor(h.min.y),Math.floor(h.max.x-h.min.x),Math.floor(h.max.y-h.min.y)),b.closePath(),b.stroke(),b.fill(),b.translate(-.5,-.5));g.hasBounds&&b.setTransform(1,
0,0,1,0,0)};var m=function(a,b){var d=document.createElement("canvas");d.width=a;d.height=b;d.oncontextmenu=function(){return!1};d.onselectstart=function(){return!1};return d}})()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(a,d,m){var b={};d.exports=b;var l=a("../geometry/Bounds"),g=a("../body/Composite"),k=a("../core/Common"),e=a("../core/Events"),t=a("../geometry/Vector");(function(){var a,d;
"undefined"!==typeof window&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(k.now())},1E3/60)},d=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame);b.create=function(a){k.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var d=k.extend({controller:b,engine:null,element:null,
frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},a),g=!d.options.wireframes&&"transparent"===d.options.background;d.pixiOptions=d.pixiOptions||{view:d.canvas,transparent:g,
antialias:!0,backgroundColor:a.background};d.mouse=a.mouse;d.engine=a.engine;d.renderer=d.renderer||new PIXI.WebGLRenderer(d.options.width,d.options.height,d.pixiOptions);d.container=d.container||new PIXI.Container;d.spriteContainer=d.spriteContainer||new PIXI.Container;d.canvas=d.canvas||d.renderer.view;d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.options.width,y:d.options.height}};e.on(d.engine,"beforeUpdate",function(){b.clear(d)});d.textures={};d.sprites={};d.primitives={};d.container.addChild(d.spriteContainer);
k.isElement(d.element)?d.element.appendChild(d.canvas):k.warn('No "render.element" passed, "render.canvas" was not inserted into document.');d.canvas.oncontextmenu=function(){return!1};d.canvas.onselectstart=function(){return!1};return d};b.run=function(d){(function x(e){d.frameRequestId=a(x);b.world(d)})()};b.stop=function(a){d(a.frameRequestId)};b.clear=function(a){for(var b=a.container,d=a.spriteContainer;b.children[0];)b.removeChild(b.children[0]);for(;d.children[0];)d.removeChild(d.children[0]);
d=a.sprites["bg-0"];a.textures={};a.sprites={};a.primitives={};(a.sprites["bg-0"]=d)&&b.addChildAt(d,0);a.container.addChild(a.spriteContainer);a.currentBackground=null;b.scale.set(1,1);b.position.set(0,0)};b.setBackground=function(a,b){if(a.currentBackground!==b){var d=b.indexOf&&-1!==b.indexOf("#"),e=a.sprites["bg-0"];d?(d=k.colorToNumber(b),a.renderer.backgroundColor=d,e&&a.container.removeChild(e)):e||(e=m(a,b),e=a.sprites["bg-0"]=new PIXI.Sprite(e),e.position.x=0,e.position.y=0,a.container.addChildAt(e,
0));a.currentBackground=b}};b.world=function(a){var d=a.engine.world,e=a.renderer,k=a.container,m=a.options,n=g.allBodies(d),d=g.allConstraints(d),p=[];m.wireframes?b.setBackground(a,m.wireframeBackground):b.setBackground(a,m.background);var q=(a.bounds.max.x-a.bounds.min.x)/a.options.width,w=(a.bounds.max.y-a.bounds.min.y)/a.options.height;if(m.hasBounds){for(m=0;m<n.length;m++){var y=n[m];y.render.sprite.visible=l.overlaps(y.bounds,a.bounds)}for(m=0;m<d.length;m++){var y=d[m],D=y.bodyA,F=y.bodyB,
E=y.pointA,A=y.pointB;D&&(E=t.add(D.position,y.pointA));F&&(A=t.add(F.position,y.pointB));E&&A&&(l.contains(a.bounds,E)||l.contains(a.bounds,A))&&p.push(y)}k.scale.set(1/q,1/w);k.position.set(1/q*-a.bounds.min.x,1/w*-a.bounds.min.y)}else p=d;for(m=0;m<n.length;m++)b.body(a,n[m]);for(m=0;m<p.length;m++)b.constraint(a,p[m]);e.render(k)};b.constraint=function(a,b){var d=b.bodyA,e=b.bodyB,g=b.pointA,h=b.pointB,l=a.container,m=b.render,n="c-"+b.id,p=a.primitives[n];p||(p=a.primitives[n]=new PIXI.Graphics);
m.visible&&b.pointA&&b.pointB?(-1===k.indexOf(l.children,p)&&l.addChild(p),p.clear(),p.beginFill(0,0),p.lineStyle(m.lineWidth,k.colorToNumber(m.strokeStyle),1),d?p.moveTo(d.position.x+g.x,d.position.y+g.y):p.moveTo(g.x,g.y),e?p.lineTo(e.position.x+h.x,e.position.y+h.y):p.lineTo(h.x,h.y),p.endFill()):p.clear()};b.body=function(a,b){var d=b.render;if(d.visible)if(d.sprite&&d.sprite.texture){var e="b-"+b.id,g=a.sprites[e],h=a.spriteContainer;if(!g){var g=a.sprites,l=m(a,b.render.sprite.texture),l=new PIXI.Sprite(l);
l.anchor.x=b.render.sprite.xOffset;l.anchor.y=b.render.sprite.yOffset;g=g[e]=l}-1===k.indexOf(h.children,g)&&h.addChild(g);g.position.x=b.position.x;g.position.y=b.position.y;g.rotation=b.angle;g.scale.x=d.sprite.xScale||1;g.scale.y=d.sprite.yScale||1}else{d="b-"+b.id;h=a.primitives[d];e=a.container;if(!h){var h=a.primitives,g=b.render,l=a.options,n=new PIXI.Graphics,p=k.colorToNumber(g.fillStyle),q=k.colorToNumber(g.strokeStyle),t=k.colorToNumber(g.strokeStyle),w=k.colorToNumber("#bbb"),E=k.colorToNumber("#CD5C5C"),
A;n.clear();for(var B=1<b.parts.length?1:0;B<b.parts.length;B++){A=b.parts[B];l.wireframes?(n.beginFill(0,0),n.lineStyle(1,w,1)):(n.beginFill(p,1),n.lineStyle(g.lineWidth,q,1));n.moveTo(A.vertices[0].x-b.position.x,A.vertices[0].y-b.position.y);for(var C=1;C<A.vertices.length;C++)n.lineTo(A.vertices[C].x-b.position.x,A.vertices[C].y-b.position.y);n.lineTo(A.vertices[0].x-b.position.x,A.vertices[0].y-b.position.y);n.endFill();if(l.showAngleIndicator||l.showAxes)n.beginFill(0,0),l.wireframes?n.lineStyle(1,
E,1):n.lineStyle(1,t),n.moveTo(A.position.x-b.position.x,A.position.y-b.position.y),n.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2-b.position.x,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2-b.position.y),n.endFill()}h=h[d]=n;h.initialAngle=b.angle}-1===k.indexOf(e.children,h)&&e.addChild(h);h.position.x=b.position.x;h.position.y=b.position.y;h.rotation=b.angle-h.initialAngle}};var m=function(a,b){var d=a.textures[b];d||(d=a.textures[b]=PIXI.Texture.fromImage(b));return d}})()},
{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)});"use strict";var http_$$qq_never_pro$release$classdecl$var0=function(f,a,d,m,b){var l=this;this._scroll={isActive:!1,prevM1:!1};this._posEpsilon=5;this._canvas=f;this._width=a;this._height=d;this._x=void 0===m?0:m;this._y=void 0===b?0:b;this._mainMatrix=0;this._clip=null;this._calcMainMatrix();window.addEventListener("resize",function(){return l._calcMainMatrix()})};
http_$$qq_never_pro$release$classdecl$var0.prototype.draw=function(f){f=$jscomp.makeIterator(f);for(var a=f.next();!a.done;a=f.next()){var a=a.value,d=a.getPosition(),m=a.getScale(),b=a.getAngle(),l=QQ.Matrix.getIdentity(),l=QQ.Matrix.mul(l,QQ.Matrix.getScale(m.x,-m.y)),l=QQ.Matrix.mul(l,QQ.Matrix.getRotate(-b)),l=QQ.Matrix.mul(l,QQ.Matrix.getMove(d.x,d.y)),l=QQ.Matrix.mul(l,this._mainMatrix);this._canvas.getContext("2d").setTransform(l[0][0],l[0][1],l[1][0],l[1][1],l[2][0],l[2][1]);a.draw()}};
http_$$qq_never_pro$release$classdecl$var0.prototype.drawHud=function(f){f=$jscomp.makeIterator(f);for(var a=f.next();!a.done;a=f.next()){var a=a.value,d=a.getPosition(),m=a.getScale(),b=this.widthPercent(m.x),m=this.heightPercent(m.y);0===m&&(m=b);var l=QQ.Matrix.getIdentity(),l=QQ.Matrix.mul(l,QQ.Matrix.getScale(b,m)),l=QQ.Matrix.mul(l,QQ.Matrix.getMove(this.widthPercent(d.x),this.heightPercent(d.y)));this._canvas.getContext("2d").setTransform(l[0][0],l[0][1],l[1][0],l[1][1],l[2][0],l[2][1]);a.draw()}};
http_$$qq_never_pro$release$classdecl$var0.prototype.isScrolling=function(){return this._scroll.isActive};
http_$$qq_never_pro$release$classdecl$var0.prototype.tickScroll=function(f,a,d){var m=this._scroll;if(0<=f&&0<=a)if(!m.prevM1&&d)m.prevM1=d,m.isActive=!1,m.startX=f,m.startY=a;else if(m.prevM1&&!d)m.prevM1=d,m.isActive=!1;else{var b=this._isPositionsClose(f,a,m.startX,m.startY);!d||m.isActive||b||(d=this.getWorldPoint(f,a),m.isActive=!0,m.scrollX=d.x,m.scrollY=d.y);m.isActive&&(d=this.getWorldPoint(f,a),this.addPos(m.scrollX-d.x,m.scrollY-d.y),f=this.getWorldPoint(f,a),m.scrollX=f.x,m.scrollY=f.y)}else m.prevM1=
!1,m.isActive=!1};http_$$qq_never_pro$release$classdecl$var0.prototype.getViewRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};http_$$qq_never_pro$release$classdecl$var0.prototype.getWorldPoint=function(f,a){var d=QQ.Matrix.mul([[f,a,1]],QQ.Matrix.inverse(this._mainMatrix));return{x:d[0][0],y:d[0][1]}};http_$$qq_never_pro$release$classdecl$var0.prototype.getPosition=function(){return{x:this._x,y:this._y}};
http_$$qq_never_pro$release$classdecl$var0.prototype.setClip=function(f,a,d,m){this._clip={maxX:f,minX:a,maxY:d,minY:m}};http_$$qq_never_pro$release$classdecl$var0.prototype.setPos=function(f,a){this._x=f;this._y=a;this._calcMainMatrix()};http_$$qq_never_pro$release$classdecl$var0.prototype.addPos=function(f,a){this._x+=f;this._y+=a;this._calcMainMatrix()};http_$$qq_never_pro$release$classdecl$var0.prototype.addView=function(f,a){this._width+=f;this._height+=a;this._calcMainMatrix()};
http_$$qq_never_pro$release$classdecl$var0.prototype.setView=function(f,a){this._width=f;this._height=a;this._calcMainMatrix()};http_$$qq_never_pro$release$classdecl$var0.prototype.widthToPercent=function(f){return f/(this._canvas.width/100)};http_$$qq_never_pro$release$classdecl$var0.prototype.heightToPercent=function(f){return f/(this._canvas.height/100)};http_$$qq_never_pro$release$classdecl$var0.prototype.widthPercent=function(f){return this._canvas.width*f/100};
http_$$qq_never_pro$release$classdecl$var0.prototype.heightPercent=function(f){return this._canvas.height*f/100};http_$$qq_never_pro$release$classdecl$var0.prototype._isPositionsClose=function(f,a,d,m){return Math.abs(f-d)<this._posEpsilon&&Math.abs(a-m)<this._posEpsilon};
http_$$qq_never_pro$release$classdecl$var0.prototype._fixClip=function(){null!==this._clip&&(this._x>this._clip.maxX&&(this._x=this._clip.maxX),this._x<this._clip.minX&&(this._x=this._clip.minX),this._y>this._clip.maxY&&(this._y=this._clip.maxY),this._y<this._clip.minY&&(this._y=this._clip.minY))};http_$$qq_never_pro$release$classdecl$var0.prototype._calcMainMatrix=function(){this._fixClip();this._mainMatrix=QQ.Matrix.mul(this._getInverseMatrix(),this._getScreenMatrix())};
http_$$qq_never_pro$release$classdecl$var0.prototype._drawAxis=function(){var f=this._mainMatrix,a=this._canvas.getContext("2d");a.setTransform(f[0][0],f[0][1],f[1][0],f[1][1],f[2][0],f[2][1]);for(f=-10;10>=f;f++)a.beginPath(),a.moveTo(-10,f),a.lineTo(10,f),a.lineWidth=.1,a.strokeStyle="#00ff00",a.stroke();for(f=-10;10>=f;f++)a.beginPath(),a.moveTo(f,-10),a.lineTo(f,10),a.lineWidth=.1,a.strokeStyle="#00ff00",a.stroke();a.fillStyle="#FF0000";a.fillRect(-.1,-.1,.2,.2);a.fillStyle="#0000FF";a.fillRect(10,
10,.2,.2)};http_$$qq_never_pro$release$classdecl$var0.prototype._getMatrix=function(){var f=QQ.Matrix.getIdentity(),f=QQ.Matrix.mul(f,QQ.Matrix.getScale(1,1)),f=QQ.Matrix.mul(f,QQ.Matrix.getRotate(0));return f=QQ.Matrix.mul(f,QQ.Matrix.getMove(this._x,this._y))};http_$$qq_never_pro$release$classdecl$var0.prototype._getInverseMatrix=function(){return QQ.Matrix.inverse(this._getMatrix())};
http_$$qq_never_pro$release$classdecl$var0.prototype._getScreenMatrix=function(){var f=QQ.Matrix.getIdentity(),f=QQ.Matrix.mul(f,QQ.Matrix.getRotate(0)),f=QQ.Matrix.mul(f,QQ.Matrix.getScale(this._canvas.width/this._width,-this._canvas.height/this._height));return f=QQ.Matrix.mul(f,QQ.Matrix.getMove(this._canvas.width/2,this._canvas.height/2))};
http_$$qq_never_pro$release$classdecl$var0.prototype._cleanCanvas=function(){var f=this._canvas.getContext("2d");f.fillStyle="gray";f.fillRect(0,0,this._canvas.width,this._canvas.height)};QQ.Camera=http_$$qq_never_pro$release$classdecl$var0;"use strict";
var http_$$qq_never_pro$release$classdecl$var1=function(f,a,d,m){var b=this;this._maximize=void 0===m?!1:m;this._fullscreen=void 0===a||void 0===d;this._width=null;this._w=a;this._height=null;this._h=d;this._scale=1;this._ut=null;this._canvas=document.createElement("canvas");this._context=this._canvas.getContext("2d");this._canvas.id=f;this._canvas.style.position="absolute";this._calcSize();document.body.appendChild(this._canvas);window.addEventListener("resize",function(){return b.resize()});this._context.imageSmoothingEnabled=
!0};http_$$qq_never_pro$release$classdecl$var1.prototype.getWidth=function(){return this._width};http_$$qq_never_pro$release$classdecl$var1.prototype.getHeight=function(){return this._height};http_$$qq_never_pro$release$classdecl$var1.prototype.getUt=function(){return this._ut};http_$$qq_never_pro$release$classdecl$var1.prototype.getCanvas=function(){return this._canvas};http_$$qq_never_pro$release$classdecl$var1.prototype.getContext=function(){return this._context};
http_$$qq_never_pro$release$classdecl$var1.prototype.getScale=function(){return this._scale};http_$$qq_never_pro$release$classdecl$var1.prototype.getRatio=function(){return this._width/this._height};http_$$qq_never_pro$release$classdecl$var1.prototype.resize=function(){this._calcSize()};
http_$$qq_never_pro$release$classdecl$var1.prototype.drawBorder=function(){var f=this._context;f.setTransform(1,0,0,1,0,0,0);f.beginPath();f.rect(0,0,this._width,this._height);f.lineWidth=this._ut;f.strokeStyle="black";f.stroke()};http_$$qq_never_pro$release$classdecl$var1.prototype.remove=function(){document.body.removeChild(this._canvas)};
http_$$qq_never_pro$release$classdecl$var1.prototype._calcSize=function(){if(this._fullscreen)this._width=window.innerWidth,this._height=window.innerHeight,this._scale=1;else{if(this._maximize){var f=this._w/this._h;this._width=window.innerWidth;this._height=Math.floor(this._width/f);window.innerHeight<this._height&&(this._height=window.innerHeight,this._width=Math.floor(this._height*f))}else this._width=this._w,this._height=this._h,window.innerWidth<this._width&&(this._height=Math.floor(window.innerWidth/
this._width*this._height),this._width=Math.floor(window.innerWidth)),window.innerHeight<this._height&&(this._width=Math.floor(window.innerHeight/this._height*this._width),this._height=Math.floor(window.innerHeight));this._scale=this._width/this._w}this._ut=this._width/100;this._calcCanvasSize()};
http_$$qq_never_pro$release$classdecl$var1.prototype._calcCanvasSize=function(){var f=this._canvas;f.width=this._width;f.height=this._height;f.style.left=window.innerWidth/2-this._width/2+"px";f.style.top=window.innerHeight/2-this._height/2+"px";this._context.font="bold "+Math.floor(20*this.getScale())+"pxdefaultFont"};QQ.Canvas=http_$$qq_never_pro$release$classdecl$var1;"use strict";
var http_$$qq_never_pro$release$classdecl$var2=function(){this._iSlot=this._fpsToShow=this._accumFps=this._accumDelta=0;this._maxSlots=10;this._details=!1;this._slots=[];this._font="10px defaultFont"};http_$$qq_never_pro$release$classdecl$var2.prototype.showDetails=function(){this._details=!this._details};
http_$$qq_never_pro$release$classdecl$var2.prototype.tick=function(f){this._slots[this._iSlot]=Math.floor(1/f);this._iSlot=(this._iSlot+1)%this._maxSlots;++this._accumFps;this._accumDelta+=f;1<this._accumDelta&&(this._fpsToShow=this._accumFps,this._accumDelta=this._accumFps=0)};
http_$$qq_never_pro$release$classdecl$var2.prototype.show=function(f){if(this._details){f.setTransform(1,0,0,1,0,0,0);f.font=this._font;f.textBaseline="middle";f.textAlign="center";for(var a=0,d=$jscomp.makeIterator(this._slots),m=d.next();!m.done;m=d.next())m=m.value,f.fillStyle="green",99<m&&(f.fillStyle="white"),55>m&&(f.fillStyle="yellow"),50>m&&(f.fillStyle="red"),f.fillText(m+" FPS",20,20+15*a),++a}};QQ.FpsCounter=http_$$qq_never_pro$release$classdecl$var2;"use strict";
var http_$$qq_never_pro$release$classdecl$var3=function(){this._imgs=[]};http_$$qq_never_pro$release$classdecl$var3.prototype.get=function(f){for(var a=$jscomp.makeIterator(this._imgs),d=a.next();!d.done;d=a.next())if(d=d.value,d.url===f)return d.obj;a={};a.url=f;a.obj=new Image;a.obj.src=f;this._imgs.push(a);return a.obj};
http_$$qq_never_pro$release$classdecl$var3.prototype.isAllReady=function(){for(var f=$jscomp.makeIterator(this._imgs),a=f.next();!a.done;a=f.next())if(!1===a.value.obj.complete)return!1;return!0};http_$$qq_never_pro$release$classdecl$var3.prototype.isReady=function(f){for(var a=$jscomp.makeIterator(this._imgs),d=a.next();!d.done;d=a.next())if(d=d.value,d.obj===f)return d.obj.complete;return!1};QQ.imgManager=new http_$$qq_never_pro$release$classdecl$var3;"use strict";QQ.Math={};
QQ.Math.rand=function(f,a,d){return d?Math.round(Math.random()*(a-f))+f:Math.random()*(a-f)+f};QQ.Math.reduceToSize=function(f,a,d){var m=1;f>d&&(m=d/f);a>d&&(f=d/a,f<m&&(m=f));return m};QQ.Math.scaleToSize=function(f,a,d){f=d/f;a=d/a;return f<a?f:a};QQ.Math.devidePeriod=function(f,a){f>a&&(f%=a);return f};QQ.Math.devideAngle=function(f){f>Math.PI&&(f-=2*Math.PI);f<-Math.PI&&(f+=2*Math.PI);return f};
QQ.Math.sinBetweenVectors=function(f,a,d,m){f=(f*d+a*m)/(Math.sqrt(f*f+a*a)*Math.sqrt(d*d+m*m));f=1-f*f;0>f&&(f=0);return Math.sqrt(f)};QQ.Math.calcProgress=function(f,a){var d=(Date.now()-f)/a;return 1>d?d:1};QQ.Math.getSign=function(f){return 0<=f?1:-1};QQ.Math.secToMs=function(f){return 1E3*f};QQ.Math.isIntersect=function(f,a){return f.y1<a.y2||f.y2>a.y1||f.x2<a.x1||f.x1>a.x2?!1:!0};QQ.Math.isInside=function(f,a,d){return f.y1>d&&d>f.y2&&f.x1<a&&a<f.x2?!0:!1};QQ.Math.PIx2=2*Math.PI;
QQ.Math.calcPivotX=function(f,a,d){var m=QQ.Math.pivot;if(f===m.CENTERTOP||f===m.CENTERBOTTOM||f===m.CENTER)return a;if(f===m.LEFTTOP)return a+d/2};QQ.Math.calcPivotY=function(f,a,d,m){m=void 0===m?1:m;var b=QQ.Math.pivot;if(f===b.CENTERTOP)return a-d/2*m;if(f===b.CENTERBOTTOM)return a+d/2*m;if(f===b.CENTER)return a;if(f===b.LEFTTOP)return a-d/2*m};QQ.Math.pivot={NONE:1,CENTER:2,LEFTTOP:3,CENTERBOTTOM:4,CENTERTOP:5};"use strict";QQ.Matrix={};
var abs=function(f){return Math.abs(f)},cos=function(f){return Math.cos(f)},sin=function(f){return Math.sin(f)};QQ.Matrix.getIdentity=function(){return[[1,0,0],[0,1,0],[0,0,1]]};QQ.Matrix.getScale=function(f,a){return[[f,0,0],[0,a,0],[0,0,1]]};QQ.Matrix.getMove=function(f,a){return[[1,0,0],[0,1,0],[f,a,1]]};QQ.Matrix.getRotate=function(f){return[[cos(f),-sin(f),0],[sin(f),cos(f),0],[0,0,1]]};
QQ.Matrix.determinant=function(f){for(var a=f.length,d=[],m=1,b=0,l=0;l<a;++l){d[l]=[];for(var g=0;g<a;++g)d[l][g]=f[l][g]}for(l=0;l<a-1;++l){f=l;for(var k=abs(d[l][l]),g=l+1;g<a;++g){var e=abs(d[g][l]);e>k&&(f=g,k=e)}if(f>l)g=d[l],d[l]=d[f],d[f]=g,++b;else if(0===k)return k;f=d[l][l];for(g=l+1;g<a;++g)for(k=d[g][l],d[g][l]=0,e=l+1;e<a;++e)d[g][e]=(d[g][e]*f-d[l][e]*k)/m;m=f}return b%2?-d[a-1][a-1]:d[a-1][a-1]};
QQ.Matrix.inverse=function(f){var a=QQ.Matrix.determinant(f);if(0===a)return!1;for(var d=f.length,m=[],b=0;b<d;b++){m[b]=[];for(var l=0;l<d;l++){for(var g=[],k=0===(b+l)%2?1:-1,e=0;e<l;e++){g[e]=[];for(var t=0;t<b;t++)g[e][t]=f[e][t];for(t=b+1;t<d;t++)g[e][t-1]=f[e][t]}for(e=l+1;e<d;e++){g[e-1]=[];for(t=0;t<b;t++)g[e-1][t]=f[e][t];for(t=b+1;t<d;t++)g[e-1][t-1]=f[e][t]}m[b][l]=k*QQ.Matrix.determinant(g)/a}}return m};
QQ.Matrix.mul=function(f,a){var d=f.length,m=a.length,b=a[0].length,l=[];if(f[0].length!==m)return!1;for(var g=0;g<d;g++)l[g]=[];for(var k=0;k<b;k++)for(g=0;g<d;g++){for(var e=0,t=0;t<m;t++)e+=f[g][t]*a[t][k];l[g][k]=e}return l};"use strict";
var http_$$qq_never_pro$release$classdecl$var4=function(){var f=this;window.addEventListener("mousemove",function(a){f._isNumbers(a.clientX,a.clientY,a.buttons)&&f._process(a.clientX,a.clientY,1===a.buttons)});window.addEventListener("mousedown",function(a){f._isNumbers(a.clientX,a.clientY)&&f._process(a.clientX,a.clientY,!0)});window.addEventListener("mouseup",function(a){f._isNumbers(a.clientX,a.clientY)&&f._process(a.clientX,a.clientY,!1)});this._y=this._x=0;this._m1=!1;this._m1UpCB=this._m1DownCB=
null};http_$$qq_never_pro$release$classdecl$var4.prototype.getX=function(){return this._x};http_$$qq_never_pro$release$classdecl$var4.prototype.getY=function(){return this._y};http_$$qq_never_pro$release$classdecl$var4.prototype.getM1=function(){return this._m1};http_$$qq_never_pro$release$classdecl$var4.prototype.setM1DownCB=function(f){this._m1DownCB=f};http_$$qq_never_pro$release$classdecl$var4.prototype.setM1UpCB=function(f){this._m1UpCB=f};
http_$$qq_never_pro$release$classdecl$var4.prototype.emulate=function(f,a,d){this._process(f,a,d)};http_$$qq_never_pro$release$classdecl$var4.prototype._process=function(f,a,d){this._x=f;this._y=a;!0===d&&!1===this._m1&&(this._m1=!0,this._m1DownCB&&this._m1DownCB());!1===d&&!0===this._m1&&(this._m1=!1,this._m1UpCB&&this._m1UpCB())};http_$$qq_never_pro$release$classdecl$var4.prototype._isNumbers=function(){for(var f=0;f<arguments.length;++f)if("number"!==typeof arguments[f])return!1;return!0};
QQ.Mouse=http_$$qq_never_pro$release$classdecl$var4;"use strict";var http_$$qq_never_pro$release$classdecl$var5=function(f,a,d){f=void 0===f?null:f;this._y=this._x=0;this._width=void 0===a?1:a;this._height=void 0===d?1:d;this._angle=0;this._ctx=QQ.application.getContext();this._physicsBody=null;this._sprite=f?new QQ.Sprite(QQ.imgManager.get(f)):null};http_$$qq_never_pro$release$classdecl$var5.prototype.setSize=function(f,a){this._width=f;this._height=a};
http_$$qq_never_pro$release$classdecl$var5.prototype.draw=function(){this._sprite&&this._sprite.draw()};http_$$qq_never_pro$release$classdecl$var5.prototype.drawBorder=function(){var f=this.getScale();this._ctx.beginPath();this._ctx.rect(-this._width/f.x/2,-this._height/f.y/2,this._width/f.x,this._height/f.y);this._ctx.lineWidth=1;this._ctx.strokeStyle="#000000";this._ctx.stroke()};
http_$$qq_never_pro$release$classdecl$var5.prototype.getRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};http_$$qq_never_pro$release$classdecl$var5.prototype.fitInRect=function(f){this._width=f.x2-f.x1;this._height=f.y1-f.y2;this._x=f.x1+this._width/2;this._y=f.y2+this._height/2};http_$$qq_never_pro$release$classdecl$var5.prototype.getPosition=function(){return{x:this._x,y:this._y}};
http_$$qq_never_pro$release$classdecl$var5.prototype.getAngle=function(){return this._angle};http_$$qq_never_pro$release$classdecl$var5.prototype.type=function(){return"subject"};http_$$qq_never_pro$release$classdecl$var5.prototype.setPhysics=function(f,a,d,m,b){this._physicsBody=Matter.Bodies.rectangle(f,a,d,m,b)};http_$$qq_never_pro$release$classdecl$var5.prototype.setDefaultPhysics=function(f){this._physicsBody=Matter.Bodies.rectangle(this._x,this._y,this._width,this._height,f)};
http_$$qq_never_pro$release$classdecl$var5.prototype.getPhysicsBody=function(){return this._physicsBody};http_$$qq_never_pro$release$classdecl$var5.prototype.isPhysicsBody=function(){return null!==this._physicsBody};http_$$qq_never_pro$release$classdecl$var5.prototype.click=function(){};http_$$qq_never_pro$release$classdecl$var5.prototype.tick=function(f){this._physicsTick(f)};http_$$qq_never_pro$release$classdecl$var5.prototype.setAlpha=function(f){this._sprite&&this._sprite.setAlpha(f)};
http_$$qq_never_pro$release$classdecl$var5.prototype.getScale=function(){var f=1,a=1;this._sprite&&(a=this._sprite.getSize(),f=this._width/a.width,a=this._height/a.height);return{x:f,y:a}};http_$$qq_never_pro$release$classdecl$var5.prototype.isClickable=function(){return!0};http_$$qq_never_pro$release$classdecl$var5.prototype.setPosition=function(f,a,d){void 0!==f&&(this._x=d?QQ.Math.calcPivotX(d,f,this._width):f);void 0!==a&&(this._y=d?QQ.Math.calcPivotY(d,a,this._height):a)};
http_$$qq_never_pro$release$classdecl$var5.prototype._physicsTick=function(f){this.isPhysicsBody()&&(this.setPosition(this._physicsBody.position.x,this._physicsBody.position.y),this._angle=this._physicsBody.angle)};QQ.Subject=http_$$qq_never_pro$release$classdecl$var5;"use strict";
var http_$$qq_never_pro$release$classdecl$var6=function(f,a,d,m,b){a=void 0===a?0:a;d=void 0===d?0:d;m=void 0===m?1:m;b=void 0===b?QQ.Text.fit.HEIGHT:b;QQ.Subject.call(this,null,0,0);this._fitSize=m;this._textX=a;this._textY=d;this._ratio=this._pxInUnit=this._textWidth=this._textHeight=0;this._fit=b;this._align="center";this._font="Ken";this._lineSpace=0;this._lineHeight=20+this._lineSpace;this._text=String(f).split("\n");this._lines=this._text.length;this._calcSizes()};
$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var6,QQ.Subject);http_$$qq_never_pro$release$classdecl$var6.prototype.isClickable=function(){return!1};http_$$qq_never_pro$release$classdecl$var6.prototype.setSize=function(f,a){this._width=f;this._height=a};http_$$qq_never_pro$release$classdecl$var6.prototype.setFont=function(f){this._font=f;this._calcSizes()};http_$$qq_never_pro$release$classdecl$var6.prototype.setAlign=function(f){this._align=f};
http_$$qq_never_pro$release$classdecl$var6.prototype.setLineHeight=function(f){this._lineHeight=f+this._lineSpace;this._calcSizes()};http_$$qq_never_pro$release$classdecl$var6.prototype.setLineSpace=function(f){this._lineHeight-=this._lineSpace;this._lineSpace=f;this._lineHeight+=this._lineSpace;this._calcSizes()};http_$$qq_never_pro$release$classdecl$var6.prototype.getScale=function(){return{x:this._width/this._textHeight/this._ratio,y:this._height/this._textHeight}};
http_$$qq_never_pro$release$classdecl$var6.prototype.draw=function(){this._setupContext();var f=0,a=-(this._lineHeight/2)*(this._lines-1);"left"===this._align?f=-(this._textWidth/2):"right"===this._align&&(f=this._textWidth/2);for(var d=0,m=$jscomp.makeIterator(this._text),b=m.next();!b.done;b=m.next())this._ctx.fillText(b.value,f,a+d*this._lineHeight),++d};
http_$$qq_never_pro$release$classdecl$var6.prototype._setupContext=function(){this._ctx.textBaseline="middle";this._ctx.textAlign=this._align;this._ctx.fillStyle="#878787";this._ctx.font=this._lineHeight-this._lineSpace+"px "+this._font};
http_$$qq_never_pro$release$classdecl$var6.prototype._calcSizes=function(){this._setupContext();this._textHeight=this._lineHeight*this._text.length;this._textWidth=0;for(var f=$jscomp.makeIterator(this._text),a=f.next();!a.done;a=f.next())a=this._ctx.measureText(a.value).width,a>this._textWidth&&(this._textWidth=a);this._pxInUnit=this._fit===http_$$qq_never_pro$release$classdecl$var6.fit.WIDTH?this._textWidth/this._fitSize:this._lineHeight/this._fitSize;this._ratio=this._textWidth/this._textHeight;
this.setSize(this._textWidth/this._pxInUnit,this._textHeight/this._pxInUnit);this.setPosition(this._textX,this._textY-this._height/this._lines/2*(this._lines-1))};QQ.Text=http_$$qq_never_pro$release$classdecl$var6;QQ.Text.fit={WIDTH:0,HEIGHT:1};"use strict";
var http_$$qq_never_pro$release$classdecl$var7=function(f){!1===f.complete&&alert("QQ.Sprite: img must be complete");this._width=f.width;this._height=f.height;this._alpha=1;this._animation=!1;this._curFrame=this._frames=this._tpf=this._fps=this._frameWidth=this._frameHeight=0;this._time=null;this._startTime=0;this._img=f};http_$$qq_never_pro$release$classdecl$var7.prototype.getRatio=function(){return this._width/this._height};
http_$$qq_never_pro$release$classdecl$var7.prototype.getSize=function(){return{width:this._width,height:this._height}};http_$$qq_never_pro$release$classdecl$var7.prototype.setAnimation=function(f,a,d,m){this._isAnimation=!0;this._frameWidth=f;this._frameHeight=a;this._fps=d;this._tpf=Math.round(1E3/d);this._time=m;this._startTime=this._time.now()};http_$$qq_never_pro$release$classdecl$var7.prototype.setAlpha=function(f){this._alpha=f};
http_$$qq_never_pro$release$classdecl$var7.prototype.draw=function(f,a){var d="number"===typeof f,m="number"===typeof a;if(QQ.Sprite.context){var b,l;d&&m?(d=QQ.Sprite.pivot.NONE,b=f,l=a):d=d&&!m?f:QQ.Sprite.pivot.CENTER;d!==QQ.Sprite.pivot.NONE&&(l=this._calcPosition(d),b=l.x,l=l.y);d=QQ.Sprite.context.globalAlpha;QQ.Sprite.context.globalAlpha=this._alpha;this._isAnimation?(m=this._time.now()-this._startTime,this._curFrame=Math.round(m/this._tpf)%this._frames,QQ.Sprite.context.drawImage(this._img,
this._frameWidth*this._curFrame,0,this._frameWidth,this._frameHeight,b,l,this._frameWidth,this._frameHeight)):QQ.Sprite.context.drawImage(this._img,b,l,this._width,this._height);QQ.Sprite.context.globalAlpha=d}};http_$$qq_never_pro$release$classdecl$var7.prototype.getContext=function(){return QQ.Sprite.context};
http_$$qq_never_pro$release$classdecl$var7.prototype._calcPosition=function(f){var a={x:0,y:0};if(f===QQ.Sprite.pivot.LEFTTOP)return a;this._isAnimation?f===QQ.Sprite.pivot.CENTER?(a.x=-this._frameWidth/2,a.y=-this._frameHeight/2):f===QQ.Sprite.pivot.CENTERBOTTOM?(a.x=-this._frameWidth/2,a.y=-this._frameHeight):f===QQ.Sprite.pivot.CENTERTOP&&(a.x=-this._frameWidth/2,a.y=0):f===QQ.Sprite.pivot.CENTER?(a.x=-this._width/2,a.y=-this._height/2):f===QQ.Sprite.pivot.CENTERBOTTOM?(a.x=-this._width/2,a.y=
-this._height):f===QQ.Sprite.pivot.CENTERTOP&&(a.x=-this._width/2,a.y=0);return a};QQ.Sprite=http_$$qq_never_pro$release$classdecl$var7;QQ.Sprite.setContext=function(f){QQ.Sprite.context=f};QQ.Sprite.context=!1;QQ.Sprite.pivot={NONE:0,CENTER:1,LEFTTOP:2,CENTERBOTTOM:3,CENTERTOP:4};"use strict";var http_$$qq_never_pro$release$classdecl$var8=function(){this._nowTime=Date.now()};http_$$qq_never_pro$release$classdecl$var8.prototype.now=function(){return this._nowTime};
http_$$qq_never_pro$release$classdecl$var8.prototype.update=function(){var f=this._nowTime;this._nowTime=Date.now();return(this._nowTime-f)/1E3};QQ.Time=http_$$qq_never_pro$release$classdecl$var8;"use strict";
var http_$$qq_never_pro$release$classdecl$var9=function(f){var a=this,d=0,m=0;window.addEventListener("touchstart",function(b){var l=b.touches[0];a._isNumbers(l.clientX,l.clientY)&&(d=l.clientX,m=l.clientY,f.emulate(d,m,!0));b.preventDefault()},{passive:!1});window.addEventListener("touchmove",function(b){var l=b.touches[0];a._isNumbers(l.clientX,l.clientY)&&(d=l.clientX,m=l.clientY,f.emulate(d,m,!0));b.preventDefault()},{passive:!1});window.addEventListener("touchend",function(a){f.emulate(d,m,!1);
a.preventDefault();return!0},{passive:!1})};http_$$qq_never_pro$release$classdecl$var9.prototype._isNumbers=function(f){for(var a=[],d=0;d<arguments.length;++d)a[d-0]=arguments[d];a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())if("number"!==typeof d.value)return!1;return!0};QQ.Touch=http_$$qq_never_pro$release$classdecl$var9;"use strict";var http_$$qq_never_pro$release$classdecl$var10=function(f){this._val=void 0===f?0:f};
http_$$qq_never_pro$release$classdecl$var10.prototype.clear=function(){this._val=0};http_$$qq_never_pro$release$classdecl$var10.prototype.invert=function(){this._val*=-1};http_$$qq_never_pro$release$classdecl$var10.prototype.v=function(f){void 0!==f&&(this._val=f);return this._val};http_$$qq_never_pro$release$classdecl$var10.prototype.isClear=function(){return 0===this._val};QQ.Value=http_$$qq_never_pro$release$classdecl$var10;"use strict";
var http_$$qq_never_pro$release$classdecl$var11=function(f,a,d){a=void 0===a?0:a;d=void 0===d?0:d;this._sprite=new QQ.Sprite(QQ.imgManager.get(f));this._width=a;this._height=d;this._y=this._x=this._canvasRatio=0;this._onClick=null};http_$$qq_never_pro$release$classdecl$var11.prototype.isHit=function(f,a){return QQ.Math.isInside(this.getRect(),f,a)};http_$$qq_never_pro$release$classdecl$var11.prototype.click=function(){this._onClick&&this._onClick()};
http_$$qq_never_pro$release$classdecl$var11.prototype.setClick=function(f){this._onClick=f};http_$$qq_never_pro$release$classdecl$var11.prototype.getRect=function(){return{x1:this._x-this._width/2,y1:this._y+this._height/2,x2:this._x+this._width/2,y2:this._y-this._height/2}};http_$$qq_never_pro$release$classdecl$var11.prototype.draw=function(){this._sprite.draw()};http_$$qq_never_pro$release$classdecl$var11.prototype.getPosition=function(){return{x:this._x,y:this._y}};
http_$$qq_never_pro$release$classdecl$var11.prototype.getRatio=function(){return this._sprite.getRatio()};http_$$qq_never_pro$release$classdecl$var11.prototype.getScale=function(){var f,a=0,d=this._sprite.getSize();f=this._width/d.width;0!==this._height&&(a=this._height/d.height);return{x:f,y:a}};
http_$$qq_never_pro$release$classdecl$var11.prototype.setPosition=function(f,a,d){this._fixSize();void 0!==f&&(this._x=d?QQ.Math.calcPivotX(d,f,this._width):f);void 0!==a&&(this._y=d?QQ.Math.calcPivotY(d,a,this._height,-1):a)};http_$$qq_never_pro$release$classdecl$var11.prototype._fixSize=function(){if(0===this._height){var f=QQ.Hud.canvasRatio();this._height=this._width/this.getRatio()*f}};QQ.Hud=http_$$qq_never_pro$release$classdecl$var11;
QQ.Hud.canvasRatio=function(f){if(void 0!==f)QQ.Hud.canvasRatio.ratio=f;else return QQ.Hud.canvasRatio.ratio};"use strict";var http_$$qq_never_pro$release$classdecl$var12=function(f,a){a=void 0===a?0:a;this._x=new QQ.Value(void 0===f?0:f);this._y=new QQ.Value(a)};http_$$qq_never_pro$release$classdecl$var12.prototype.x=function(f){return this.width(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.X=function(f){return this.width(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.w=function(f){return this.width(f)};
http_$$qq_never_pro$release$classdecl$var12.prototype.W=function(f){return this.width(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.Width=function(f){return this.width(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.width=function(f){return this._x.v(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.y=function(f){return this.height(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.Y=function(f){return this.height(f)};
http_$$qq_never_pro$release$classdecl$var12.prototype.h=function(f){return this.height(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.H=function(f){return this.height(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.Height=function(f){return this.height(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.height=function(f){return this._y.v(f)};http_$$qq_never_pro$release$classdecl$var12.prototype.clear=function(){this._x.clear();this._y.clear()};
http_$$qq_never_pro$release$classdecl$var12.prototype.set=function(f,a){this._x.v(f);this._y.v(a)};http_$$qq_never_pro$release$classdecl$var12.prototype.isClear=function(){return this._x.isClear()&&this._y.isClear()};http_$$qq_never_pro$release$classdecl$var12.prototype.clearX=function(){this._x.clear()};http_$$qq_never_pro$release$classdecl$var12.prototype.clearY=function(){this._y.clear()};http_$$qq_never_pro$release$classdecl$var12.prototype.invertX=function(){this._x.invert()};
http_$$qq_never_pro$release$classdecl$var12.prototype.invertY=function(){this._y.invert()};QQ.XY=http_$$qq_never_pro$release$classdecl$var12;"use strict";var http_$$qq_never_pro$release$classdecl$var13=function(){this._maxTicks=5;this._timeStep=.0166;this._deltaAccum=0;this._subjects=[];this._physics=this._background=null;this._pauseTime=.5;this._pauseable=!1;this._collisions=[]};http_$$qq_never_pro$release$classdecl$var13.prototype.setPauseable=function(f){this._pauseable=f};
http_$$qq_never_pro$release$classdecl$var13.prototype.addBackground=function(f){this._background=new QQ.Subject(f)};http_$$qq_never_pro$release$classdecl$var13.prototype.addSubject=function(f){this._subjects.push(f);f.isPhysicsBody()&&Matter.World.add(this._physics.world,[f.getPhysicsBody()])};
http_$$qq_never_pro$release$classdecl$var13.prototype.deleteSubject=function(f){f=this._subjects.indexOf(f);this._subjects[f].isPhysicsBody()&&Matter.Composite.remove(this._physics.world,this._subjects[f].getPhysicsBody());0<f&&this._subjects.splice(f,1)};http_$$qq_never_pro$release$classdecl$var13.prototype.getSubjectByPhysics=function(f){for(var a=$jscomp.makeIterator(this._subjects),d=a.next();!d.done;d=a.next())if(d=d.value,d.getPhysicsBody()===f)return d};
http_$$qq_never_pro$release$classdecl$var13.prototype.tick=function(f){this._deltaAccum+=f;f=0;if(this._deltaAccum<this._pauseTime){for(;this._deltaAccum>(this._maxTicks+1)*this._timeStep;)this._deltaAccum-=this._timeStep;for(;this._deltaAccum>this._timeStep;){this._deltaAccum-=this._timeStep;for(var a=$jscomp.makeIterator(this._subjects),d=a.next();!d.done;d=a.next())d.value.tick(this._timeStep);this._physics&&(this._collisions=[],Matter.Engine.update(this._physics,QQ.Math.secToMs(this._timeStep)));
f++}}else this._deltaAccum=0,this._pauseable&&QQ.application.pause()};http_$$qq_never_pro$release$classdecl$var13.prototype.getPhysics=function(){return this._physics};
http_$$qq_never_pro$release$classdecl$var13.prototype.createPhysics=function(){var f=this;this._physics=Matter.Engine.create();this._physics.velocityIterations=4;this._physics.positionIterations=4;this._physics.world.gravity.y=-1;this._physics.timing.timeScale=1;var a=function(a){a=$jscomp.makeIterator(a.pairs);for(var d=a.next();!d.done;d=a.next())f._collisions.push(d.value)};Matter.Events.on(this._physics,"collisionStart",a);Matter.Events.on(this._physics,"collisionActive",a)};
http_$$qq_never_pro$release$classdecl$var13.prototype.getCollisions=function(){return this._collisions};http_$$qq_never_pro$release$classdecl$var13.prototype.getSubjectsInRect=function(f){var a=[];null!==this._background&&(this._background.fitInRect(f),a.push(this._background));for(var d=$jscomp.makeIterator(this._subjects),m=d.next();!m.done;m=d.next())m=m.value,QQ.Math.isIntersect(f,m.getRect())&&a.push(m);return a};
http_$$qq_never_pro$release$classdecl$var13.prototype.getSubjectAtPoint=function(f,a){for(var d=this._subjects.length-1;0<=d;--d){var m=this._subjects[d];if(QQ.Math.isInside(m.getRect(),f,a)&&m.isClickable())return m}};http_$$qq_never_pro$release$classdecl$var13.prototype.getSubjects=function(f){f=void 0===f?function(){return!0}:f;var a=[];this._subjects.forEach(function(d){f(d)&&a.push(d)});return a};QQ.World=http_$$qq_never_pro$release$classdecl$var13;"use strict";
var http_$$qq_never_pro$release$classdecl$var14=function(){this._canvas=new QQ.Canvas("appCanvas",600,800);this._fpsCounter=new QQ.FpsCounter;this._time=new QQ.Time;this._mouse=new QQ.Mouse;this._touch=new QQ.Touch(this._mouse);this._frame=this._skipFrames=0;this._storage=window.localStorage};
http_$$qq_never_pro$release$classdecl$var14.prototype.init=function(){var f=this;QQ.Sprite.setContext(this._canvas.getContext());QQ.Hud.canvasRatio(this._canvas.getRatio());QQ.seizures.set("MainMenu");this._mouse.setM1DownCB(function(){if(f._isMouseInCanvas()){var a=f._getMousePosition();QQ.seizures.click(a.x,a.y)}});this._mouse.setM1UpCB(function(){if(f._isMouseInCanvas()){var a=f._getMousePosition();QQ.seizures.clickUp(a.x,a.y)}});this._process()};
http_$$qq_never_pro$release$classdecl$var14.prototype.storage=function(f,a){if(a)this._storage.setItem(f,a);else return this._storage.getItem(f)};http_$$qq_never_pro$release$classdecl$var14.prototype.pause=function(){QQ.seizures.popUp("Pause")};http_$$qq_never_pro$release$classdecl$var14.prototype.getCanvas=function(){return this._canvas.getCanvas()};http_$$qq_never_pro$release$classdecl$var14.prototype.getContext=function(){return this._canvas.getContext()};
http_$$qq_never_pro$release$classdecl$var14.prototype.isM1Pressed=function(){return this._mouse.getM1()};http_$$qq_never_pro$release$classdecl$var14.prototype.getMouseXY=function(){return this._isMouseInCanvas()?this._getMousePosition():{x:-1,y:-1}};http_$$qq_never_pro$release$classdecl$var14.prototype.getTime=function(){return this._time};
http_$$qq_never_pro$release$classdecl$var14.prototype._getMousePosition=function(){var f=this._canvas.getCanvas(),a=this._mouse.getX()-f.offsetLeft,f=this._mouse.getY()-f.offsetTop;return{x:a,y:f}};http_$$qq_never_pro$release$classdecl$var14.prototype._isMouseInCanvas=function(){var f=this._canvas.getCanvas(),a=this._getMousePosition(),d=a.x,a=a.y,a=0<a&&a<f.height;return 0<d&&d<f.width&&a};
http_$$qq_never_pro$release$classdecl$var14.prototype._process=function(f){this._frame=++this._frame%(this._skipFrames+1);0===this._frame&&(this._tick(),this._draw());setTimeout(this._process.bind(this),1)};http_$$qq_never_pro$release$classdecl$var14.prototype._tick=function(){var f=this._time.update();this._fpsCounter.tick(f);QQ.seizures.tick(f)};http_$$qq_never_pro$release$classdecl$var14.prototype._draw=function(){QQ.seizures.draw();this._fpsCounter.show(this._canvas.getContext())};
QQ.Application=http_$$qq_never_pro$release$classdecl$var14;QQ.levels=[];QQ.levelsOrder="begin easy jump twoStick async doubleTrouble bunny pyramid allin wall nowall smallwall".split(" ");"use strict";var http_$$qq_never_pro$release$classdecl$var15=function(){this._reset=this._seizure=this._loading=null;this._seizures=[];this._popup=null};http_$$qq_never_pro$release$classdecl$var15.prototype.init=function(){this._seizure=this._loading=new QQ.Seizures.SeizureLoading(QQ.application)};
http_$$qq_never_pro$release$classdecl$var15.prototype.add=function(f,a){this._seizures[f]=a};http_$$qq_never_pro$release$classdecl$var15.prototype.popUp=function(f,a){this._popup=new this._seizures[f](QQ.application,a)};http_$$qq_never_pro$release$classdecl$var15.prototype.closePopUp=function(){this._popup=null};http_$$qq_never_pro$release$classdecl$var15.prototype.reset=function(){this._reset&&this._reset()};
http_$$qq_never_pro$release$classdecl$var15.prototype.set=function(f,a){var d=this;null!==this._loading&&(this._seizure=this._loading);this._reset=function(){return d.set(f,a)};this._seizure=new this._seizures[f](QQ.application,a)};http_$$qq_never_pro$release$classdecl$var15.prototype.tick=function(f){this._doForActive(function(a){return a.tick(f)})};http_$$qq_never_pro$release$classdecl$var15.prototype.draw=function(){this._seizure.draw();this._popup&&this._popup.draw()};
http_$$qq_never_pro$release$classdecl$var15.prototype.click=function(f,a){this._doForActive(function(d){d.click&&d.click(f,a)})};http_$$qq_never_pro$release$classdecl$var15.prototype.clickUp=function(f,a){this._doForActive(function(d){d.clickUp&&d.clickUp(f,a)})};http_$$qq_never_pro$release$classdecl$var15.prototype._doForActive=function(f){this._popup?f(this._popup):f(this._seizure)};QQ.Seizures=http_$$qq_never_pro$release$classdecl$var15;QQ.seizures=new QQ.Seizures;"use strict";
var http_$$qq_never_pro$release$classdecl$var16=function(f){this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._world.addBackground("img/backgrounds/menu.png")};http_$$qq_never_pro$release$classdecl$var16.prototype.tick=function(f){this._world&&this._world.tick(f)};http_$$qq_never_pro$release$classdecl$var16.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)}};
QQ.Seizures.SeizureLoading=http_$$qq_never_pro$release$classdecl$var16;"use strict";
var http_$$qq_never_pro$release$classdecl$var17=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,-14);this._camera.setClip(0,0,-14,-41);this._world.addBackground("img/backgrounds/menu.png");var a=new QQ.Text("CREDITS",0,-4,3);this._world.addSubject(a);a=new QQ.Text(this._getText(),0,-7,28,QQ.Text.fit.WIDTH);a.setAlign("left");a.setFont("courier new");this._world.addSubject(a);this._addBackButton(0,0,QQ.Math.pivot.CENTERBOTTOM);this._addBackButton(0,
-60,QQ.Math.pivot.CENTERBOTTOM);a=new QQ.Subject(null,5,5);a.setPosition(10,-60,QQ.Math.pivot.CENTERBOTTOM);a.click=function(){return f._fpsCounter.showDetails()};this._world.addSubject(a)};http_$$qq_never_pro$release$classdecl$var17.prototype.tick=function(){var f=this._myApp.getMouseXY();this._camera.tickScroll(f.x,f.y,this._myApp.isM1Pressed())};http_$$qq_never_pro$release$classdecl$var17.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};
http_$$qq_never_pro$release$classdecl$var17.prototype.clickUp=function(f,a){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}};http_$$qq_never_pro$release$classdecl$var17.prototype._addBackButton=function(f,a,d){var m=new QQ.Subject("img/buttons/back.png",5,5);m.setPosition(f,a,d);m.click=function(){return QQ.seizures.set("MainMenu")};this._world.addSubject(m)};
http_$$qq_never_pro$release$classdecl$var17.prototype._getText=function(){return'ART:\nKenney (http://kenney.nl)\nLicense CC0 (Creative Commons Zero)\n\nPhysics:\nmatter.js (http://brm.io/matter-js/)\nLicense The MIT License (MIT)\nCopyright (c) 2017\n\nPermission is hereby granted, \nfree of charge, to any person \nobtaining a copy of this software \nand associated documentation \nfiles (the "Software"), to deal\nin the Software without restriction, \nincluding without limitation the rights\nto use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell\ncopies of the Software, and to permit \npersons to whom the Software is\nfurnished to do so, subject to the \nfollowing conditions:\n\nThe above copyright notice and this \npermission notice shall be included \nin all copies or substantial portions \nof the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", \nWITHOUT WARRANTY OF ANY KIND, \nEXPRESS OR IMPLIED, INCLUDING BUT NOT \nLIMITED TO THE WARRANTIES OF MERCHANT\nABILITY, FITNESS FOR A PARTICULAR \nPURPOSE AND NONINFRINGEMENT. IN NO \nEVENT SHALL THE AUTHORS OR COPYRIGHT \nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES \nOR OTHER LIABILITY, WHETHER IN AN ACTION \nOF CONTRACT, TORT OR OTHERWISE, ARISING \nFROM, OUT OF OR IN CONNECTION WITH THE \nSOFTWARE OR THE USE OR OTHER  DEALINGS \nIN THE SOFTWARE.'};
QQ.seizures.add("Credits",http_$$qq_never_pro$release$classdecl$var17);"use strict";
var http_$$qq_never_pro$release$classdecl$var18=function(f){this._myApp=f;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._camera.setClip(0,0,0,0);this._world=new QQ.World;this._world.addBackground("img/backgrounds/menu.png");this._clickStart=!1;this._openedMax=3;this._opened=0;this._addLevels();f=new QQ.Subject("img/buttons/back.png",5,5);f.click=function(){return QQ.seizures.set("MainMenu")};f.setPosition(0,17);this._world.addSubject(f)};
http_$$qq_never_pro$release$classdecl$var18.prototype.tick=function(f){var a=this._myApp.getMouseXY(),d=this._myApp.isM1Pressed()&&this._clickStart;this._camera.tickScroll(a.x,a.y,d);this._world.tick(f)};http_$$qq_never_pro$release$classdecl$var18.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};http_$$qq_never_pro$release$classdecl$var18.prototype.click=function(){this._clickStart=!0};
http_$$qq_never_pro$release$classdecl$var18.prototype.clickUp=function(f,a){if(this._clickStart){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}this._clickStart=!1}};http_$$qq_never_pro$release$classdecl$var18.prototype._addLevels=function(){for(var f=QQ.levelsOrder.length,a=Math.ceil(f/4),d=0,m=0;m<a;++m)for(var b=0;4>b&&d<f;++b)++d,this._addLevel(-10.5+7*b,10-7*m,QQ.levelsOrder[d-1],d)};
http_$$qq_never_pro$release$classdecl$var18.prototype._addLevel=function(f,a,d,m){var b=this._myApp.storage("level"+d),l=QQ.Seizures.SeizureLevels.Level.STATUS,g=l.OPEN;"DONE"===b?g=l.DONE:this._opened<this._openedMax?++this._opened:g=l.CLOSED;this._world.addSubject(new http_$$qq_never_pro$release$classdecl$var18.Level(f,a,d,m,g))};QQ.Seizures.SeizureLevels=http_$$qq_never_pro$release$classdecl$var18;
var http_$$qq_never_pro$release$classdecl$var19=function(f,a,d,m,b){QQ.Subject.call(this,"img/buttons/level.png",5,5);this._name=d;this._status=b;this.setPosition(f,a);this._spriteCheck=null;b===http_$$qq_never_pro$release$classdecl$var19.STATUS.DONE?this._spriteCheck=new QQ.Sprite(QQ.imgManager.get("img/check.png")):b===http_$$qq_never_pro$release$classdecl$var19.STATUS.CLOSED&&(this._spriteCheck=new QQ.Sprite(QQ.imgManager.get("img/cross.png")));this._text=new QQ.Text(m);this._text.setLineHeight(30)};
$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var19,QQ.Subject);http_$$qq_never_pro$release$classdecl$var19.prototype.click=function(){var f=this._status===http_$$qq_never_pro$release$classdecl$var19.STATUS.DONE;(this._status===http_$$qq_never_pro$release$classdecl$var19.STATUS.OPEN||f)&&QQ.seizures.set("Game",{cfg:QQ.levels[this._name],name:this._name})};
http_$$qq_never_pro$release$classdecl$var19.prototype.draw=function(){QQ.Subject.prototype.draw.call(this);this._spriteCheck&&this._spriteCheck.draw();this._text.draw()};QQ.Seizures.SeizureLevels.Level=http_$$qq_never_pro$release$classdecl$var19;QQ.Seizures.SeizureLevels.Level.STATUS={DONE:0,OPEN:1,CLOSED:2};QQ.seizures.add("Levels",QQ.Seizures.SeizureLevels);"use strict";
var http_$$qq_never_pro$release$classdecl$var20=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,-14);this._camera.setClip(0,0,-14,-14);this._world.addBackground("img/backgrounds/menu.png");f=new QQ.Text("INTRO",0,-4,3);this._world.addSubject(f);f=new QQ.Text(this._getText(),0,-7,28,QQ.Text.fit.WIDTH);f.setAlign("left");f.setLineSpace(20);this._world.addSubject(f);this._addBackButton(0,0,QQ.Math.pivot.CENTERBOTTOM)};
http_$$qq_never_pro$release$classdecl$var20.prototype.tick=function(){var f=this._myApp.getMouseXY();this._camera.tickScroll(f.x,f.y,this._myApp.isM1Pressed())};http_$$qq_never_pro$release$classdecl$var20.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};
http_$$qq_never_pro$release$classdecl$var20.prototype.clickUp=function(f,a){if(!this._camera.isScrolling()){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()}};http_$$qq_never_pro$release$classdecl$var20.prototype._addBackButton=function(f,a,d){var m=new QQ.Subject("img/buttons/back.png",5,5);m.setPosition(f,a,d);m.click=function(){return QQ.seizures.set("MainMenu")};this._world.addSubject(m)};
http_$$qq_never_pro$release$classdecl$var20.prototype._getText=function(){return"    Lots of animal living on earth. They like earth,\nbut all of them wants to live in SPACE ZOO.\nEvery year spaceship is comming to earth \nto get some animals to SPACE ZOO.\nOnly you can help them to get to it.\nHelp this little creatures to rech space ship.\nJust tap on screen to help animals.\nThank you"};QQ.seizures.add("Intro",http_$$qq_never_pro$release$classdecl$var20);"use strict";
var http_$$qq_never_pro$release$classdecl$var21=function(f){this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._world.addBackground("img/backgrounds/menu.png");f=new QQ.Text("JUMPEXELS",0,15,3);this._world.addSubject(f);f=new QQ.Subject("img/logo.png",10,10);f.click=function(){return QQ.seizures.set("Levels")};f.setPosition(0,6);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Levels")};f.setPosition(0,
0);this._world.addSubject(f);f=new QQ.Text("PLAY",0,0,2);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Intro")};f.setPosition(0,-6);this._world.addSubject(f);f=new QQ.Text("INTRO",0,-6,2);this._world.addSubject(f);f=new QQ.Subject("img/buttons/long.png",15,5);f.click=function(){return QQ.seizures.set("Credits")};f.setPosition(0,-12);this._world.addSubject(f);f=new QQ.Text("CREDITS",0,-12,2);this._world.addSubject(f)};
http_$$qq_never_pro$release$classdecl$var21.prototype.tick=function(f){this._world&&this._world.tick(f)};http_$$qq_never_pro$release$classdecl$var21.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)}};http_$$qq_never_pro$release$classdecl$var21.prototype.click=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&d.click()};QQ.seizures.add("MainMenu",http_$$qq_never_pro$release$classdecl$var21);
"use strict";
var http_$$qq_never_pro$release$classdecl$var22=function(f){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._click=!1;this._world.addBackground("img/dialog.png");f=new QQ.Subject("img/buttons/next.png",5,5);f.setPosition(-6,6);f.click=function(){return QQ.seizures.closePopUp()};this._world.addSubject(f);f=new QQ.Subject("img/buttons/restart.png",5,5);f.setPosition(0,6);f.click=function(){QQ.seizures.closePopUp();QQ.seizures.reset()};this._world.addSubject(f);f=
new QQ.Subject("img/buttons/exit.png",5,5);f.setPosition(6,6);f.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Levels")};this._world.addSubject(f);f=new QQ.Text("Pause",0,11,3);this._world.addSubject(f)};http_$$qq_never_pro$release$classdecl$var22.prototype.tick=function(){};http_$$qq_never_pro$release$classdecl$var22.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};
http_$$qq_never_pro$release$classdecl$var22.prototype.click=function(){this._click=!0};http_$$qq_never_pro$release$classdecl$var22.prototype.clickUp=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&this._click&&d.click();this._click=!1};QQ.seizures.add("Pause",http_$$qq_never_pro$release$classdecl$var22);"use strict";
var http_$$qq_never_pro$release$classdecl$var23=function(f,a){this._myApp=f;this._world=new QQ.World;this._camera=new QQ.Camera(f.getCanvas(),30,40,0,0);this._click=!1;this._world.addBackground("img/dialog.png");var d=new QQ.Text("Congratulations\n\nYou have won!",0,13,1.3);this._world.addSubject(d);d=QQ.levelsOrder.indexOf(a)+1;if(d<QQ.levelsOrder.length){var m=QQ.levelsOrder[d],d=new QQ.Subject("img/buttons/forward.png",5,5);d.setPosition(-6,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Game",
{cfg:QQ.levels[m],name:m})};this._world.addSubject(d)}d=new QQ.Subject("img/buttons/restart.png",5,5);d.setPosition(0,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.reset()};this._world.addSubject(d);d=new QQ.Subject("img/buttons/exit.png",5,5);d.setPosition(6,6);d.click=function(){QQ.seizures.closePopUp();QQ.seizures.set("Levels")};this._world.addSubject(d)};http_$$qq_never_pro$release$classdecl$var23.prototype.tick=function(){};
http_$$qq_never_pro$release$classdecl$var23.prototype.draw=function(){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f)};http_$$qq_never_pro$release$classdecl$var23.prototype.click=function(){this._click=!0};http_$$qq_never_pro$release$classdecl$var23.prototype.clickUp=function(f,a){var d=this._camera.getWorldPoint(f,a);(d=this._world.getSubjectAtPoint(d.x,d.y))&&this._click&&d.click();this._click=!1};QQ.seizures.add("EndLevel",http_$$qq_never_pro$release$classdecl$var23);
"use strict";
var http_$$qq_never_pro$release$classdecl$var24=function(f,a){this._app=f;this._name=a.name;this._huds=[];this._world=new QQ.World;this._camera=null;this._isFinish=!1;this._world.setPauseable(!0);this._world.createPhysics();this._camera=new QQ.Camera(f.getCanvas(),a.cfg.camera.size.w,a.cfg.camera.size.h,a.cfg.camera.lookAt.x,a.cfg.camera.lookAt.y);this._world.addBackground(a.cfg.backGround.img);this._world.addSubject(new http_$$qq_never_pro$release$classdecl$var24.EscapeShip(a.cfg.escapeShip,this));
for(var d=$jscomp.makeIterator(a.cfg.grounds),m=d.next();!m.done;m=d.next())this._world.addSubject(new http_$$qq_never_pro$release$classdecl$var24.Ground(m.value));d=$jscomp.makeIterator(a.cfg.ramps);for(m=d.next();!m.done;m=d.next())this._world.addSubject(new http_$$qq_never_pro$release$classdecl$var24.Ramp(m.value));d=$jscomp.makeIterator(a.cfg.aliens);for(m=d.next();!m.done;m=d.next())this._world.addSubject(new http_$$qq_never_pro$release$classdecl$var24.Alien(m.value,this));d=new QQ.Hud("img/buttons/back.png",
15);d.setPosition(1,1,QQ.Math.pivot.LEFTTOP);d.setClick(function(){return QQ.seizures.popUp("Pause")});this._huds.push(d)};http_$$qq_never_pro$release$classdecl$var24.prototype.tick=function(f){var a=this;0!==this._getSubjectsByType("alien").length||this._isFinish||(this._isFinish=!0,this._app.storage("level"+this._name,"DONE"),setTimeout(function(){return QQ.seizures.popUp("EndLevel",a._name)},500));this._world&&this._world.tick(f)};
http_$$qq_never_pro$release$classdecl$var24.prototype.draw=function(){if(this._camera){var f=this._camera.getViewRect(),f=this._world.getSubjectsInRect(f);this._camera.draw(f);this._camera.drawHud(this._huds)}};http_$$qq_never_pro$release$classdecl$var24.prototype.click=function(f,a){if(!this._isFinish)for(var d=$jscomp.makeIterator(this._huds),m=d.next();!m.done;m=d.next())m=m.value,m.isHit(this._camera.widthToPercent(f),this._camera.heightToPercent(a))&&m.click()};
http_$$qq_never_pro$release$classdecl$var24.prototype.getWorld=function(){return this._world};http_$$qq_never_pro$release$classdecl$var24.prototype.getWorldPhysics=function(){return this._world.getPhysics()};http_$$qq_never_pro$release$classdecl$var24.prototype.getSurfaces=function(){var f=this._getSubjectsByType("ground"),a=this._getSubjectsByType("ramp");return[].concat(f,a)};http_$$qq_never_pro$release$classdecl$var24.prototype.getApp=function(){return this._app};
http_$$qq_never_pro$release$classdecl$var24.prototype._getSubjectsByType=function(f){return this._world.getSubjects(function(a){return a.type()===f})};QQ.Seizures.SeizureGame=http_$$qq_never_pro$release$classdecl$var24;QQ.seizures.add("Game",QQ.Seizures.SeizureGame);"use strict";
var http_$$qq_never_pro$release$classdecl$var25=function(f,a){QQ.Subject.call(this,"img/aliens/parrot.png",50,50);this.setPosition(f.pos.x,f.pos.y,QQ.Math.pivot.CENTERBOTTOM);this.setPhysics(f.pos.x,f.pos.y,50,50);this._game=a;this._timeToEscape=300;this._startEscape=0;this._jumped=!1;this.tick(0)};$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var25,QQ.Subject);http_$$qq_never_pro$release$classdecl$var25.prototype.escape=function(){0===this._startEscape&&(this._startEscape=Date.now())};
http_$$qq_never_pro$release$classdecl$var25.prototype.jump=function(){for(var f=this._physicsBody,a=this._game.getSurfaces(),d=[],a=$jscomp.makeIterator(a),m=a.next();!m.done;m=a.next())d.push(m.value.getPhysicsBody());a=this._game.getWorld().getCollisions();a=$jscomp.makeIterator(a);for(m=a.next();!m.done;m=a.next()){var b=m.value,m=b.bodyA===f&&b.bodyA.position.y>b.bodyB.bounds.max.y&&d.includes(b.bodyB),b=b.bodyB===f&&b.bodyB.position.y>b.bodyA.bounds.max.y&&d.includes(b.bodyA);if(m||b)Matter.Body.setVelocity(f,
{x:1.5*f.velocity.x,y:10}),1E-5>f.angularSpeed&&(m=QQ.Math.rand(-1,1)/1E3,Matter.Body.setAngularVelocity(f,m)),this._jumped=!0}};http_$$qq_never_pro$release$classdecl$var25.prototype.tick=function(f){if(0<this._startEscape){var a=1-QQ.Math.calcProgress(this._startEscape,this._timeToEscape);this.setAlpha(a);0===a&&this._game.getWorld().deleteSubject(this)}else this._game.getApp().isM1Pressed()&&!this._jumped&&this.jump(),!this._game.getApp().isM1Pressed()&&this._jumped&&(this._jumped=!1);this._physicsTick(f)};
http_$$qq_never_pro$release$classdecl$var25.prototype.type=function(){return"alien"};QQ.Seizures.SeizureGame.Alien=http_$$qq_never_pro$release$classdecl$var25;"use strict";
var http_$$qq_never_pro$release$classdecl$var26=function(f,a){QQ.Subject.call(this,"img/spaceShip.png",f.size.w,f.size.h);var d=this;this.setDefaultPhysics({isStatic:!0,isSensor:!0});var m=a.getWorld();this._time=this._a=0;this._pivot=f.pos;this._travel=f.travel;this._period=f.period;Matter.Events.on(a.getWorldPhysics(),"collisionStart",function(a){a=a.pairs;for(var b=d.getPhysicsBody(),f=0,k=a.length;f!==k;++f){var e=a[f],t=null;e.bodyA===b?t=m.getSubjectByPhysics(e.bodyB):e.bodyB===b&&(t=m.getSubjectByPhysics(e.bodyA));
t&&t.escape()}});this.tick(0)};$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var26,QQ.Subject);http_$$qq_never_pro$release$classdecl$var26.prototype.tick=function(f){this._time+=f;this._time=QQ.Math.devidePeriod(this._time,this._period);this._a=this._time/this._period*QQ.Math.PIx2;Matter.Body.setPosition(this.getPhysicsBody(),{x:this._pivot.x+this._travel.w*Math.sin(this._a),y:this._pivot.y+this._travel.h*Math.sin(2*this._a)});this._physicsTick(f)};
http_$$qq_never_pro$release$classdecl$var26.prototype.type=function(){return"escapeShip"};QQ.Seizures.SeizureGame.EscapeShip=http_$$qq_never_pro$release$classdecl$var26;"use strict";var http_$$qq_never_pro$release$classdecl$var27=function(f){QQ.Subject.call(this,"img/earth.png",f.size.w,f.size.h);this.setPosition(f.pos.x,f.pos.y,QQ.Math.pivot.CENTERTOP);this.setDefaultPhysics({isStatic:!0})};$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var27,QQ.Subject);
http_$$qq_never_pro$release$classdecl$var27.prototype.type=function(){return"ground"};QQ.Seizures.SeizureGame.Ground=http_$$qq_never_pro$release$classdecl$var27;"use strict";
var http_$$qq_never_pro$release$classdecl$var28=function(f){QQ.Subject.call(this,"img/ramp.png",f.size.w,f.size.h);this.setDefaultPhysics({isStatic:!0});this._time=f.time||0;this._prev={x:0,y:0};f.pos?(this._pivot={x:f.pos.x,y:f.pos.y},this._period=f.period,this._range=f.travel):(this._f=f.f,Matter.Body.setPosition(this._physicsBody,this._f(0)));this.tick(0)};$jscomp.inherits(http_$$qq_never_pro$release$classdecl$var28,QQ.Subject);
http_$$qq_never_pro$release$classdecl$var28.prototype.tick=function(f){this._time+=f;var a={};this._f?a=this._f(this._time):(this._a=this._time/this._period*QQ.Math.PIx2,a.x=this._pivot.x+this._range*Math.sin(this._a),a.y=this._pivot.y);Matter.Body.setVelocity(this._physicsBody,{x:a.x-this._prev.x,y:a.y-this._prev.y});Matter.Body.setPosition(this._physicsBody,a);this._prev=a;this._physicsTick(f)};http_$$qq_never_pro$release$classdecl$var28.prototype.type=function(){return"ramp"};
QQ.Seizures.SeizureGame.Ramp=http_$$qq_never_pro$release$classdecl$var28;
QQ.levels.allin={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:50,period:2},{pos:{x:0,y:200},size:{w:30,h:15},travel:40,period:1}],aliens:[{pos:{x:0,y:60}},{pos:{x:75,y:60}},{pos:{x:-75,y:60}},
{pos:{x:150,y:60}},{pos:{x:-150,y:60}},{pos:{x:0,y:160}},{pos:{x:75,y:160}},{pos:{x:-75,y:160}},{pos:{x:150,y:160}},{pos:{x:-150,y:160}},{pos:{x:0,y:260}},{pos:{x:75,y:260}},{pos:{x:-75,y:260}},{pos:{x:150,y:260}},{pos:{x:-150,y:260}}]};
QQ.levels.async={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:-100,y:400},travel:{w:5,h:5},period:10},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-100,y:100},size:{w:100,h:15},travel:80,time:2,period:4},{pos:{x:100,y:220},size:{w:100,h:15},travel:60,time:2.5,period:3}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.begin={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:300},travel:{w:70,h:50},period:10},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.bunny={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:280},travel:{w:10,h:40},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-200,y:150},size:{w:15,h:15},travel:0,period:1}],aliens:[{pos:{x:-180,y:60}}]};
QQ.levels.doubleTrouble={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:50,period:2},{pos:{x:0,y:200},size:{w:30,h:15},travel:40,period:1}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.easy={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:300},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:100,period:5}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.jump={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:140,h:140},pos:{x:130,y:300},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:-80,y:100},size:{w:100,h:15},travel:80,period:2.5}],aliens:[{pos:{x:-150,y:60}}]};
QQ.levels.pyramid={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:420},size:{w:720,h:960}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:850},travel:{w:10,h:3},period:5},grounds:[{pos:{x:0,y:0},size:{w:800,h:100}},{pos:{x:450,y:500},size:{w:100,h:600}},{pos:{x:-450,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:220,h:15},travel:150,period:8},{pos:{x:0,y:210},size:{w:180,h:15},travel:100,period:7},{pos:{x:0,y:320},size:{w:140,h:15},travel:80,period:6},{pos:{x:0,
y:430},size:{w:100,h:15},travel:60,period:4},{pos:{x:0,y:540},size:{w:60,h:15},travel:40,period:2},{pos:{x:0,y:650},size:{w:20,h:15},travel:20,period:1}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.test={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.twoStick={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:150,h:150},pos:{x:0,y:400},travel:{w:40,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{pos:{x:0,y:100},size:{w:100,h:15},travel:100,period:5},{pos:{x:0,y:210},size:{w:100,h:15},travel:100,time:2.5,period:5}],aliens:[{pos:{x:0,y:60}}]};
QQ.levels.wall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-200,y:500},size:{w:100,h:500}},{pos:{x:-125,y:200},size:{w:50,h:50}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:50-160*
Math.sin(f/7*QQ.Math.PIx2),y:330}}}],aliens:[{pos:{x:0,y:25}}]};
QQ.levels.nowall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-110,y:200},size:{w:15,h:15}},{pos:{x:-300,y:500},size:{w:100,h:600}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:10-
150*Math.sin(f/5*QQ.Math.PIx2),y:315}}}],aliens:[{pos:{x:0,y:25}}]};
QQ.levels.smallwall={backGround:{img:"img/backgrounds/castle.png"},camera:{type:"fixed",lookAt:{x:0,y:200},size:{w:450,h:600}},escapeShip:{size:{w:100,h:100},pos:{x:150,y:430},travel:{w:0,h:10},period:20},grounds:[{pos:{x:0,y:0},size:{w:500,h:100}},{pos:{x:300,y:500},size:{w:100,h:600}},{pos:{x:-180,y:500},size:{w:150,h:500}},{pos:{x:-100,y:200},size:{w:5,h:50}}],ramps:[{size:{w:100,h:15},f:function(f){return{x:50+50*Math.sin(f/1.5*QQ.Math.PIx2),y:100}}},{size:{w:75,h:15},f:function(f){return{x:50+
100*Math.sin(f/6*QQ.Math.PIx2),y:330}}}],aliens:[{pos:{x:0,y:25}}]};"use strict";
window.addEventListener("load",function(){QQ.imgManager.get("img/aliens/parrot.png");QQ.imgManager.get("img/backgrounds/castle.png");QQ.imgManager.get("img/backgrounds/menu.png");QQ.imgManager.get("img/buttons/back.png");QQ.imgManager.get("img/buttons/exit.png");QQ.imgManager.get("img/buttons/forward.png");QQ.imgManager.get("img/buttons/level.png");QQ.imgManager.get("img/buttons/long.png");QQ.imgManager.get("img/buttons/next.png");QQ.imgManager.get("img/buttons/restart.png");QQ.imgManager.get("img/check.png");
QQ.imgManager.get("img/cross.png");QQ.imgManager.get("img/dialog.png");QQ.imgManager.get("img/earth.png");QQ.imgManager.get("img/logo.png");QQ.imgManager.get("img/ramp.png");QQ.imgManager.get("img/spaceShip.png");(function a(){QQ.imgManager.isAllReady()?(QQ.application=new QQ.Application,QQ.seizures.init(),QQ.application.init()):setTimeout(a,10)})()});
